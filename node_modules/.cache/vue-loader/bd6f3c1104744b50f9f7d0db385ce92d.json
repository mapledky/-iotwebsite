{"remainingRequest":"/Users/maple/Desktop/file/netplus/开发/IOT/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/maple/Desktop/file/netplus/开发/IOT/src/views/MainViews/TimeData/ForeData.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/maple/Desktop/file/netplus/开发/IOT/src/views/MainViews/TimeData/ForeData.vue","mtime":1634560622426},{"path":"/Users/maple/Desktop/file/netplus/开发/IOT/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maple/Desktop/file/netplus/开发/IOT/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/maple/Desktop/file/netplus/开发/IOT/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maple/Desktop/file/netplus/开发/IOT/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCBtcXR0IGZyb20gJ21xdHQnCmNvbnN0IG1xdHQgPSByZXF1aXJlKCdtcXR0JykKaW1wb3J0IENvb2tpZSBmcm9tICdqcy1jb29raWUnCmltcG9ydCAqIGFzIGVjaGFydHMgZnJvbSAnZWNoYXJ0cycKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJwppbXBvcnQgUXMgZnJvbSAncXMnCmltcG9ydCB7CgludW1iZXIKfSBmcm9tICdlY2hhcnRzJwoKZXhwb3J0IGRlZmF1bHQgewoJZGF0YSgpIHsKCQlyZXR1cm4gewoJCQlQcm9kdWN0aW9uc0luZm9yOiBbXSwKCQkJRGV2aWNlSW5mb3I6IFtdLAoJCQlEZXZpY2U6IFtdLAoJCQlpc1R5cGUzOiBmYWxzZSwKCQkJRGF0YUxpc3Q6IHt9LAoJCQlwcm9kdWN0X2xpc3Q6IFtdLAoJCQlkZXZpY2VfbGlzdDogW10sCgkJCS8vIHByb2R1Y3RfaWQ6bnVtYmVyLAoJCQkvLyBkZXZpY2VfaWQ6bnVtYmVyLAoJCX0KCX0sCgljcmVhdGVkKCkgewoJCWlmIChDb29raWUuZ2V0KCdtb2RhbCcpID09PSAnMycpIHsKCQkJY29uc29sZS5sb2coIuajgOa1i+WIsOS4uuezu+e7n+euoeeQhuWRmCIpCgkJCXRoaXMuaXNUeXBlMyA9IHRydWUKCQl9IGVsc2UgewoJCQljb25zb2xlLmxvZygi5qOA5rWL5Li65pmu6YCa55So5oi3IikKCQl9Cgl9LAoJbW91bnRlZCgpIHsKCQkvL21xdHQKCQkvLyBjb25zdCB1c2VyX2lkID0gQ29va2llLmdldCgndXNlcl9pZCcpCgkJY29uc3QgdXNlcl9pZCA9IENvb2tpZS5nZXQoJ3VzZXJfaWQnKQoJCWNvbnN0IHRva2VuID0gQ29va2llLmdldCgndG9rZW4nKQoJCWNvbnN0IGNvbXBhbnlfaWQgPSBDb29raWUuZ2V0KCdjb21wYW55X2lkJykKCQljb25zdCBwYXNzd29yZCA9IENvb2tpZS5nZXQoJ3Bhc3N3b3JkJykKCQljb25zdCBvcHRpb25zID0gewoJCQkvLyDotoXml7bml7bpl7QKCQkJY29ubmVjdFRpbWVvdXQ6IDQwMDAsCgkJCS8vIOiupOivgeS/oeaBrwoJCQljbGllbnRJZDogdXNlcl9pZCwKCQkJdXNlcm5hbWU6IHVzZXJfaWQsCgkJCXBhc3N3b3JkOiBwYXNzd29yZCwgLy/mnKrliqDlr4bnmoRwYXNzd29yZAoJCQkvLyDlv4Pot7Pml7bpl7QKCQkJa2VlcGFsaXZlOiA2MCwKCQkJY2xlYW46IHRydWUsCgkJfQoJCS8vIFdlYlNvY2tldCDov57mjqXlrZfnrKbkuLIKCQkvLyBjb25zdCBjb25zdFdlYlNvY2tldF9VUkw9J3dzOi8vbG9jYWxob3N0OjgwODMvbXF0dCcKCQkvLyBUQ1AvVExTIOi/nuaOpeWtl+espuS4su+8jOS7hemZkCBOb2RlLmpzIOeOr+WigwoJCWNvbnN0IFRDUF9VUkwgPSAnd3NzOi8vbXF0dC5tYXBsZS50b2RheTo4MDg0L21xdHQnCgkJLy8gY29uc3QgVENQX1RMU19VUkwgPSdtcXR0czovL2xvY2FsaG9zdDo4ODgzJwoJCS8vIGNvbnNvbGUubG9nKG9wdGlvbnMpCgkJdmFyIHVwZGF0ZW1lc3MgPSAidXBkYXRlLyIgKyBjb21wYW55X2lkICsgIi8jIjsKCQl0aGlzLmNsaWVudCA9IG1xdHQuY29ubmVjdChUQ1BfVVJMLCBvcHRpb25zKQoJCXRoaXMuY2xpZW50Lm9uKCdjb25uZWN0JywgKCkgPT4gewoJCQljb25zb2xlLmxvZygn6L+e5o6l5oiQ5YqfJykKCQkJdGhpcy5jbGllbnQuc3Vic2NyaWJlKHVwZGF0ZW1lc3MsIChlcnIpID0+IHsKCQkJCWNvbnNvbGUubG9nKGVyciB8fCAn6K6i6ZiF5oiQ5YqfJykKCQkJfSkKCQl9KQoJCXRoaXMuY2xpZW50Lm9uKCdyZWNvbm5lY3QnLCAoZXJyb3IpID0+IHsKCQkJY29uc29sZS5sb2coJ+ato+WcqOmHjei/njonLCBlcnJvcikKCQkJdGhpcy5jbGllbnQuZW5kKCkKCQkJQ29va2llLnJlbW92ZSgidG9rZW4iKQoJCQlsb2NhdGlvbi5yZWxvYWQoKTsKCQl9KQoJCXRoaXMuY2xpZW50Lm9uKCdlcnJvcicsIChlcnJvcikgPT4gewoJCQljb25zb2xlLmxvZygn6L+e5o6l5aSx6LSlOicsIGVycm9yKQoJCX0pCgkJLy/ml7bluo/mlbDmja7lupMKCQl2YXIgZGF0YSA9IFtdOwoJCXZhciBub3cgPSBuZXcgRGF0ZSgpOwoJCS8vIHZhciBvbmVEYXkgPSAyNCAqIDM2MDAgKiAxMDAwOwoJCXZhciB2YWx1ZTsKCQl2YXIgb3B0aW9uID0gewoJCQl0aXRsZTogewoJCQkJdGV4dDogJ+acqui/nuaOpScKCQkJfSwKCQkJdG9vbHRpcDogewoJCQkJdHJpZ2dlcjogJ2F4aXMnLAoJCQkJZm9ybWF0dGVyOiBmdW5jdGlvbihwYXJhbXMpIHsKCQkJCQlwYXJhbXMgPSBwYXJhbXNbMF07CgkJCQkJcmV0dXJuIHBhcmFtcy5uYW1lICsgJyBWYWx1ZTogJyArIHBhcmFtcy52YWx1ZVsxXTsKCQkJCX0sCgkJCQlheGlzUG9pbnRlcjogewoJCQkJCWFuaW1hdGlvbjogZmFsc2UKCQkJCX0KCQkJfSwKCQkJeEF4aXM6IHsKCQkJCS8vIHR5cGU6ICd0aW1lJywKCQkJCXNwbGl0TnVtYmVyOiAzMCwKCQkJCS8vIHNwbGl0TGluZTogewoJCQkJLy8gCXNob3c6IGZhbHNlCgkJCQkvLyB9CgkJCQl0eXBlOiAndGltZScsCgkJCQlheGlzVGljazogewoJCQkJCXNob3c6IGZhbHNlCgkJCQl9LAoJCQkJc3BsaXRMaW5lOiB7CgkJCQkJc2hvdzogZmFsc2UKCQkJCX0sCgkJCQlheGlzTGFiZWw6IHsKCQkJCQlzaG93OiBmYWxzZQoJCQkJfSwKCQkJfSwKCQkJeUF4aXM6IHsKCQkJCXR5cGU6ICd2YWx1ZScsCgkJCQlib3VuZGFyeUdhcDogWzAsICcxMDAlJ10sCgkJCQlzcGxpdExpbmU6IHsKCQkJCQlzaG93OiBmYWxzZQoJCQkJfSwKCQkJCWF4aXNMaW5lOiB7CgkJCQkJc2hvdzogdHJ1ZQoJCQkJfQoJCQl9LAoJCQlzZXJpZXM6IFt7CgkJCQluYW1lOiAn5qih5ouf5pWw5o2uJywKCQkJCXR5cGU6ICdsaW5lJywKCQkJCXNob3dTeW1ib2w6IGZhbHNlLAoJCQkJaG92ZXJBbmltYXRpb246IGZhbHNlLAoJCQkJZGF0YTogZGF0YQoJCQl9XQoJCX07CgkJLy8gb3B0aW9uICYmIG15Q2hhcnQuc2V0T3B0aW9uKG9wdGlvbik7CgkJLy/kuqflk4HliJfooajojrflj5YKCQl2YXIgUHJvZHVjdGlvbnNVUkwgPSAiaHR0cHM6Ly9zaXRlLm1hcGxlLnRvZGF5L0lPVHBsYXRmb3JtL1NlcnZlck1haW4iCgkJdmFyIFByb2R1Y3Rpb25zRGF0YSA9IHsKCQkJInJlcXVlc3RDb2RlIjogIjAwNSIsCgkJCSJ1c2VyX2lkIjogdXNlcl9pZCwKCQkJInRva2VuIjogdG9rZW4sCgkJCSJjb21wYW55X2lkIjogY29tcGFueV9pZCwgLy/mtYvor5XkuLox77yM5L2/55So5piv5Li6Y29tcGFueV9pZAoJCX0KCQkvLyBjb25zb2xlLmxvZyhRcy5zdHJpbmdpZnkoUHJvZHVjdGlvbnNEYXRhKSk7CgkJdmFyIEFYSU9TID0gYXhpb3MuY3JlYXRlKHsKCQkJaGVhZGVyczogewoJCQkJJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnCgkJCX0KCQl9KTsKCQl2YXIgX3RoaXMgPSB0aGlzOwoKCQlfdGhpcy5EYXRhTGlzdCA9IHsKCQkJY29tcGFueV9pZDogY29tcGFueV9pZCwgLy/mtYvor5XkuLox77yM5L2/55So5piv5Li6Y29tcGFueV9pZAoJCQlwcm9kdWN0X2xpc3Q6IFtdLAoJCX0KCgkJQVhJT1MucG9zdChQcm9kdWN0aW9uc1VSTCwgUXMuc3RyaW5naWZ5KFByb2R1Y3Rpb25zRGF0YSkpCgkJCS50aGVuKHJlcyA9PiB7CgkJCQljb25zb2xlLmxvZygi5Lqn5ZOB5YiX6KGoIiwgcmVzLmRhdGEuZGF0YSkKCQkJCV90aGlzLlByb2R1Y3Rpb25zSW5mb3IgPSByZXMuZGF0YS5kYXRhCgoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpcy5Qcm9kdWN0aW9uc0luZm9yLmxlbmd0aDsgaSsrKSB7IC8vZGF0YV9mb3JtYXTorrDlvZUKCQkJCQl2YXIgZm9ybWF0X2FyciA9IFtdCgkJCQkJZm9yICh2YXIgaiA9IDA7IGogPCBfdGhpcy5Qcm9kdWN0aW9uc0luZm9yW2ldLmRhdGFfZm9ybWF0Lmxlbmd0aDsgaisrKSB7CgkJCQkJCWZvcm1hdF9hcnIucHVzaCh7CgkJCQkJCQluYW1lOiBfdGhpcy5Qcm9kdWN0aW9uc0luZm9yW2ldLmRhdGFfZm9ybWF0W2pdLm5hbWUsCgkJCQkJCQl1bml0OiBfdGhpcy5Qcm9kdWN0aW9uc0luZm9yW2ldLmRhdGFfZm9ybWF0W2pdLnVuaXQsCgkJCQkJCX0pCgkJCQkJfQoJCQkJCS8vIGNvbnNvbGUubG9nKCJwdXNoIixmb3JtYXRfYXJyKQoJCQkJCV90aGlzLkRhdGFMaXN0LnByb2R1Y3RfbGlzdC5wdXNoKHsKCQkJCQkJcHJvZHVjdF9pZDogX3RoaXMuUHJvZHVjdGlvbnNJbmZvcltpXS5wcm9kdWN0X2lkLAoJCQkJCQlkYXRhX2Zvcm1hdDogZm9ybWF0X2FyciwKCQkJCQkJZGV2aWNlX2xpc3Q6IFtdCgkJCQkJfSkKCQkJCX0KCQkJCS8vIGNvbnNvbGUubG9nKCJwdXNoIixfdGhpcy5EYXRhTGlzdCkKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMuUHJvZHVjdGlvbnNJbmZvci5sZW5ndGg7IGkrKykgewoJCQkJCXZhciBEZXZpY2VVUkwgPSAiaHR0cHM6Ly9zaXRlLm1hcGxlLnRvZGF5L0lPVHBsYXRmb3JtL1NlcnZlck1haW4iCgkJCQkJdmFyIERldmljZURhdGEgPSB7CgkJCQkJCSJyZXF1ZXN0Q29kZSI6ICIwMjUiLAoJCQkJCQkidXNlcl9pZCI6IHVzZXJfaWQsCgkJCQkJCSJ0b2tlbiI6IHRva2VuLAoJCQkJCQkiY29tcGFueV9pZCI6IGNvbXBhbnlfaWQsIC8v5rWL6K+V5Li6Me+8jOS9v+eUqOaYr+S4umNvbXBhbnlfaWQKCQkJCQkJInByb2R1Y3RfaWQiOiBfdGhpcy5Qcm9kdWN0aW9uc0luZm9yW2ldLnByb2R1Y3RfaWQsCgkJCQkJfQoJCQkJCS8vIGNvbnNvbGUubG9nKFFzLnN0cmluZ2lmeShEZXZpY2VEYXRhKSk7CgkJCQkJQVhJT1MucG9zdChEZXZpY2VVUkwsIFFzLnN0cmluZ2lmeShEZXZpY2VEYXRhKSkgLy/orr7lpIfliJfooajojrflj5YKCQkJCQkJLnRoZW4ocmVzID0+IHsKCQkJCQkJCWNvbnNvbGUubG9nKCLorr7lpIfliJfooagiLCByZXMpCgkJCQkJCQl2YXIgY29uZmlnX2RhdGFfcHJvZHVjdF9pZCA9IFFzLnBhcnNlKHJlcy5jb25maWcuZGF0YSkucHJvZHVjdF9pZCAvL+iOt+WPluWvueW6lOW+l3Byb2R1Y3RfaWQKCgkJCQkJCQkvLyBjb25zb2xlLmxvZygiY29uZmlnX2RhdGEiLGNvbmZpZ19kYXRhKQoJCQkJCQkJLy8gRGV2aWNlSW5mb3IgPSByZXMuZGF0YQoJCQkJCQkJX3RoaXMuRGV2aWNlSW5mb3IgPSByZXMuZGF0YS5kYXRhOwoJCQkJCQkJLy/mn6Xor6Lov5nns7vliJdkZXZpY2XmmK/lk6rkuKpwcm9kdWN0X2lk55qECgkJCQkJCQl2YXIgcHJvZHVjdF9pZF9jb2wgPSBudW1iZXI7CgkJCQkJCQlmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzLkRhdGFMaXN0LnByb2R1Y3RfbGlzdC5sZW5ndGg7IGkrKykgewoJCQkJCQkJCWlmIChfdGhpcy5EYXRhTGlzdC5wcm9kdWN0X2xpc3RbaV0ucHJvZHVjdF9pZCA9PT0gY29uZmlnX2RhdGFfcHJvZHVjdF9pZCkgewoJCQkJCQkJCQlwcm9kdWN0X2lkX2NvbCA9IGk7CgkJCQkJCQkJCWJyZWFrOwoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJCS8vIGNvbnNvbGUubG9nKCJwcm9kdWN0X2lkX2NvbCIscHJvZHVjdF9pZF9jb2wpCgoJCQkJCQkJZm9yICh2YXIgaiA9IDA7IGogPCBfdGhpcy5EZXZpY2VJbmZvci5sZW5ndGg7IGorKykgewoJCQkJCQkJCS8v6I635Y+WZGV2aWNlX2lk77yM6YCa6L+HY29uZmln5b6XcHJvZHVjdF9pZOWKoOWFpWRldmljZV9saXN0CgkJCQkJCQkJX3RoaXMuRGF0YUxpc3QucHJvZHVjdF9saXN0W3Byb2R1Y3RfaWRfY29sXS5kZXZpY2VfbGlzdC5wdXNoKHsKCQkJCQkJCQkJZGV2aWNlX2lkOiBfdGhpcy5EZXZpY2VJbmZvcltqXS5zZW5zb3JfaWQsCgkJCQkJCQkJCWRhdGE6IFtdCgkJCQkJCQkJfSkKCQkJCQkJCQkvLyBjb25zb2xlLmxvZygicHVzaCIsX3RoaXMuRGF0YUxpc3QpCgoJCQkJCQkJCXZhciB1cmwgPSAnaHR0cHM6Ly9zaXRlLm1hcGxlLnRvZGF5L0lPVHBsYXRmb3JtL1NlcnZlck1haW4nOwoJCQkJCQkJCWxldCBwb3N0ZGF0YSA9IHsKCQkJCQkJCQkJInJlcXVlc3RDb2RlIjogIjAyNyIsCgkJCQkJCQkJCSJ1c2VyX2lkIjogdXNlcl9pZCwKCQkJCQkJCQkJInRva2VuIjogdG9rZW4sCgkJCQkJCQkJCSJjb21wYW55X2lkIjogY29tcGFueV9pZCwKCQkJCQkJCQkJImRldmljZV9pZCI6IF90aGlzLkRldmljZUluZm9yW2pdLnNlbnNvcl9pZAoJCQkJCQkJCX07CgkJCQkJCQkJLy8gY29uc29sZS5sb2coUXMuc3RyaW5naWZ5KHBvc3RkYXRhKSkKCQkJCQkJCQlBWElPUy5wb3N0KHVybCwgUXMuc3RyaW5naWZ5KHBvc3RkYXRhKSkgLy/orr7lpIflsZ7mgKfojrflj5YKCQkJCQkJCQkJLnRoZW4ocmVzID0+IHsKCQkJCQkJCQkJCWNvbnNvbGUubG9nKCLorr7lpIflsZ7mgKfvvJoiLCByZXMuZGF0YS5kYXRhKQoJCQkJCQkJCQkJdmFyIHRlbXAgPSByZXMuZGF0YS5kYXRhCgoJCQkJCQkJCQkJdmFyIGRldmljZV9pZCA9IFFzLnBhcnNlKHJlcy5jb25maWcuZGF0YSkuZGV2aWNlX2lkCgoJCQkJCQkJCQkJdmFyIHRlbXBhcnIgPSBbXTsKCQkJCQkJCQkJCXZhciBuYW1lZGF0YSA9IFtdOwoJCQkJCQkJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpcy5EYXRhTGlzdC5wcm9kdWN0X2xpc3QubGVuZ3RoOyBpKyspIHsKCQkJCQkJCQkJCQlmb3IgKHZhciBqID0gMDsgaiA8IF90aGlzLkRhdGFMaXN0LnByb2R1Y3RfbGlzdFtpXS5kZXZpY2VfbGlzdAoJCQkJCQkJCQkJCQkubGVuZ3RoOyBqKyspIHsKCQkJCQkJCQkJCQkJaWYgKF90aGlzLkRhdGFMaXN0LnByb2R1Y3RfbGlzdFtpXS5kZXZpY2VfbGlzdFtqXQoJCQkJCQkJCQkJCQkJLmRldmljZV9pZCA9PT0gZGV2aWNlX2lkKSB7CgkJCQkJCQkJCQkJCQlmb3IgKHZhciBrID0gMDsgayA8IF90aGlzLkRhdGFMaXN0LnByb2R1Y3RfbGlzdFtpXQoJCQkJCQkJCQkJCQkJCS5kYXRhX2Zvcm1hdC5sZW5ndGg7IGsrKykgewoJCQkJCQkJCQkJCQkJCXRlbXBhcnIucHVzaChbXSkKCQkJCQkJCQkJCQkJCQluYW1lZGF0YS5wdXNoKF90aGlzLkRhdGFMaXN0LnByb2R1Y3RfbGlzdFtpXQoJCQkJCQkJCQkJCQkJCQkuZGF0YV9mb3JtYXRba10ubmFtZSkKCQkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCX0KCgkJCQkJCQkJCQlmb3IgKHZhciBrID0gMDsgayA8IHRlbXAubGVuZ3RoOyBrKyspIHsKCgkJCQkJCQkJCQkJLy8gY29uc29sZS5sb2coZXZhbCgnKCcgKyB0ZW1wW2tdLmRhdGEgKyAnKScpKQoJCQkJCQkJCQkJCXZhciB0aW1lID0gdGVtcFtrXS50aW1lIC8v5pe26Ze0CgkJCQkJCQkJCQkJLy90aW1lIOWPmOaNogoJCQkJCQkJCQkJCS8vIHRpbWUgPSB0aW1lLnJlcGxhY2UoLy0vZywgJy8nKQoJCQkJCQkJCQkJCS8vIGNvbnNvbGUubG9nKHRpbWUpCgkJCQkJCQkJCQkJdmFyIGFyciA9IGV2YWwoJygnICsgdGVtcFtrXS5kYXRhICsgJyknKSAvL+aVsOaNrgoJCQkJCQkJCQkJCWlmIChhcnIubGVuZ3RoICE9PSBuYW1lZGF0YS5sZW5ndGgpIHsKCQkJCQkJCQkJCQkJY29udGludWU7CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJCWZvciAodmFyIGwgPSAwOyBsIDwgYXJyLmxlbmd0aDsgbCsrKSB7CgkJCQkJCQkJCQkJCXZhciB0ZW1wX2RhdGEgPSB7CgkJCQkJCQkJCQkJCQluYW1lOiB0aW1lLAoJCQkJCQkJCQkJCQkJdmFsdWU6IFt0aW1lLCBhcnJbbF1dCgkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQkJdGVtcGFycltsXS5wdXNoKHRlbXBfZGF0YSkKCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9IC8vMWRldmljZSBpbmZvcgoJCQkJCQkJCQkJLy8gY29uc29sZS5sb2coInB1c2giLHRlbXBhcnIpCgkJCQkJCQkJCQlmb3IgKHZhciBpID0gMDsgaSA8IHRlbXBhcnIubGVuZ3RoOyBpKyspIHsKCQkJCQkJCQkJCQl0ZW1wYXJyW2ldLnNvcnQoY29tcGFyZSkKCQkJCQkJCQkJCX0KCQkJCQkJCQkJCS8vIGNvbnNvbGUubG9nKCJwdXNoIix0ZW1wYXJyKQoJCQkJCQkJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpcy5EYXRhTGlzdC5wcm9kdWN0X2xpc3QubGVuZ3RoOyBpKyspIHsKCQkJCQkJCQkJCQlmb3IgKHZhciBqID0gMDsgaiA8IF90aGlzLkRhdGFMaXN0LnByb2R1Y3RfbGlzdFtpXS5kZXZpY2VfbGlzdAoJCQkJCQkJCQkJCQkubGVuZ3RoOyBqKyspIHsKCQkJCQkJCQkJCQkJaWYgKF90aGlzLkRhdGFMaXN0LnByb2R1Y3RfbGlzdFtpXS5kZXZpY2VfbGlzdFtqXQoJCQkJCQkJCQkJCQkJLmRldmljZV9pZCA9PT0gZGV2aWNlX2lkKSB7CgkJCQkJCQkJCQkJCQlfdGhpcy5EYXRhTGlzdC5wcm9kdWN0X2xpc3RbaV0uZGV2aWNlX2xpc3Rbal0uZGF0YSA9CgkJCQkJCQkJCQkJCQkJdGVtcGFycgoJCQkJCQkJCQkJCQkJLy8gY29uc29sZS5sb2coImV4Y2hhbmdlISEhIix0ZW1wYXJyKQoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJfQoJCQkJCQkJCQkJfQoKCQkJCQkJCQkJCWNvbnNvbGUubG9nKCJfdGhpcy5EYXRhTGlzdCIsIF90aGlzLkRhdGFMaXN0KQoKCQkJCQkJCQkJCXZhciBtYWluZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikKCQkJCQkJCQkJCW1haW5kaXYuaWQgPSAiZGV2aWNlXyIgKyBkZXZpY2VfaWQKCQkJCQkJCQkJCW1haW5kaXYuc3R5bGUgPSAid2lkdGg6IDEyMDBweDtoZWlnaHQ6IDQwMHB4OyIKCQkJCQkJCQkJCWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJib3giKS5hcHBlbmRDaGlsZChtYWluZGl2KSAvL+WIm+W7uuiuvuWkh+eahOWbvuihqOebkuWtkAoJCQkJCQkJCQkJdmFyIGNkb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgoImRldmljZV8iICsgZGV2aWNlX2lkKSk7CgkJCQkJCQkJCQl2YXIgbXljaGFydCA9IGVjaGFydHMuaW5pdChjZG9tKTsKCgkJCQkJCQkJCQkvL+aehOW7unNlcmllc0RhdGEKCQkJCQkJCQkJCXZhciBzZXJpZXNEYXRhID0gW10KCQkJCQkJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgbmFtZWRhdGEubGVuZ3RoOyBpKyspIHsKCQkJCQkJCQkJCQlzZXJpZXNEYXRhLnB1c2goewoJCQkJCQkJCQkJCQluYW1lOiBuYW1lZGF0YVtpXSwKCQkJCQkJCQkJCQkJdHlwZTogJ2xpbmUnLAoJCQkJCQkJCQkJCQlzaG93U3ltYm9sOiBmYWxzZSwKCQkJCQkJCQkJCQkJaG92ZXJBbmltYXRpb246IGZhbHNlLAoJCQkJCQkJCQkJCQlkYXRhOiB0ZW1wYXJyW2ldCgkJCQkJCQkJCQkJfSkKCQkJCQkJCQkJCX0KCgkJCQkJCQkJCQl2YXIgb3B0aW9udGVtcCA9IHsKCQkJCQkJCQkJCQl0aXRsZTogewoJCQkJCQkJCQkJCQl0ZXh0OiAiZGV2aWNlXyIgKyBkZXZpY2VfaWQKCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCWxlZ2VuZDogewoJCQkJCQkJCQkJCQlkYXRhOiBuYW1lZGF0YQoJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJdG9vbHRpcDogewoJCQkJCQkJCQkJCQl0cmlnZ2VyOiAnYXhpcycsCgkJCQkJCQkJCQkJCWZvcm1hdHRlcjogZnVuY3Rpb24ocGFyYW1zKSB7CgkJCQkJCQkJCQkJCQlwYXJhbXMgPSBwYXJhbXNbMF07CgkJCQkJCQkJCQkJCQlyZXR1cm4gcGFyYW1zLm5hbWUgKyAnIFZhbHVlOiAnICsgcGFyYW1zLnZhbHVlWwoJCQkJCQkJCQkJCQkJCTFdOwoJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCQlheGlzUG9pbnRlcjogewoJCQkJCQkJCQkJCQkJYW5pbWF0aW9uOiBmYWxzZQoJCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQkvLyB0b29sYm94OiB7CgkJCQkJCQkJCQkJLy8gICAgIHNob3cgOiB0cnVlLAoJCQkJCQkJCQkJCS8vICAgICBmZWF0dXJlIDogewoJCQkJCQkJCQkJCS8vICAgICAgICAgbWFyayA6IHtzaG93OiB0cnVlfSwKCQkJCQkJCQkJCQkvLyAgICAgICAgIGRhdGFWaWV3IDoge3Nob3c6IHRydWUsIHJlYWRPbmx5OiBmYWxzZX0sCgkJCQkJCQkJCQkJLy8gICAgICAgICBtYWdpY1R5cGUgOiB7c2hvdzogdHJ1ZSwgdHlwZTogWydsaW5lJywgJ2JhcicsICdzdGFjaycsICd0aWxlZCddfSwKCQkJCQkJCQkJCQkvLyAgICAgICAgIHJlc3RvcmUgOiB7c2hvdzogdHJ1ZX0sCgkJCQkJCQkJCQkJLy8gICAgICAgICBzYXZlQXNJbWFnZSA6IHtzaG93OiB0cnVlfQoJCQkJCQkJCQkJCS8vICAgICB9CgkJCQkJCQkJCQkJLy8gfSwKCQkJCQkJCQkJCQkvLyBjYWxjdWxhYmxlIDogdHJ1ZSwKCQkJCQkJCQkJCQl4QXhpczogewoJCQkJCQkJCQkJCQkvLyB0eXBlOiAndGltZScsCgkJCQkJCQkJCQkJCS8vIHNwbGl0TnVtYmVyOiAzMCwKCQkJCQkJCQkJCQkJLy8gc3BsaXRMaW5lOiB7CgkJCQkJCQkJCQkJCS8vIAlzaG93OiBmYWxzZQoJCQkJCQkJCQkJCQkvLyB9CgkJCQkJCQkJCQkJCXR5cGU6ICd0aW1lJywKCQkJCQkJCQkJCQkJYXhpc1RpY2s6IHsKCQkJCQkJCQkJCQkJCXNob3c6IGZhbHNlCgkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCXNwbGl0TGluZTogewoJCQkJCQkJCQkJCQkJc2hvdzogZmFsc2UKCQkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQkJYXhpc0xhYmVsOiB7CgkJCQkJCQkJCQkJCQlzaG93OiBmYWxzZQoJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJeUF4aXM6IHsKCQkJCQkJCQkJCQkJdHlwZTogJ3ZhbHVlJywKCQkJCQkJCQkJCQkJYm91bmRhcnlHYXA6IFswLCAnMTAwJSddLAoJCQkJCQkJCQkJCQlzcGxpdExpbmU6IHsKCQkJCQkJCQkJCQkJCXNob3c6IGZhbHNlCgkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCWF4aXNMaW5lOiB7CgkJCQkJCQkJCQkJCQlzaG93OiB0cnVlCgkJCQkJCQkJCQkJCX0KCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCXNlcmllczogc2VyaWVzRGF0YQoJCQkJCQkJCQkJfTsKCQkJCQkJCQkJCW9wdGlvbnRlbXAgJiYgbXljaGFydC5zZXRPcHRpb24ob3B0aW9udGVtcCk7CgkJCQkJCQkJCX0pCgkJCQkJCQkJCS5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZyhlcnJvcikpOwoKCQkJCQkJCX0KCQkJCQkJfSkKCQkJCQkJLmNhdGNoKGVycm9yID0+IGNvbnNvbGUubG9nKGVycm9yKSk7CgkJCQl9CgkJCX0pCgkJCS5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZyhlcnJvcikpOwoKCQl0aGlzLmNsaWVudC5vbignbWVzc2FnZScsIGZ1bmN0aW9uKHRvcGljLCBwYXlsb2FkKSB7CgkJCXZhciByZXF1ZXN0SWQgPSB0b3BpYy5zbGljZSgndXBkYXRlLzEvIycubGVuZ3RoKSwKCQkJCW1lc3NhZ2VEYXRhID0gSlNPTi5wYXJzZShwYXlsb2FkLnRvU3RyaW5nKCkpOwoJCQljb25zb2xlLmxvZygnbWVzc2FnZURhdGE6JywgbWVzc2FnZURhdGEpCgoJCQlub3cgPSBuZXcgRGF0ZSgpOwoJCQl2YWx1ZSA9IG1lc3NhZ2VEYXRhLmRhdGFfdXBsb2FkOyAvL2EgYXJyYXkKCQkJdmFyIG1xdHR0aW1lID0gbm93LmdldEZ1bGxZZWFyKCkgKyAnLScgKyAobm93LmdldE1vbnRoKCkgKyAxKSArICctJyArIG5vdy5nZXREYXRlKCkgKyAnICcgKwoJCQkJKG5vdy5nZXRIb3VycygpID49IDEwID8gbm93LmdldEhvdXJzKCkgOiAnMCcgKyBub3cuZ2V0SG91cnMoKSkgKyAnOicgKwoJCQkJKG5vdy5nZXRNaW51dGVzKCkgPj0gMTAgPyBub3cuZ2V0TWludXRlcygpIDogJzAnICsgbm93LmdldE1pbnV0ZXMoKSkgKyAnOicgKwoJCQkJKG5vdy5nZXRTZWNvbmRzKCkgPj0gMTAgPyBub3cuZ2V0U2Vjb25kcygpIDogJzAnICsgbm93LmdldFNlY29uZHMoKSk7CgoJCQl2YXIgbWVzc19zZW5zb3JpZCA9IG1lc3NhZ2VEYXRhLnNlbnNvcl9pZDsKCQkJdmFyIGlfaW5kZXggPSAwLAoJCQkJal9pbmRleCA9IDA7CgkJCWZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMuRGF0YUxpc3QucHJvZHVjdF9saXN0Lmxlbmd0aDsgaSsrKSB7CgkJCQlmb3IgKHZhciBqID0gMDsgaiA8IF90aGlzLkRhdGFMaXN0LnByb2R1Y3RfbGlzdFtpXS5kZXZpY2VfbGlzdC5sZW5ndGg7IGorKykgewoJCQkJCWlmIChfdGhpcy5EYXRhTGlzdC5wcm9kdWN0X2xpc3RbaV0uZGV2aWNlX2xpc3Rbal0uZGV2aWNlX2lkID09IG1lc3Nfc2Vuc29yaWQpIHsKCQkJCQkJaV9pbmRleCA9IGk7CgkJCQkJCWpfaW5kZXggPSBqOwoJCQkJCQlicmVhazsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCXZhciBuYW1lZGF0YSA9IFtdCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgX3RoaXMuRGF0YUxpc3QucHJvZHVjdF9saXN0W2lfaW5kZXhdLmRhdGFfZm9ybWF0Lmxlbmd0aDsgaSsrKSB7CgkJCQluYW1lZGF0YS5wdXNoKF90aGlzLkRhdGFMaXN0LnByb2R1Y3RfbGlzdFtpX2luZGV4XS5kYXRhX2Zvcm1hdFtpXSkKCQkJfQoKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7IGkrKykgewoJCQkJdmFyIHRlbXBfZGF0YSA9IHsKCQkJCQluYW1lOiBtcXR0dGltZSwKCQkJCQl2YWx1ZTogW21xdHR0aW1lLCB2YWx1ZVtpXV0KCQkJCX0KCQkJCV90aGlzLkRhdGFMaXN0LnByb2R1Y3RfbGlzdFtpX2luZGV4XS5kZXZpY2VfbGlzdFtqX2luZGV4XS5kYXRhW2ldLnB1c2godGVtcF9kYXRhKQoJCQkJX3RoaXMuRGF0YUxpc3QucHJvZHVjdF9saXN0W2lfaW5kZXhdLmRldmljZV9saXN0W2pfaW5kZXhdLmRhdGFbaV0uc29ydChjb21wYXJlKQoJCQl9CgoKCQkJdmFyIG1xdHRfZGV2aWNlX2lkID0gImRldmljZV8iICsgbWVzc19zZW5zb3JpZAoJCQl2YXIgZGV2aWNlX3RhZyA9IGZhbHNlCgkJCWZvciAodmFyIERldmljZWluZGV4ID0gMDsgRGV2aWNlaW5kZXggPCBfdGhpcy5EZXZpY2UubGVuZ3RoOyBEZXZpY2VpbmRleCsrKSB7CgkJCQlpZiAobXF0dF9kZXZpY2VfaWQgPT09IF90aGlzLkRldmljZVtEZXZpY2VpbmRleF0uZGV2aWNlX2lkKSB7CgkJCQkJZGV2aWNlX3RhZyA9IHRydWU7CgkJCQkJdmFyIENoYXJ0RG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoKCJkZXZpY2VfIiArIG1lc3Nfc2Vuc29yaWQpKTsKCQkJCQl2YXIgTXlDaGFydCA9IGVjaGFydHMuaW5pdChDaGFydERvbSk7CgkJCQkJdmFyIHNlcmllc0RhdGEgPSBbXQoJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgbmFtZWRhdGEubGVuZ3RoOyBpKyspIHsKCQkJCQkJc2VyaWVzRGF0YS5wdXNoKHsKCQkJCQkJCW5hbWU6IG5hbWVkYXRhW2ldLAoJCQkJCQkJdHlwZTogJ2xpbmUnLAoJCQkJCQkJc2hvd1N5bWJvbDogZmFsc2UsCgkJCQkJCQlob3ZlckFuaW1hdGlvbjogZmFsc2UsCgkJCQkJCQlkYXRhOiBfdGhpcy5EYXRhTGlzdC5wcm9kdWN0X2xpc3RbaV9pbmRleF0uZGV2aWNlX2xpc3Rbal9pbmRleF0uZGF0YVtpXQoJCQkJCQl9KQoJCQkJCX0KCQkJCQlvcHRpb24gPSB7CgkJCQkJCXRpdGxlOiB7CgkJCQkJCQl0ZXh0OiAiZGV2aWNlXyIgKyBtZXNzX3NlbnNvcmlkCgkJCQkJCX0sCgkJCQkJCWxlZ2VuZDogewoJCQkJCQkJZGF0YTogbmFtZWRhdGEKCQkJCQkJfSwKCQkJCQkJdG9vbHRpcDogewoJCQkJCQkJdHJpZ2dlcjogJ2F4aXMnLAoJCQkJCQkJZm9ybWF0dGVyOiBmdW5jdGlvbihwYXJhbXMpIHsKCQkJCQkJCQlwYXJhbXMgPSBwYXJhbXNbMF07CgkJCQkJCQkJcmV0dXJuIHBhcmFtcy5uYW1lICsgJyBWYWx1ZTogJyArIHBhcmFtcy52YWx1ZVsxXTsKCQkJCQkJCX0sCgkJCQkJCQlheGlzUG9pbnRlcjogewoJCQkJCQkJCWFuaW1hdGlvbjogZmFsc2UKCQkJCQkJCX0KCQkJCQkJfSwKCQkJCQkJLy8gdG9vbGJveDogewoJCQkJCQkvLyAgICAgc2hvdyA6IHRydWUsCgkJCQkJCS8vICAgICBmZWF0dXJlIDogewoJCQkJCQkvLyAgICAgICAgIG1hcmsgOiB7c2hvdzogdHJ1ZX0sCgkJCQkJCS8vICAgICAgICAgZGF0YVZpZXcgOiB7c2hvdzogdHJ1ZSwgcmVhZE9ubHk6IGZhbHNlfSwKCQkJCQkJLy8gICAgICAgICBtYWdpY1R5cGUgOiB7c2hvdzogdHJ1ZSwgdHlwZTogWydsaW5lJywgJ2JhcicsICdzdGFjaycsICd0aWxlZCddfSwKCQkJCQkJLy8gICAgICAgICByZXN0b3JlIDoge3Nob3c6IHRydWV9LAoJCQkJCQkvLyAgICAgICAgIHNhdmVBc0ltYWdlIDoge3Nob3c6IHRydWV9CgkJCQkJCS8vICAgICB9CgkJCQkJCS8vIH0sCgkJCQkJCS8vIGNhbGN1bGFibGUgOiB0cnVlLAoJCQkJCQl4QXhpczogewoJCQkJCQkJLy8gdHlwZTogJ3RpbWUnLAoJCQkJCQkJLy8gc3BsaXROdW1iZXI6IDMwLAoJCQkJCQkJLy8gc3BsaXRMaW5lOiB7CgkJCQkJCQkvLyAJc2hvdzogZmFsc2UKCQkJCQkJCS8vIH0KCQkJCQkJCXR5cGU6ICd0aW1lJywKCQkJCQkJCWF4aXNUaWNrOiB7CgkJCQkJCQkJc2hvdzogZmFsc2UKCQkJCQkJCX0sCgkJCQkJCQlzcGxpdExpbmU6IHsKCQkJCQkJCQlzaG93OiBmYWxzZQoJCQkJCQkJfSwKCQkJCQkJCWF4aXNMYWJlbDogewoJCQkJCQkJCXNob3c6IGZhbHNlCgkJCQkJCQl9LAoJCQkJCQl9LAoJCQkJCQl5QXhpczogewoJCQkJCQkJdHlwZTogJ3ZhbHVlJywKCQkJCQkJCWJvdW5kYXJ5R2FwOiBbMCwgJzEwMCUnXSwKCQkJCQkJCXNwbGl0TGluZTogewoJCQkJCQkJCXNob3c6IGZhbHNlCgkJCQkJCQl9LAoJCQkJCQkJYXhpc0xpbmU6IHsKCQkJCQkJCQlzaG93OiB0cnVlCgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJCXNlcmllczogc2VyaWVzRGF0YQoJCQkJCX07CgkJCQkJb3B0aW9uICYmIE15Q2hhcnQuc2V0T3B0aW9uKG9wdGlvbik7CgkJCQkJYnJlYWs7CgkJCQl9CgkJCX0KCQkJaWYgKGRldmljZV90YWcgPT09IGZhbHNlKSB7CgkJCQl2YXIgbmV3ZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikKCQkJCW5ld2Rpdi5pZCA9ICJkZXZpY2VfIiArIG1lc3Nfc2Vuc29yaWQKCQkJCW5ld2Rpdi5zdHlsZSA9ICJ3aWR0aDogMTIwMHB4O2hlaWdodDogNDAwcHg7IgoJCQkJZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJveCIpLmFwcGVuZENoaWxkKG5ld2RpdikgLy/liJvlu7rorr7lpIfnmoTlm77ooajnm5LlrZAKCQkJCXZhciBtcXR0Q2hhcnREb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgoImRldmljZV8iICsgbWVzc19zZW5zb3JpZCkpOwoJCQkJdmFyIG1xdHRNeUNoYXJ0ID0gZWNoYXJ0cy5pbml0KG1xdHRDaGFydERvbSk7IC8v5Yib5bu65paw55qEY2hhcnQKCgkJCQl2YXIgc2VyaWVzRGF0YSA9IFtdCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IG5hbWVkYXRhLmxlbmd0aDsgaSsrKSB7CgkJCQkJc2VyaWVzRGF0YS5wdXNoKHsKCQkJCQkJbmFtZTogbmFtZWRhdGFbaV0sCgkJCQkJCXR5cGU6ICdsaW5lJywKCQkJCQkJc2hvd1N5bWJvbDogZmFsc2UsCgkJCQkJCWhvdmVyQW5pbWF0aW9uOiBmYWxzZSwKCQkJCQkJZGF0YTogX3RoaXMuRGF0YUxpc3QucHJvZHVjdF9saXN0W2lfaW5kZXhdLmRldmljZV9saXN0W2pfaW5kZXhdLmRhdGFbaV0KCQkJCQl9KQoJCQkJfQoJCQkJdmFyIG1xdHRvcHRpb24gPSB7CgkJCQkJdGl0bGU6IHsKCQkJCQkJdGV4dDogImRldmljZV8iICsgbWVzc19zZW5zb3JpZAoJCQkJCX0sCgkJCQkJbGVnZW5kOiB7CgkJCQkJCWRhdGE6IG5hbWVkYXRhCgkJCQkJfSwKCQkJCQl0b29sdGlwOiB7CgkJCQkJCXRyaWdnZXI6ICdheGlzJywKCQkJCQkJZm9ybWF0dGVyOiBmdW5jdGlvbihwYXJhbXMpIHsKCQkJCQkJCXBhcmFtcyA9IHBhcmFtc1swXTsKCQkJCQkJCXJldHVybiBwYXJhbXMubmFtZSArICcgVmFsdWU6ICcgKyBwYXJhbXMudmFsdWVbMV07CgkJCQkJCX0sCgkJCQkJCWF4aXNQb2ludGVyOiB7CgkJCQkJCQlhbmltYXRpb246IGZhbHNlCgkJCQkJCX0KCQkJCQl9LAoJCQkJCS8vIHRvb2xib3g6IHsKCQkJCQkvLyAgICAgc2hvdyA6IHRydWUsCgkJCQkJLy8gICAgIGZlYXR1cmUgOiB7CgkJCQkJLy8gICAgICAgICBtYXJrIDoge3Nob3c6IHRydWV9LAoJCQkJCS8vICAgICAgICAgZGF0YVZpZXcgOiB7c2hvdzogdHJ1ZSwgcmVhZE9ubHk6IGZhbHNlfSwKCQkJCQkvLyAgICAgICAgIG1hZ2ljVHlwZSA6IHtzaG93OiB0cnVlLCB0eXBlOiBbJ2xpbmUnLCAnYmFyJywgJ3N0YWNrJywgJ3RpbGVkJ119LAoJCQkJCS8vICAgICAgICAgcmVzdG9yZSA6IHtzaG93OiB0cnVlfSwKCQkJCQkvLyAgICAgICAgIHNhdmVBc0ltYWdlIDoge3Nob3c6IHRydWV9CgkJCQkJLy8gICAgIH0KCQkJCQkvLyB9LAoJCQkJCS8vIGNhbGN1bGFibGUgOiB0cnVlLAoJCQkJCXhBeGlzOiB7CgkJCQkJCS8vIHR5cGU6ICd0aW1lJywKCQkJCQkJLy8gc3BsaXROdW1iZXI6IDMwLAoJCQkJCQkvLyBzcGxpdExpbmU6IHsKCQkJCQkJLy8gCXNob3c6IGZhbHNlCgkJCQkJCS8vIH0KCQkJCQkJdHlwZTogJ3RpbWUnLAoJCQkJCQlheGlzVGljazogewoJCQkJCQkJc2hvdzogZmFsc2UKCQkJCQkJfSwKCQkJCQkJc3BsaXRMaW5lOiB7CgkJCQkJCQlzaG93OiBmYWxzZQoJCQkJCQl9LAoJCQkJCQlheGlzTGFiZWw6IHsKCQkJCQkJCXNob3c6IGZhbHNlCgkJCQkJCX0sCgkJCQkJfSwKCQkJCQl5QXhpczogewoJCQkJCQl0eXBlOiAndmFsdWUnLAoJCQkJCQlib3VuZGFyeUdhcDogWzAsICcxMDAlJ10sCgkJCQkJCXNwbGl0TGluZTogewoJCQkJCQkJc2hvdzogZmFsc2UKCQkJCQkJfSwKCQkJCQkJYXhpc0xpbmU6IHsKCQkJCQkJCXNob3c6IHRydWUKCQkJCQkJfQoJCQkJCX0sCgkJCQkJc2VyaWVzOiBzZXJpZXNEYXRhCgkJCQl9OwoJCQkJbXF0dG9wdGlvbiAmJiBtcXR0TXlDaGFydC5zZXRPcHRpb24obXF0dG9wdGlvbik7CgkJCX0KCgoJCX0pOwoKCX0sCgltZXRob2RzOiB7CgoJfSwKCWJlZm9yZURlc3Ryb3koKSB7CgkJY29uc29sZS5sb2coImRlc3Ryb3llZCIpCgkJdGhpcy5jbGllbnQuZW5kKCk7Cgl9LAp9OwoKZnVuY3Rpb24gQ29tcGFyZURhdGUoZDEsIGQyKSB7CglyZXR1cm4gKCgobmV3IERhdGUoZDEucmVwbGFjZSgvLS9nLCAiLyIpKSkgPiAobmV3IERhdGUoZDIucmVwbGFjZSgvLS9nLCAiLyIpKSkpKTsKfQoKZnVuY3Rpb24gY29tcGFyZShvYmoxLCBvYmoyKSB7Cgl2YXIgZDEgPSBvYmoxLm5hbWU7Cgl2YXIgZDIgPSBvYmoyLm5hbWU7CglpZiAoKCgobmV3IERhdGUoZDEucmVwbGFjZSgvLS9nLCAiLyIpKSkgPiAobmV3IERhdGUoZDIucmVwbGFjZSgvLS9nLCAiLyIpKSkpKSkgewoJCXJldHVybiAtMTsKCX0gZWxzZSBpZiAoKCgobmV3IERhdGUoZDIucmVwbGFjZSgvLS9nLCAiLyIpKSkgPiAobmV3IERhdGUoZDEucmVwbGFjZSgvLS9nLCAiLyIpKSkpKSkgewoJCXJldHVybiAxOwoJfSBlbHNlIHsKCQlyZXR1cm4gMDsKCX0KfQo="},{"version":3,"sources":["ForeData.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ForeData.vue","sourceRoot":"src/views/MainViews/TimeData","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\" style=\"height: 4%;\">\r\n\t\t\t<el-breadcrumb-item>首页</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>时序数据库</el-breadcrumb-item>\r\n\t\t\t<el-breadcrumb-item>元数据</el-breadcrumb-item>\r\n\t\t</el-breadcrumb>\r\n\t\t<el-divider content-position=\"left\">元数据</el-divider>\r\n\t\t<el-empty description=\"系统管理员无法使用该功能\" v-if=\"this.isType3 === true\"></el-empty>\r\n\t\t<el-scrollbar style=\"height: 95%; width: 100%;\" v-if=\"this.isType3 === false\">\r\n\t\t\t<div id=\"box\">\r\n\t\t\t</div>\r\n\t\t</el-scrollbar>\r\n\r\n\t</div>\r\n</template>\r\n<script src=\"https://unpkg.com/mqtt/dist/mqtt.min.js\"></script>\r\n<script>\r\n\t// import mqtt from 'mqtt'\r\n\tconst mqtt = require('mqtt')\r\n\timport Cookie from 'js-cookie'\r\n\timport * as echarts from 'echarts'\r\n\timport axios from 'axios'\r\n\timport Qs from 'qs'\r\n\timport {\r\n\t\tnumber\r\n\t} from 'echarts'\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tProductionsInfor: [],\r\n\t\t\t\tDeviceInfor: [],\r\n\t\t\t\tDevice: [],\r\n\t\t\t\tisType3: false,\r\n\t\t\t\tDataList: {},\r\n\t\t\t\tproduct_list: [],\r\n\t\t\t\tdevice_list: [],\r\n\t\t\t\t// product_id:number,\r\n\t\t\t\t// device_id:number,\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tif (Cookie.get('modal') === '3') {\r\n\t\t\t\tconsole.log(\"检测到为系统管理员\")\r\n\t\t\t\tthis.isType3 = true\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"检测为普通用户\")\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t//mqtt\r\n\t\t\t// const user_id = Cookie.get('user_id')\r\n\t\t\tconst user_id = Cookie.get('user_id')\r\n\t\t\tconst token = Cookie.get('token')\r\n\t\t\tconst company_id = Cookie.get('company_id')\r\n\t\t\tconst password = Cookie.get('password')\r\n\t\t\tconst options = {\r\n\t\t\t\t// 超时时间\r\n\t\t\t\tconnectTimeout: 4000,\r\n\t\t\t\t// 认证信息\r\n\t\t\t\tclientId: user_id,\r\n\t\t\t\tusername: user_id,\r\n\t\t\t\tpassword: password, //未加密的password\r\n\t\t\t\t// 心跳时间\r\n\t\t\t\tkeepalive: 60,\r\n\t\t\t\tclean: true,\r\n\t\t\t}\r\n\t\t\t// WebSocket 连接字符串\r\n\t\t\t// const constWebSocket_URL='ws://localhost:8083/mqtt'\r\n\t\t\t// TCP/TLS 连接字符串，仅限 Node.js 环境\r\n\t\t\tconst TCP_URL = 'wss://mqtt.maple.today:8084/mqtt'\r\n\t\t\t// const TCP_TLS_URL ='mqtts://localhost:8883'\r\n\t\t\t// console.log(options)\r\n\t\t\tvar updatemess = \"update/\" + company_id + \"/#\";\r\n\t\t\tthis.client = mqtt.connect(TCP_URL, options)\r\n\t\t\tthis.client.on('connect', () => {\r\n\t\t\t\tconsole.log('连接成功')\r\n\t\t\t\tthis.client.subscribe(updatemess, (err) => {\r\n\t\t\t\t\tconsole.log(err || '订阅成功')\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\tthis.client.on('reconnect', (error) => {\r\n\t\t\t\tconsole.log('正在重连:', error)\r\n\t\t\t\tthis.client.end()\r\n\t\t\t\tCookie.remove(\"token\")\r\n\t\t\t\tlocation.reload();\r\n\t\t\t})\r\n\t\t\tthis.client.on('error', (error) => {\r\n\t\t\t\tconsole.log('连接失败:', error)\r\n\t\t\t})\r\n\t\t\t//时序数据库\r\n\t\t\tvar data = [];\r\n\t\t\tvar now = new Date();\r\n\t\t\t// var oneDay = 24 * 3600 * 1000;\r\n\t\t\tvar value;\r\n\t\t\tvar option = {\r\n\t\t\t\ttitle: {\r\n\t\t\t\t\ttext: '未连接'\r\n\t\t\t\t},\r\n\t\t\t\ttooltip: {\r\n\t\t\t\t\ttrigger: 'axis',\r\n\t\t\t\t\tformatter: function(params) {\r\n\t\t\t\t\t\tparams = params[0];\r\n\t\t\t\t\t\treturn params.name + ' Value: ' + params.value[1];\r\n\t\t\t\t\t},\r\n\t\t\t\t\taxisPointer: {\r\n\t\t\t\t\t\tanimation: false\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\txAxis: {\r\n\t\t\t\t\t// type: 'time',\r\n\t\t\t\t\tsplitNumber: 30,\r\n\t\t\t\t\t// splitLine: {\r\n\t\t\t\t\t// \tshow: false\r\n\t\t\t\t\t// }\r\n\t\t\t\t\ttype: 'time',\r\n\t\t\t\t\taxisTick: {\r\n\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsplitLine: {\r\n\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\taxisLabel: {\r\n\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tyAxis: {\r\n\t\t\t\t\ttype: 'value',\r\n\t\t\t\t\tboundaryGap: [0, '100%'],\r\n\t\t\t\t\tsplitLine: {\r\n\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\taxisLine: {\r\n\t\t\t\t\t\tshow: true\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tseries: [{\r\n\t\t\t\t\tname: '模拟数据',\r\n\t\t\t\t\ttype: 'line',\r\n\t\t\t\t\tshowSymbol: false,\r\n\t\t\t\t\thoverAnimation: false,\r\n\t\t\t\t\tdata: data\r\n\t\t\t\t}]\r\n\t\t\t};\r\n\t\t\t// option && myChart.setOption(option);\r\n\t\t\t//产品列表获取\r\n\t\t\tvar ProductionsURL = \"https://site.maple.today/IOTplatform/ServerMain\"\r\n\t\t\tvar ProductionsData = {\r\n\t\t\t\t\"requestCode\": \"005\",\r\n\t\t\t\t\"user_id\": user_id,\r\n\t\t\t\t\"token\": token,\r\n\t\t\t\t\"company_id\": company_id, //测试为1，使用是为company_id\r\n\t\t\t}\r\n\t\t\t// console.log(Qs.stringify(ProductionsData));\r\n\t\t\tvar AXIOS = axios.create({\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tvar _this = this;\r\n\r\n\t\t\t_this.DataList = {\r\n\t\t\t\tcompany_id: company_id, //测试为1，使用是为company_id\r\n\t\t\t\tproduct_list: [],\r\n\t\t\t}\r\n\r\n\t\t\tAXIOS.post(ProductionsURL, Qs.stringify(ProductionsData))\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tconsole.log(\"产品列表\", res.data.data)\r\n\t\t\t\t\t_this.ProductionsInfor = res.data.data\r\n\r\n\t\t\t\t\tfor (var i = 0; i < _this.ProductionsInfor.length; i++) { //data_format记录\r\n\t\t\t\t\t\tvar format_arr = []\r\n\t\t\t\t\t\tfor (var j = 0; j < _this.ProductionsInfor[i].data_format.length; j++) {\r\n\t\t\t\t\t\t\tformat_arr.push({\r\n\t\t\t\t\t\t\t\tname: _this.ProductionsInfor[i].data_format[j].name,\r\n\t\t\t\t\t\t\t\tunit: _this.ProductionsInfor[i].data_format[j].unit,\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// console.log(\"push\",format_arr)\r\n\t\t\t\t\t\t_this.DataList.product_list.push({\r\n\t\t\t\t\t\t\tproduct_id: _this.ProductionsInfor[i].product_id,\r\n\t\t\t\t\t\t\tdata_format: format_arr,\r\n\t\t\t\t\t\t\tdevice_list: []\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log(\"push\",_this.DataList)\r\n\t\t\t\t\tfor (var i = 0; i < _this.ProductionsInfor.length; i++) {\r\n\t\t\t\t\t\tvar DeviceURL = \"https://site.maple.today/IOTplatform/ServerMain\"\r\n\t\t\t\t\t\tvar DeviceData = {\r\n\t\t\t\t\t\t\t\"requestCode\": \"025\",\r\n\t\t\t\t\t\t\t\"user_id\": user_id,\r\n\t\t\t\t\t\t\t\"token\": token,\r\n\t\t\t\t\t\t\t\"company_id\": company_id, //测试为1，使用是为company_id\r\n\t\t\t\t\t\t\t\"product_id\": _this.ProductionsInfor[i].product_id,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// console.log(Qs.stringify(DeviceData));\r\n\t\t\t\t\t\tAXIOS.post(DeviceURL, Qs.stringify(DeviceData)) //设备列表获取\r\n\t\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\t\tconsole.log(\"设备列表\", res)\r\n\t\t\t\t\t\t\t\tvar config_data_product_id = Qs.parse(res.config.data).product_id //获取对应得product_id\r\n\r\n\t\t\t\t\t\t\t\t// console.log(\"config_data\",config_data)\r\n\t\t\t\t\t\t\t\t// DeviceInfor = res.data\r\n\t\t\t\t\t\t\t\t_this.DeviceInfor = res.data.data;\r\n\t\t\t\t\t\t\t\t//查询这系列device是哪个product_id的\r\n\t\t\t\t\t\t\t\tvar product_id_col = number;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < _this.DataList.product_list.length; i++) {\r\n\t\t\t\t\t\t\t\t\tif (_this.DataList.product_list[i].product_id === config_data_product_id) {\r\n\t\t\t\t\t\t\t\t\t\tproduct_id_col = i;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t// console.log(\"product_id_col\",product_id_col)\r\n\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < _this.DeviceInfor.length; j++) {\r\n\t\t\t\t\t\t\t\t\t//获取device_id，通过config得product_id加入device_list\r\n\t\t\t\t\t\t\t\t\t_this.DataList.product_list[product_id_col].device_list.push({\r\n\t\t\t\t\t\t\t\t\t\tdevice_id: _this.DeviceInfor[j].sensor_id,\r\n\t\t\t\t\t\t\t\t\t\tdata: []\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t// console.log(\"push\",_this.DataList)\r\n\r\n\t\t\t\t\t\t\t\t\tvar url = 'https://site.maple.today/IOTplatform/ServerMain';\r\n\t\t\t\t\t\t\t\t\tlet postdata = {\r\n\t\t\t\t\t\t\t\t\t\t\"requestCode\": \"027\",\r\n\t\t\t\t\t\t\t\t\t\t\"user_id\": user_id,\r\n\t\t\t\t\t\t\t\t\t\t\"token\": token,\r\n\t\t\t\t\t\t\t\t\t\t\"company_id\": company_id,\r\n\t\t\t\t\t\t\t\t\t\t\"device_id\": _this.DeviceInfor[j].sensor_id\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t// console.log(Qs.stringify(postdata))\r\n\t\t\t\t\t\t\t\t\tAXIOS.post(url, Qs.stringify(postdata)) //设备属性获取\r\n\t\t\t\t\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"设备属性：\", res.data.data)\r\n\t\t\t\t\t\t\t\t\t\t\tvar temp = res.data.data\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tvar device_id = Qs.parse(res.config.data).device_id\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tvar temparr = [];\r\n\t\t\t\t\t\t\t\t\t\t\tvar namedata = [];\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < _this.DataList.product_list.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < _this.DataList.product_list[i].device_list\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.length; j++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (_this.DataList.product_list[i].device_list[j]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.device_id === device_id) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (var k = 0; k < _this.DataList.product_list[i]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.data_format.length; k++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttemparr.push([])\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnamedata.push(_this.DataList.product_list[i]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.data_format[k].name)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var k = 0; k < temp.length; k++) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t// console.log(eval('(' + temp[k].data + ')'))\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar time = temp[k].time //时间\r\n\t\t\t\t\t\t\t\t\t\t\t\t//time 变换\r\n\t\t\t\t\t\t\t\t\t\t\t\t// time = time.replace(/-/g, '/')\r\n\t\t\t\t\t\t\t\t\t\t\t\t// console.log(time)\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar arr = eval('(' + temp[k].data + ')') //数据\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (arr.length !== namedata.length) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var l = 0; l < arr.length; l++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar temp_data = {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname: time,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: [time, arr[l]]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttemparr[l].push(temp_data)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t} //1device infor\r\n\t\t\t\t\t\t\t\t\t\t\t// console.log(\"push\",temparr)\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < temparr.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttemparr[i].sort(compare)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t// console.log(\"push\",temparr)\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < _this.DataList.product_list.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tfor (var j = 0; j < _this.DataList.product_list[i].device_list\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.length; j++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (_this.DataList.product_list[i].device_list[j]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.device_id === device_id) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t_this.DataList.product_list[i].device_list[j].data =\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttemparr\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// console.log(\"exchange!!!\",temparr)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"_this.DataList\", _this.DataList)\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tvar maindiv = document.createElement(\"div\")\r\n\t\t\t\t\t\t\t\t\t\t\tmaindiv.id = \"device_\" + device_id\r\n\t\t\t\t\t\t\t\t\t\t\tmaindiv.style = \"width: 1200px;height: 400px;\"\r\n\t\t\t\t\t\t\t\t\t\t\tdocument.getElementById(\"box\").appendChild(maindiv) //创建设备的图表盒子\r\n\t\t\t\t\t\t\t\t\t\t\tvar cdom = document.getElementById((\"device_\" + device_id));\r\n\t\t\t\t\t\t\t\t\t\t\tvar mychart = echarts.init(cdom);\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t//构建seriesData\r\n\t\t\t\t\t\t\t\t\t\t\tvar seriesData = []\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < namedata.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tseriesData.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: namedata[i],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'line',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowSymbol: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\thoverAnimation: false,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata: temparr[i]\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tvar optiontemp = {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: \"device_\" + device_id\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tlegend: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata: namedata\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttrigger: 'axis',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tformatter: function(params) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tparams = params[0];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn params.name + ' Value: ' + params.value[\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t1];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taxisPointer: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tanimation: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t// toolbox: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t//     show : true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t//     feature : {\r\n\t\t\t\t\t\t\t\t\t\t\t\t//         mark : {show: true},\r\n\t\t\t\t\t\t\t\t\t\t\t\t//         dataView : {show: true, readOnly: false},\r\n\t\t\t\t\t\t\t\t\t\t\t\t//         magicType : {show: true, type: ['line', 'bar', 'stack', 'tiled']},\r\n\t\t\t\t\t\t\t\t\t\t\t\t//         restore : {show: true},\r\n\t\t\t\t\t\t\t\t\t\t\t\t//         saveAsImage : {show: true}\r\n\t\t\t\t\t\t\t\t\t\t\t\t//     }\r\n\t\t\t\t\t\t\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t\t\t\t\t\t\t// calculable : true,\r\n\t\t\t\t\t\t\t\t\t\t\t\txAxis: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// type: 'time',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// splitNumber: 30,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// splitLine: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// \tshow: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'time',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taxisTick: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsplitLine: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taxisLabel: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tyAxis: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'value',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tboundaryGap: [0, '100%'],\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsplitLine: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taxisLine: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tshow: true\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t\t\tseries: seriesData\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t\toptiontemp && mychart.setOption(optiontemp);\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t.catch(error => console.log(error));\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch(error => console.log(error));\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => console.log(error));\r\n\r\n\t\t\tthis.client.on('message', function(topic, payload) {\r\n\t\t\t\tvar requestId = topic.slice('update/1/#'.length),\r\n\t\t\t\t\tmessageData = JSON.parse(payload.toString());\r\n\t\t\t\tconsole.log('messageData:', messageData)\r\n\r\n\t\t\t\tnow = new Date();\r\n\t\t\t\tvalue = messageData.data_upload; //a array\r\n\t\t\t\tvar mqtttime = now.getFullYear() + '-' + (now.getMonth() + 1) + '-' + now.getDate() + ' ' +\r\n\t\t\t\t\t(now.getHours() >= 10 ? now.getHours() : '0' + now.getHours()) + ':' +\r\n\t\t\t\t\t(now.getMinutes() >= 10 ? now.getMinutes() : '0' + now.getMinutes()) + ':' +\r\n\t\t\t\t\t(now.getSeconds() >= 10 ? now.getSeconds() : '0' + now.getSeconds());\r\n\r\n\t\t\t\tvar mess_sensorid = messageData.sensor_id;\r\n\t\t\t\tvar i_index = 0,\r\n\t\t\t\t\tj_index = 0;\r\n\t\t\t\tfor (var i = 0; i < _this.DataList.product_list.length; i++) {\r\n\t\t\t\t\tfor (var j = 0; j < _this.DataList.product_list[i].device_list.length; j++) {\r\n\t\t\t\t\t\tif (_this.DataList.product_list[i].device_list[j].device_id == mess_sensorid) {\r\n\t\t\t\t\t\t\ti_index = i;\r\n\t\t\t\t\t\t\tj_index = j;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar namedata = []\r\n\t\t\t\tfor (var i = 0; i < _this.DataList.product_list[i_index].data_format.length; i++) {\r\n\t\t\t\t\tnamedata.push(_this.DataList.product_list[i_index].data_format[i])\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\t\tvar temp_data = {\r\n\t\t\t\t\t\tname: mqtttime,\r\n\t\t\t\t\t\tvalue: [mqtttime, value[i]]\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this.DataList.product_list[i_index].device_list[j_index].data[i].push(temp_data)\r\n\t\t\t\t\t_this.DataList.product_list[i_index].device_list[j_index].data[i].sort(compare)\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tvar mqtt_device_id = \"device_\" + mess_sensorid\r\n\t\t\t\tvar device_tag = false\r\n\t\t\t\tfor (var Deviceindex = 0; Deviceindex < _this.Device.length; Deviceindex++) {\r\n\t\t\t\t\tif (mqtt_device_id === _this.Device[Deviceindex].device_id) {\r\n\t\t\t\t\t\tdevice_tag = true;\r\n\t\t\t\t\t\tvar ChartDom = document.getElementById((\"device_\" + mess_sensorid));\r\n\t\t\t\t\t\tvar MyChart = echarts.init(ChartDom);\r\n\t\t\t\t\t\tvar seriesData = []\r\n\t\t\t\t\t\tfor (var i = 0; i < namedata.length; i++) {\r\n\t\t\t\t\t\t\tseriesData.push({\r\n\t\t\t\t\t\t\t\tname: namedata[i],\r\n\t\t\t\t\t\t\t\ttype: 'line',\r\n\t\t\t\t\t\t\t\tshowSymbol: false,\r\n\t\t\t\t\t\t\t\thoverAnimation: false,\r\n\t\t\t\t\t\t\t\tdata: _this.DataList.product_list[i_index].device_list[j_index].data[i]\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\toption = {\r\n\t\t\t\t\t\t\ttitle: {\r\n\t\t\t\t\t\t\t\ttext: \"device_\" + mess_sensorid\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tlegend: {\r\n\t\t\t\t\t\t\t\tdata: namedata\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ttooltip: {\r\n\t\t\t\t\t\t\t\ttrigger: 'axis',\r\n\t\t\t\t\t\t\t\tformatter: function(params) {\r\n\t\t\t\t\t\t\t\t\tparams = params[0];\r\n\t\t\t\t\t\t\t\t\treturn params.name + ' Value: ' + params.value[1];\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\taxisPointer: {\r\n\t\t\t\t\t\t\t\t\tanimation: false\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t// toolbox: {\r\n\t\t\t\t\t\t\t//     show : true,\r\n\t\t\t\t\t\t\t//     feature : {\r\n\t\t\t\t\t\t\t//         mark : {show: true},\r\n\t\t\t\t\t\t\t//         dataView : {show: true, readOnly: false},\r\n\t\t\t\t\t\t\t//         magicType : {show: true, type: ['line', 'bar', 'stack', 'tiled']},\r\n\t\t\t\t\t\t\t//         restore : {show: true},\r\n\t\t\t\t\t\t\t//         saveAsImage : {show: true}\r\n\t\t\t\t\t\t\t//     }\r\n\t\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t\t// calculable : true,\r\n\t\t\t\t\t\t\txAxis: {\r\n\t\t\t\t\t\t\t\t// type: 'time',\r\n\t\t\t\t\t\t\t\t// splitNumber: 30,\r\n\t\t\t\t\t\t\t\t// splitLine: {\r\n\t\t\t\t\t\t\t\t// \tshow: false\r\n\t\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\t\ttype: 'time',\r\n\t\t\t\t\t\t\t\taxisTick: {\r\n\t\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsplitLine: {\r\n\t\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\taxisLabel: {\r\n\t\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tyAxis: {\r\n\t\t\t\t\t\t\t\ttype: 'value',\r\n\t\t\t\t\t\t\t\tboundaryGap: [0, '100%'],\r\n\t\t\t\t\t\t\t\tsplitLine: {\r\n\t\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\taxisLine: {\r\n\t\t\t\t\t\t\t\t\tshow: true\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tseries: seriesData\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\toption && MyChart.setOption(option);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (device_tag === false) {\r\n\t\t\t\t\tvar newdiv = document.createElement(\"div\")\r\n\t\t\t\t\tnewdiv.id = \"device_\" + mess_sensorid\r\n\t\t\t\t\tnewdiv.style = \"width: 1200px;height: 400px;\"\r\n\t\t\t\t\tdocument.getElementById(\"box\").appendChild(newdiv) //创建设备的图表盒子\r\n\t\t\t\t\tvar mqttChartDom = document.getElementById((\"device_\" + mess_sensorid));\r\n\t\t\t\t\tvar mqttMyChart = echarts.init(mqttChartDom); //创建新的chart\r\n\r\n\t\t\t\t\tvar seriesData = []\r\n\t\t\t\t\tfor (var i = 0; i < namedata.length; i++) {\r\n\t\t\t\t\t\tseriesData.push({\r\n\t\t\t\t\t\t\tname: namedata[i],\r\n\t\t\t\t\t\t\ttype: 'line',\r\n\t\t\t\t\t\t\tshowSymbol: false,\r\n\t\t\t\t\t\t\thoverAnimation: false,\r\n\t\t\t\t\t\t\tdata: _this.DataList.product_list[i_index].device_list[j_index].data[i]\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar mqttoption = {\r\n\t\t\t\t\t\ttitle: {\r\n\t\t\t\t\t\t\ttext: \"device_\" + mess_sensorid\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlegend: {\r\n\t\t\t\t\t\t\tdata: namedata\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\ttooltip: {\r\n\t\t\t\t\t\t\ttrigger: 'axis',\r\n\t\t\t\t\t\t\tformatter: function(params) {\r\n\t\t\t\t\t\t\t\tparams = params[0];\r\n\t\t\t\t\t\t\t\treturn params.name + ' Value: ' + params.value[1];\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\taxisPointer: {\r\n\t\t\t\t\t\t\t\tanimation: false\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t// toolbox: {\r\n\t\t\t\t\t\t//     show : true,\r\n\t\t\t\t\t\t//     feature : {\r\n\t\t\t\t\t\t//         mark : {show: true},\r\n\t\t\t\t\t\t//         dataView : {show: true, readOnly: false},\r\n\t\t\t\t\t\t//         magicType : {show: true, type: ['line', 'bar', 'stack', 'tiled']},\r\n\t\t\t\t\t\t//         restore : {show: true},\r\n\t\t\t\t\t\t//         saveAsImage : {show: true}\r\n\t\t\t\t\t\t//     }\r\n\t\t\t\t\t\t// },\r\n\t\t\t\t\t\t// calculable : true,\r\n\t\t\t\t\t\txAxis: {\r\n\t\t\t\t\t\t\t// type: 'time',\r\n\t\t\t\t\t\t\t// splitNumber: 30,\r\n\t\t\t\t\t\t\t// splitLine: {\r\n\t\t\t\t\t\t\t// \tshow: false\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\ttype: 'time',\r\n\t\t\t\t\t\t\taxisTick: {\r\n\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsplitLine: {\r\n\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\taxisLabel: {\r\n\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tyAxis: {\r\n\t\t\t\t\t\t\ttype: 'value',\r\n\t\t\t\t\t\t\tboundaryGap: [0, '100%'],\r\n\t\t\t\t\t\t\tsplitLine: {\r\n\t\t\t\t\t\t\t\tshow: false\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\taxisLine: {\r\n\t\t\t\t\t\t\t\tshow: true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tseries: seriesData\r\n\t\t\t\t\t};\r\n\t\t\t\t\tmqttoption && mqttMyChart.setOption(mqttoption);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t});\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\r\n\t\t},\r\n\t\tbeforeDestroy() {\r\n\t\t\tconsole.log(\"destroyed\")\r\n\t\t\tthis.client.end();\r\n\t\t},\r\n\t};\r\n\r\n\tfunction CompareDate(d1, d2) {\r\n\t\treturn (((new Date(d1.replace(/-/g, \"/\"))) > (new Date(d2.replace(/-/g, \"/\")))));\r\n\t}\r\n\r\n\tfunction compare(obj1, obj2) {\r\n\t\tvar d1 = obj1.name;\r\n\t\tvar d2 = obj2.name;\r\n\t\tif ((((new Date(d1.replace(/-/g, \"/\"))) > (new Date(d2.replace(/-/g, \"/\")))))) {\r\n\t\t\treturn -1;\r\n\t\t} else if ((((new Date(d2.replace(/-/g, \"/\"))) > (new Date(d1.replace(/-/g, \"/\")))))) {\r\n\t\t\treturn 1;\r\n\t\t} else {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n</script>\r\n<style>\r\n\t.ForeData {}\r\n</style>\n"]}]}