{"remainingRequest":"/Users/maple/Desktop/file/netplus/开发/IOT/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/maple/Desktop/file/netplus/开发/IOT/src/views/MainViews/DeviceMap.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/maple/Desktop/file/netplus/开发/IOT/src/views/MainViews/DeviceMap.vue","mtime":1629991330000},{"path":"/Users/maple/Desktop/file/netplus/开发/IOT/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maple/Desktop/file/netplus/开发/IOT/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/maple/Desktop/file/netplus/开发/IOT/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/maple/Desktop/file/netplus/开发/IOT/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/maple/Desktop/file/netplus/开发/IOT/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5EZXZpY2VNYXB7Cgl3aWR0aDogMTAwJTsKCWhlaWdodDogOTYlOwoJLyogYmFja2dyb3VuZC1jb2xvcjogYW50aXF1ZXdoaXRlOwoJYm9yZGVyOiBibGFjazsKCWJvcmRlci13aWR0aDogMXB4OwoJYm9yZGVyLXN0eWxlOiBzb2xpZDsgKi8KCWFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0KI2NvbnRhaW5lcjF7CgltYXJnaW4tdG9wOiAxMHB4OwoJd2lkdGg6IDk1JTsKCWhlaWdodDogODAlOwoJYm9yZGVyLXdpZHRoOiAycHg7Cn0KLlNob3d7Cgl3aWR0aDogOTMlOwoJaGVpZ2h0OiA5MyU7CgkvKiBib3JkZXI6IDIwcHggc29saWQgYW50aXF1ZXdoaXRlOyAqLwoJLyogYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsgKi8KCXBhZGRpbmctbGVmdDogNTBweDsKfQoud3JhcDN7CgkvKiBwYWRkaW5nLWxlZnQ6IDEwcHg7ICovCgl3aWR0aDogOTAlOwoJaGVpZ2h0OiAxNSU7CglkaXNwbGF5OiBmbGV4OwoJZmxleC1kaXJlY3Rpb246IHJvdzsKfQoucmVjdGFuZ2xlOSwucmVjdGFuZ2xlMTB7CgkvKiBmbGV4OjE7ICovCgkvKiB3aWR0aDogNjAlOyAqLwoJIC8qIGhlaWdodDogOyAqLwoJYm9yZGVyOnNvbGlkIDJweCAjREREREREOwoJbWFyZ2luLXRvcDogMjBweDsKCW1hcmdpbi1sZWZ0OiAyMHB4OwoJLyogcGFkZGluZy10b3A6IDE1cHg7ICovCglwYWRkaW5nLWxlZnQ6IDEwcHg7CglwYWRkaW5nLXJpZ2h0OiAxMHB4OwoJdGV4dC1hbGlnbjogY2VudGVyOwoJY29sb3I6ICM3NDc0NzQ7Cglmb250LXNpemU6IDIwcHg7CglkaXNwbGF5OiBmbGV4OwoJZmxleC1kaXJlY3Rpb246IHJvdzsKCWFsaWduLWl0ZW1zOiBjZW50ZXI7Cn0K"},{"version":3,"sources":["DeviceMap.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DeviceMap.vue","sourceRoot":"src/views/MainViews","sourcesContent":["<template>\n\t<div>\n\t\t<el-breadcrumb separator-class=\"el-icon-arrow-right\" style=\"height: 4%;\">\n\t\t  <el-breadcrumb-item>首页</el-breadcrumb-item>\n\t\t  <el-breadcrumb-item>设备地图</el-breadcrumb-item>\n\t\t</el-breadcrumb>\n\t\t<div class=\"DeviceMap\">\n\t\t\t<el-divider content-position=\"left\">设备地图(设备总数：{{devicenum}},  工厂总数：{{factorynum}})</el-divider>\n\t\t\t<div class=\"Show\">\n\t\t\t\t<!-- <div class=\"wrap3\">\n\t\t\t\t\t<div class=\"rectangle9\">设备总数：{{devicenum}}</div>\n\t\t\t\t\t<div class=\"rectangle10\">工厂总数：{{factorynum}}</div>\n\t\t\t\t</div> -->\n\t\t\t\t<div id=\"container1\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport { AMapManager } from 'vue-amap';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\n\n\texport default{\n\t\tname: 'DeviceMap',\n\t\tdata() {\n\t\t\treturn{\n\t\t\t\tdeviceList: [],\r\n\t\t\t\talldevice: [],\n\t\t\t\tcompanyList: [],\r\n\t\t\t\tmycompany: {},\n\t\t\t\tmap: '',\r\n\t\t\t\tinfoWindow: '',\n\t\t\t\tdevicenum: '',\n\t\t\t\tfactorynum: '',\r\n\t\t\t\tmarker: '',\r\n\t\t\t\ttoken: '',\r\n\t\t\t\tuserID: '',\r\n\t\t\t\tcompanyID: '',\r\n\t\t\t\tmodal: ''\n\t\t\t}\n\t\t},\n\t\tcreated(){\n\t\t\tthis.token = Cookies.get(\"token\");\n\t\t\tthis.userID = Cookies.get(\"user_id\");\n\t\t\tthis.companyID = Cookies.get(\"company_id\");\n\t\t\tthis.modal = Cookies.get(\"modal\");\r\n\t\t\tif(this.modal==='3'){\r\n\t\t\t\tthis.fetchData();\r\n\t\t\t}else{\r\n\t\t\t\tthis.fetchaData();\r\n\t\t\t}\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.loadmap();\r\n\t\t},\n\t\tmethods:{\n\t\t\tchangeTime(){\n\t\t\t    var that = this;\n\t\t\t    for(var i = 0;i < that.companyList.length;i++){\n\t\t\t     that.companyList[i].create_time = that.timestampToTime(that.companyList[i].create_time);\n\t\t\t    }\n\t\t\t   },\n\t\t\t   timestampToTime(timestamp) {\n\t\t\t        var date=new Date(parseInt(timestamp));\n\t\t\t               var year=date.getFullYear();\n\t\t\t               var mon = date.getMonth()+1;\n\t\t\t               var day = date.getDate();\n\t\t\t               var hours = date.getHours();\n\t\t\t               var minu = date.getMinutes();\n\t\t\t               var sec = date.getSeconds();\n\t\t\t       \n\t\t\t               return year+'/'+mon+'/'+day+' '+hours+':'+minu+':'+sec;\n\t\t\t   },\n\t\t\tloadmap(){\n\t\t\t\tvar that = this\n\t\t\t\tthis.map = new AMap.Map('container1', {\n\t\t\t\t\tcenter: [118.792221, 31.938254],\n\t\t\t\t\tzoom: 8\n\t\t\t\t});\n\t\t\t},\n\t\t\tfetchData(){\n\t\t\t\tvar that = this\n\t\t\t\taxios.get(\n\t\t\t\t\t\"https://site.maple.today/IOTplatform/ServerMain\",\n\t\t\t\t\t{\n\t\t\t\t\t\tparams:{\n\t\t\t\t\t\t\trequestCode: '011',\n\t\t\t\t\t\t\tuser_id: that.userID,\n\t\t\t\t\t\t\ttoken: that.token\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then(function(response){\n\t\t\t\t\t\tconsole.log(response.data);\n\t\t\t\t\t\tthat.companyList = response.data.data;\n\t\t\t\t\t\tthat.changeTime();\r\n\t\t\t\t\t\tthat.putCData();\r\n\t\t\t\t\t\tthat.fetchDData();\n\t\t\t\t\t})\n\t\t\t\t\t.catch(function(error){\n\t\t\t\t\t\tconsole.log(error);\n\t\t\t\t\t})\n\t\t\t},\r\n\t\t\tfetchDData(){\r\n\t\t\t\tvar that = this\r\n\t\t\t\taxios.get(\r\n\t\t\t\t\t\"https://site.maple.today/IOTplatform/ServerMain\",\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tparams:{\r\n\t\t\t\t\t\t\trequestCode: '019',\r\n\t\t\t\t\t\t\tuser_id: that.userID,\r\n\t\t\t\t\t\t\ttoken: that.token,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(function(response){\r\n\t\t\t\t\t\tconsole.log(response.data);\r\n\t\t\t\t\t\tthat.alldevice = response.data.data;\r\n\t\t\t\t\t\tthat.devicenum = that.alldevice.length;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error){\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t})\r\n\t\t\t},\n\t\t\tputCData(){\n\t\t\t\tvar that = this;\r\n\t\t\t\tthat.infoWindow = new AMap.InfoWindow({offset: new AMap.Pixel(0, -20)});\n\t\t\t\tfor(var i = 0; i < that.companyList.length; i++){\r\n\t\t\t\t\tvar content = [];\r\n\t\t\t\t\tcontent.push(\"<h4>\" + that.companyList[i].company_name + \"</h4>\");\r\n\t\t\t\t\tcontent.push(\"<p>公司ID:\" + that.companyList[i].company_id + \"</p>\");\r\n\t\t\t\t\tcontent.push(\"<p>创建时间:\" + that.companyList[i].create_time + \"</p>\");\r\n\t\t\t\t\t\n\t\t\t\t\tthat.marker =  new AMap.Marker({\n\t\t\t\t\t\tposition: new AMap.LngLat(that.companyList[i].longitude,that.companyList[i].latitude),\n\t\t\t\t\t\toffset: new AMap.Pixel(-10, -10),\n\t\t\t\t\t\ticon: new AMap.Icon({            \r\n\t\t\t\t\t\t\timage: require(\"../../assets/locate.png\"),\r\n\t\t\t\t\t\t\tsize: new AMap.Size(52, 52),  //图标大小\r\n\t\t\t\t\t\t\timageSize: new AMap.Size(32, 32)\r\n\t\t\t\t\t\t}),\n\t\t\t\t\t\ttitle: that.companyList[i].company_name\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tthat.marker.content = content.join(\"\");\r\n\t\t\t\t\tthat.marker.on('click', that.markerClick);\r\n\t\t\t\t\tthat.marker.emit('click', {target: that.marker});//默认初始化不出现信息窗体,打开初始化就出现信息窗体\r\n\t\t\t\t\t\r\n\t\t\t\t\tthat.marker.setMap(that.map);\n\t\t\t\t}\r\n\t\t\t\tthat.factorynum = that.companyList.length;\n\t\t\t},\r\n\t\t\tmarkerClick(e){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthat.infoWindow.setContent(e.target.content);\r\n\t\t\t\tthat.infoWindow.open(that.map, e.target.getPosition());\r\n\t\t\t},\r\n\t\t\tfetchaData(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tconsole.log(that.companyID);\r\n\t\t\t\tconsole.log(that.userID);\r\n\t\t\t\taxios.get(\r\n\t\t\t\t\t\"https://site.maple.today/IOTplatform/ServerMain\",\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tparams:{\r\n\t\t\t\t\t\t\trequestCode: '021',\r\n\t\t\t\t\t\t\tuser_id: that.userID,\r\n\t\t\t\t\t\t\ttoken: that.token,\r\n\t\t\t\t\t\t\tcompany_id: that.companyID\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(function(response){\r\n\t\t\t\t\t\tconsole.log(response.data);\r\n\t\t\t\t\t\tthat.mycompany = response.data.data;\r\n\t\t\t\t\t\tthat.putGData();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error){\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t})\r\n\t\t\t\tif(that.companyID === '0'){\r\n\t\t\t\t\tthat.factorynum = '0';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthat.factorynum = '1';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tputGData(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\taxios.get(\r\n\t\t\t\t\t\"https://site.maple.today/IOTplatform/ServerMain\",\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tparams:{\r\n\t\t\t\t\t\t\trequestCode: '007',\r\n\t\t\t\t\t\t\tuser_id: that.userID,\r\n\t\t\t\t\t\t\ttoken: that.token,\r\n\t\t\t\t\t\t\tcompany_id: that.companyID\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then(function(response){\r\n\t\t\t\t\t\tconsole.log(response.data);\r\n\t\t\t\t\t\tthat.deviceList = response.data.data;\r\n\t\t\t\t\t\tthat.devicenum = that.deviceList.length;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function(error){\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t})\r\n\t\t\t\tthat.marker =  new AMap.Marker({\r\n\t\t\t\t\tposition: new AMap.LngLat(that.mycompany.longitude,that.mycompany.latitude),\r\n\t\t\t\t\toffset: new AMap.Pixel(-10, -10),\r\n\t\t\t\t\ticon: new AMap.Icon({            \r\n\t\t\t\t\t\timage: require(\"../../assets/locate.png\"),\r\n\t\t\t\t\t\tsize: new AMap.Size(52, 52),  //图标大小\r\n\t\t\t\t\t\timageSize: new AMap.Size(32, 32)\r\n\t\t\t\t\t}),\r\n\t\t\t\t\ttitle: that.mycompany.company_name\r\n\t\t\t\t});\r\n\t\t\t\tthat.infoWindow = new AMap.InfoWindow({offset: new AMap.Pixel(0, -20)});\r\n\t\t\t\tvar content = [];\r\n\t\t\t\tcontent.push(\"<h4>\" + that.mycompany.company_name + \"</h4>\");\r\n\t\t\t\tcontent.push(\"<p>公司ID:\" + that.mycompany.company_id + \"</p>\");\r\n\t\t\t\tcontent.push(\"<p>创建时间:\" + that.mycompany.create_time + \"</p>\");\r\n\t\t\t\tthat.marker.content = content.join(\"\");\r\n\t\t\t\tthat.marker.on('click', that.markerClick);\r\n\t\t\t\tthat.marker.emit('click', {target: that.marker});//默认初始化不出现信息窗体,打开初始化就出现信息窗体\r\n\r\n\t\t\t\tthat.marker.setMap(that.map);\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.DeviceMap{\n\t\twidth: 100%;\n\t\theight: 96%;\n\t\t/* background-color: antiquewhite;\n\t\tborder: black;\n\t\tborder-width: 1px;\n\t\tborder-style: solid; */\n\t\talign-items: center;\n\t}\n\t#container1{\n\t\tmargin-top: 10px;\n\t\twidth: 95%;\n\t\theight: 80%;\n\t\tborder-width: 2px;\n\t}\n\t.Show{\n\t\twidth: 93%;\n\t\theight: 93%;\n\t\t/* border: 20px solid antiquewhite; */\n\t\t/* background-color: #ffffff; */\n\t\tpadding-left: 50px;\n\t}\n\t.wrap3{\n\t\t/* padding-left: 10px; */\n\t\twidth: 90%;\n\t\theight: 15%;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t}\n\t.rectangle9,.rectangle10{\n\t\t/* flex:1; */\n\t\t/* width: 60%; */\n\t\t /* height: ; */\n\t\tborder:solid 2px #DDDDDD;\n\t\tmargin-top: 20px;\n\t\tmargin-left: 20px;\n\t\t/* padding-top: 15px; */\n\t\tpadding-left: 10px;\n\t\tpadding-right: 10px;\n\t\ttext-align: center;\n\t\tcolor: #747474;\n\t\tfont-size: 20px;\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\talign-items: center;\n\t}\n</style>"]}]}