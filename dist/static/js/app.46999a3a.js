(function(e){function t(t){for(var i,r,o=t[0],l=t[1],c=t[2],d=0,u=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);m&&m(t);while(u.length)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,r=1;r<a.length;r++){var o=a[r];0!==s[o]&&(i=!1)}i&&(n.splice(t--,1),e=l(l.s=a[0]))}return e}var i={},r={app:0},s={app:0},n=[];function o(e){return l.p+"static/js/"+({about:"about"}[e]||e)+"."+{about:"ca47cdb6"}[e]+".js"}function l(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={about:1};r[e]?t.push(r[e]):0!==r[e]&&a[e]&&t.push(r[e]=new Promise((function(t,a){for(var i="static/css/"+({about:"about"}[e]||e)+"."+{about:"c5b99385"}[e]+".css",s=l.p+i,n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var c=n[o],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===i||d===s))return t()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){c=u[o],d=c.getAttribute("data-href");if(d===i||d===s)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var i=t&&t.target&&t.target.src||s,n=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=i,delete r[e],m.parentNode.removeChild(m),a(n)},m.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(m)})).then((function(){r[e]=0})));var i=s[e];if(0!==i)if(i)t.push(i[2]);else{var n=new Promise((function(t,a){i=s[e]=[t,a]}));t.push(i[2]=n);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=o(e);var u=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(m);var a=s[e];if(0!==a){if(a){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",u.name="ChunkLoadError",u.type=i,u.request=r,a[1](u)}s[e]=void 0}};var m=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},l.m=e,l.c=i,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(a,i,function(t){return e[t]}.bind(null,i));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var m=d;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"0852":function(e,t,a){},1:function(e,t){},"11c2":function(e,t,a){},1657:function(e,t,a){e.exports=a.p+"static/img/total.44e8e6cd.png"},1734:function(e,t,a){},"1b75":function(e,t,a){"use strict";a("6be6")},"1f33":function(e,t,a){e.exports=a.p+"static/img/on-line.0b392b7d.png"},2:function(e,t){},"23d1":function(e,t,a){"use strict";a("9f04")},"2cfd":function(e,t,a){"use strict";a("e314")},"2fcd":function(e,t,a){"use strict";a("fac1")},3:function(e,t){},"3d1f":function(e,t,a){},"3d24":function(e,t,a){},4:function(e,t){},"422c":function(e,t,a){},4678:function(e,t,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=s,e.exports=r,r.id="4678"},5:function(e,t){},6:function(e,t){},"632a":function(e,t,a){e.exports=a.p+"static/img/total2.20de720f.png"},6346:function(e,t,a){e.exports=a.p+"static/img/locate.b4d22ae3.png"},6587:function(e,t,a){"use strict";a("0852")},"6a2c":function(e,t,a){e.exports=a.p+"static/img/running.bb6a243c.png"},"6be6":function(e,t,a){},"6e91":function(e,t,a){"use strict";a("3d24")},"6f79":function(e,t,a){e.exports=a.p+"static/img/off-line.b58527f5.png"},7268:function(e,t,a){e.exports=a.p+"static/img/unregistered.dd755173.png"},7878:function(e,t,a){},"7d8d":function(e,t,a){"use strict";a("84ad")},"818d":function(e,t,a){"use strict";a("11c2")},"84ad":function(e,t,a){},"84b1":function(e,t,a){e.exports=a.p+"static/img/alert.23b66c6f.png"},8736:function(e,t,a){"use strict";a("a272")},"88e7":function(e,t,a){"use strict";a("9fa1")},9599:function(e,t,a){},"9a7e":function(e,t,a){},"9baf":function(e,t,a){},"9c18":function(e,t,a){"use strict";a("9a7e")},"9d98":function(e,t,a){},"9f04":function(e,t,a){},"9f48":function(e,t,a){"use strict";a("da82")},"9fa1":function(e,t,a){},a272:function(e,t,a){},a309:function(e,t,a){"use strict";a("bca4")},a473:function(e,t,a){"use strict";a("e901")},a932:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4e82"),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fb6a"),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__),mqtt__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("e7fc"),mqtt__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(mqtt__WEBPACK_IMPORTED_MODULE_7__),js_cookie__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("852e"),js_cookie__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_8__),echarts__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("313e"),axios__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_10__),qs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("4328"),qs__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_11__);function CompareDate(e,t){return new Date(e.replace(/-/g,"/"))>new Date(t.replace(/-/g,"/"))}function compare(e,t){var a=e.name,i=t.name;return new Date(a.replace(/-/g,"/"))>new Date(i.replace(/-/g,"/"))?-1:new Date(i.replace(/-/g,"/"))>new Date(a.replace(/-/g,"/"))?1:0}__webpack_exports__["a"]={data:function(){return{ProductionsInfor:[],DeviceInfor:[],Device:[],isType3:!1}},created:function(){"3"===js_cookie__WEBPACK_IMPORTED_MODULE_8___default.a.get("modal")&&(this.isType3=!0)},mounted:function mounted(){var _this2=this,user_id=js_cookie__WEBPACK_IMPORTED_MODULE_8___default.a.get("user_id"),token=js_cookie__WEBPACK_IMPORTED_MODULE_8___default.a.get("token"),company_id=js_cookie__WEBPACK_IMPORTED_MODULE_8___default.a.get("company_id"),password=js_cookie__WEBPACK_IMPORTED_MODULE_8___default.a.get("password"),options={connectTimeout:4e3,clientId:user_id,username:user_id,password:password,keepalive:60,clean:!0},TCP_URL="wss://mqtt.maple.today:8084/mqtt";this.client=mqtt__WEBPACK_IMPORTED_MODULE_7___default.a.connect(TCP_URL,options),this.client.on("connect",(function(){_this2.client.subscribe("update/1/#",(function(e){}))})),this.client.on("reconnect",(function(e){_this2.client.end(),js_cookie__WEBPACK_IMPORTED_MODULE_8___default.a.remove("token"),location.reload()})),this.client.on("error",(function(e){}));var data=[],now=new Date,value,option={title:{text:"未连接"},tooltip:{trigger:"axis",formatter:function(e){return e=e[0],e.name+" Value: "+e.value[1]},axisPointer:{animation:!1}},xAxis:{splitNumber:30,type:"time",axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},axisLine:{show:!0}},series:[{name:"模拟数据",type:"line",showSymbol:!1,hoverAnimation:!1,data:data}]},ProductionsURL="https://site.maple.today/IOTplatform/ServerMain",ProductionsData={requestCode:"005",user_id:user_id,token:token,company_id:1},AXIOS=axios__WEBPACK_IMPORTED_MODULE_10___default.a.create({headers:{"Content-Type":"application/x-www-form-urlencoded"}}),_this=this;AXIOS.post(ProductionsURL,qs__WEBPACK_IMPORTED_MODULE_11___default.a.stringify(ProductionsData)).then((function(res){_this.ProductionsInfor=res.data.data;for(var i=0;i<_this.ProductionsInfor.length;i++){var DeviceURL="https://site.maple.today/IOTplatform/ServerMain",DeviceData={requestCode:"025",user_id:user_id,token:token,company_id:1,product_id:_this.ProductionsInfor[i].product_id};AXIOS.post(DeviceURL,qs__WEBPACK_IMPORTED_MODULE_11___default.a.stringify(DeviceData)).then((function(res){_this.DeviceInfor=res.data.data;for(var j=0;j<_this.DeviceInfor.length;j++){var url="https://site.maple.today/IOTplatform/ServerMain",postdata={requestCode:"027",user_id:user_id,token:token,company_id:1,device_id:_this.DeviceInfor[j].sensor_id};AXIOS.post(url,qs__WEBPACK_IMPORTED_MODULE_11___default.a.stringify(postdata)).then((function(res){for(var temp=res.data.data,temperature_seriesData=[],humidity_seriesData=[],voltage_seriesData=[],electricity_seriesData=[],device_id=qs__WEBPACK_IMPORTED_MODULE_11___default.a.parse(res.config.data).device_id,k=0;k<temp.length;k++)for(var time=temp[k].time,arr=eval("("+temp[k].data+")"),temperature={},humidity={},voltage={},electricity={},l=0;l<arr.length;l++)0===l?(temperature={name:time,value:[time,arr[l]]},temperature_seriesData.push(temperature)):1===l?(humidity={name:time,value:[time,arr[l]]},humidity_seriesData.push(humidity)):2===l?(voltage={name:time,value:[time,arr[l]]},voltage_seriesData.push(voltage)):(electricity={name:time,value:[time,arr[l]]},electricity_seriesData.push(electricity));temperature_seriesData.sort(compare),humidity_seriesData.sort(compare),voltage_seriesData.sort(compare),electricity_seriesData.sort(compare),_this.Device.push({device_id:device_id,value:{temperature:temperature_seriesData,humidity:humidity_seriesData,voltage:voltage_seriesData,electricity:electricity_seriesData}});var maindiv=document.createElement("div");maindiv.id="device_"+device_id,maindiv.style="width: 1200px;height: 400px;",document.getElementById("box").appendChild(maindiv);var cdom=document.getElementById("device_"+device_id),mychart=echarts__WEBPACK_IMPORTED_MODULE_9__["init"](cdom),optiontemp={title:{text:"device_"+device_id},legend:{data:["Temperature","Humidity","Voltage","Electricity"]},tooltip:{trigger:"axis",formatter:function(e){return e=e[0],e.name+" Value: "+e.value[1]},axisPointer:{animation:!1}},xAxis:{type:"time",axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},axisLine:{show:!0}},series:[{name:"Temperature",type:"line",showSymbol:!1,hoverAnimation:!1,data:_this.Device[_this.Device.length-1].value.temperature},{name:"Humidity",type:"line",showSymbol:!1,hoverAnimation:!1,data:_this.Device[_this.Device.length-1].value.humidity},{name:"Voltage",type:"line",showSymbol:!1,hoverAnimation:!1,data:_this.Device[_this.Device.length-1].value.voltage},{name:"Electricity",type:"line",showSymbol:!1,hoverAnimation:!1,data:_this.Device[_this.Device.length-1].value.electricity}]};optiontemp&&mychart.setOption(optiontemp)})).catch((function(e){}))}})).catch((function(e){}))}})).catch((function(e){})),this.client.on("message",(function(e,t){e.slice("update/1/#".length);var a=JSON.parse(t.toString());now=new Date,value=a.data_upload;for(var i={},r={},s={},n={},o=now.getFullYear()+"-"+(now.getMonth()+1)+"-"+now.getDate()+" "+(now.getHours()>=10?now.getHours():"0"+now.getHours())+":"+(now.getMinutes()>=10?now.getMinutes():"0"+now.getMinutes())+":"+(now.getSeconds()>=10?now.getSeconds():"0"+now.getSeconds()),l=0;l<value.length;l++)0===l?i={name:o,value:[o,value[l]]}:1===l?r={name:o,value:[o,value[l]]}:2===l?s={name:o,value:[o,value[l]]}:n={name:o,value:[o,value[l]]};for(var c=a.device_id.replace("device_",""),d=!1,u=0;u<_this.Device.length;u++)if(c===_this.Device[u].device_id){d=!0;var m=document.getElementById("device_"+c),p=echarts__WEBPACK_IMPORTED_MODULE_9__["init"](m);_this.Device[u].value.temperature.push(i),_this.Device[u].value.humidity.push(r),_this.Device[u].value.voltage.push(s),_this.Device[u].value.electricity.push(n),option={title:{text:"device_"+c},legend:{data:["Temperature","Humidity","Voltage","Electricity"]},tooltip:{trigger:"axis",formatter:function(e){return e=e[0],e.name+" Value: "+e.value[1]},axisPointer:{animation:!1}},xAxis:{type:"time",axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},axisLine:{show:!0}},series:[{name:"Temperature",type:"line",showSymbol:!1,hoverAnimation:!1,data:_this.Device[u].value.temperature},{name:"Humidity",type:"line",showSymbol:!1,hoverAnimation:!1,data:_this.Device[u].value.humidity},{name:"Voltage",type:"line",showSymbol:!1,hoverAnimation:!1,data:_this.Device[u].value.voltage},{name:"Electricity",type:"line",showSymbol:!1,hoverAnimation:!1,data:_this.Device[u].value.electricity}]},option&&p.setOption(option);break}if(!1===d){var _=document.createElement("div");_.id="device_"+c,_.style="width: 1200px;height: 400px;",document.getElementById("box").appendChild(_);var h=document.getElementById("device_"+c),f=echarts__WEBPACK_IMPORTED_MODULE_9__["init"](h),g=[],v=[],b=[],y=[];g.push(i),v.push(r),b.push(s),y.push(n),_this.Device.push({device_id:c,value:{temperature:g,humidity:v,voltage:b,electricity:y}});var D={title:{text:"device_"+c},legend:{data:["Temperature","Humidity","Voltage","Electricity"]},tooltip:{trigger:"axis",formatter:function(e){return e=e[0],e.name+" Value: "+e.value[1]},axisPointer:{animation:!1}},xAxis:{type:"time",axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},axisLine:{show:!0}},series:[{name:"Temperature",type:"line",showSymbol:!1,hoverAnimation:!1,data:g},{name:"Humidity",type:"line",showSymbol:!1,hoverAnimation:!1,data:v},{name:"Voltage",type:"line",showSymbol:!1,hoverAnimation:!1,data:b},{name:"Electricity",type:"line",showSymbol:!1,hoverAnimation:!1,data:y}]};D&&f.setOption(D)}}))},methods:{},beforeDestroy:function(){this.client.end()}}},b6bd:function(e,t,a){"use strict";a("422c")},bbc2:function(e,t,a){},bca4:function(e,t,a){},c17e:function(e,t,a){e.exports=a.p+"static/img/unrunning.ff302d24.png"},cd49:function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],n=a("2877"),o={},l=Object(n["a"])(o,r,s,!1,null,null,null),c=l.exports,d=(a("d3b7"),a("3ca3"),a("ddb0"),a("8c4f")),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"loginBox"},[a("div",{staticClass:"loginContainer"},[e._m(0),a("div",{staticClass:"login"},[a("el-form",{ref:"form",attrs:{model:e.form}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"手机号/邮箱"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"密码","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),a("el-form-item",[a("el-checkbox",{staticStyle:{float:"left"},attrs:{label:"记住密码"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"400px"},attrs:{type:"primary"},on:{click:function(t){return e.loading()}}},[e._v(" 登录 ")])],1),a("el-form-item",[a("el-button",{staticStyle:{width:"400px"},attrs:{type:"primary"},on:{click:function(t){return e.register()}}},[e._v(" 注册 ")])],1)],1)],1)])])},m=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"left",width:"400px"}},[a("h2",[e._v("登录")])])}],p=(a("b0c0"),a("ac1f"),a("1276"),a("6c27"),a("bc3a")),_=a.n(p),h=a("4328"),f=a.n(h),g={name:"Loading",data:function(){return{token:"",user_id:"",checked:!1,form:{name:"",password:""}}},mounted:function(){this.getNameCookie(),this.getIdCookier(),""!==this.user_id&&""!==this.token&&""!==this.company_id&&""!==this.modal&&this.$router.push("/mainPage/dataInformation")},methods:{loading:function(){var e,t=this,i=this,r=a("6c27").sha256,s=r(this.form.password);if(e=/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-8]|18[0-9]|14[5679]|19[189]|16[56])[0-9]{8}$/.test(this.form.name)?1:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/.test(this.form.name)?2:3,""===this.form.name||""===this.form.password)alert("账号或密码不能为空");else{i.checked?i.setNameCookie(i.form.name,i.form.password,7):i.clearNameCookie();var n="https://site.maple.today/IOTplatform/ServerMain",o={requestCode:"002",account:this.form.name,loginway:e,password:s},l=_.a.create({headers:{"Content-Type":"application/x-www-form-urlencoded"}});l.post(n,f.a.stringify(o)).then((function(e){"1"===e.data.result?(i.setIdCookie(e.data.user_id,e.data.token,e.data.company,e.data.modal,t.form.password,1),i.$router.push("/mainPage/dataInformation")):"0"===e.data.result?alert("该用户未注册"):"2"===e.data.result&&alert("密码错误")})).catch((function(e){}))}},register:function(){this.$router.push({name:"Register"})},setNameCookie:function(e,t,a){var i=new Date;i.setTime(i.getTime()+864e5*a),window.document.cookie="userName="+e+";path=/;expires="+i.toGMTString(),window.document.cookie="userPwd="+t+";path=/;expires="+i.toGMTString()},setIdCookie:function(e,t,a,i,r,s){var n=new Date;n.setTime(n.getTime()+864e5*s),window.document.cookie="user_id="+e+";path=/;expires="+n.toGMTString(),window.document.cookie="token="+t+";path=/;expires="+n.toGMTString(),window.document.cookie="company_id="+a+";path=/;expires="+n.toGMTString(),window.document.cookie="modal="+i+";path=/;expires="+n.toGMTString(),window.document.cookie="password="+r+";path=/;expires="+n.toGMTString()},getNameCookie:function(){if(document.cookie.length>0){this.checked=!0;for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var a=e[t].split("=");"userName"===a[0]&&(this.form.name=a[1]),"userPwd"===a[0]&&(this.form.password=a[1])}}},getIdCookier:function(){if(document.cookie.length>0)for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var a=e[t].split("=");"user_id"===a[0]&&(this.user_id=a[1]),"token"===a[0]&&(this.token=a[1]),"company_id"===a[0]&&(this.company_id=a[1]),"modal"===a[0]&&(this.modal=a[1])}},clearNameCookie:function(){this.setNameCookie("","",-1)},clearIdCookie:function(){this.setIdCookie("","","","","",-1)}}},v=g,b=(a("9f48"),Object(n["a"])(v,u,m,!1,null,null,null)),y=b.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("h1",[e._v("IOT平台注册")]),e._m(0),a("el-form",{ref:"ruleForm",staticStyle:{"text-align":"left"},attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"手机号/邮箱",prop:"phone"}},[a("el-input",{model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}}),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.getCode}},[e._v("获取验证码")])],1),a("el-form-item",{attrs:{label:"验证码",prop:"code"}},[a("el-input",{model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"pass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("立即注册")]),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},w=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h4",[e._v("已有账号,"),a("a",{attrs:{href:"/"}},[e._v("去登陆>")])])}],k={data:function(){var e=this,t=function(t,a,i){""===a?i(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),i())},a=function(t,a,i){""===a?i(new Error("请再次输入密码")):a!==e.ruleForm.pass?i(new Error("两次输入密码不一致!")):i()};return{user_id:"",token:"",company_id:"",modal:"",way:!1,ruleForm:{pass:"",checkPass:"",code:"",phone:"",sms_id:""},rules:{pass:[{validator:t,trigger:"blur"},{required:!0,message:"请输入密码",trigger:"blur"}],checkPass:[{validator:a,trigger:"blur"},{required:!0,message:"确认密码",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号/邮箱",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},mounted:function(){this.getIdCookier(),""!==this.user_id&&""!==this.token&&""!==this.company_id&&""!==this.modal&&this.$router.push({name:"MainPage"})},methods:{submit:function(){var e,t=a("6c27").sha256,i=t(this.ruleForm.pass);if(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-8]|18[0-9]|14[5679]|19[189]|16[56])[0-9]{8}$/.test(this.ruleForm.phone))e={requestCode:"002",phoneNumber:this.ruleForm.phone,code:this.ruleForm.code,sms_id:this.ruleForm.sms_id,password:i};else{if(!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/.test(this.ruleForm.phone))return;e={requestCode:"004",address:this.ruleForm.phone,code:this.ruleForm.code,sms_id:this.ruleForm.sms_id,password:i}}var r=this,s="https://site.maple.today/IOTplatform/SMS",n=_.a.create({headers:{"Content-Type":"application/x-www-form-urlencoded"}});n.post(s,f.a.stringify(e)).then((function(e){"1"===e.data.result?(r.setIdCookie(e.data.user_id,e.data.token,e.data.company,e.data.modal,1),r.$router.push({name:"MainPage"})):"0"===e.data.result?alert("未知错误"):"2"===e.data.result&&alert("超时或验证码错误")})).catch((function(e){}))},resetForm:function(e){this.$refs[e].resetFields()},getCode:function(){var e,t,a=this;/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-8]|18[0-9]|14[5679]|19[189]|16[56])[0-9]{8}$/.test(this.ruleForm.phone)?(e="https://site.maple.today/IOTplatform/SMS",t={requestCode:"001",phoneNumber:this.ruleForm.phone}):/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/.test(this.ruleForm.phone)&&(e="https://site.maple.today/IOTplatform/SMS",t={requestCode:"003",address:this.ruleForm.phone});var i=_.a.create({headers:{"Content-Type":"application/x-www-form-urlencoded"}});i.post(e,f.a.stringify(t)).then((function(e){"1"===e.data.result?a.ruleForm.sms_id=e.data.sms_id:"0"===e.data.result?alert("超出本日短信上限"):"2"===e.data.result&&alert("请求过于频繁，1分钟后再请求")})).catch((function(e){}))},setNameCookie:function(e,t,a){var i=new Date;i.setTime(i.getTime()+864e5*a),window.document.cookie="userName="+e+";path=/;expires="+i.toGMTString(),window.document.cookie="userPwd="+t+";path=/;expires="+i.toGMTString()},setIdCookie:function(e,t,a,i,r){var s=new Date;s.setTime(s.getTime()+864e5*r),window.document.cookie="user_id="+e+";path=/;expires="+s.toGMTString(),window.document.cookie="token="+t+";path=/;expires="+s.toGMTString(),window.document.cookie="company_id="+a+";path=/;expires="+s.toGMTString(),window.document.cookie="modal="+i+";path=/;expires="+s.toGMTString()},getNameCookie:function(){if(document.cookie.length>0){this.checked=!0;for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var a=e[t].split("=");"userName"===a[0]&&(this.ruleForm.name=a[1]),"userPwd"===a[0]&&(this.ruleForm.password=a[1])}}},getIdCookier:function(){if(document.cookie.length>0)for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var a=e[t].split("=");"user_id"===a[0]&&(this.user_id=a[1]),"token"===a[0]&&(this.token=a[1]),"company_id"===a[0]&&(this.company_id=a[1]),"modal"===a[0]&&(this.modal=a[1])}},clearNameCookie:function(){this.setNameCookie("","",-1)},clearIdCookie:function(){this.setIdCookie("","","","",-1)}}},x=k,C=(a("2cfd"),Object(n["a"])(x,D,w,!1,null,null,null)),M=C.exports,I=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",[e._v("首页")]),i("el-breadcrumb-item",[e._v("数据概览")])],1),i("div",{staticClass:"DataInformation"},[i("el-divider",{attrs:{"content-position":"left"}},[e._v("数据概览")]),i("div",{staticClass:"panel-body",staticStyle:{height:"100%","overflow-x":"hidden",width:"100%"}},[i("div",{staticClass:"Gateway"},[i("div",{staticClass:"littleTitle"},[i("el-divider",{staticStyle:{width:"50%"},attrs:{"content-position":"left"}},[e._v("网管概览")]),i("el-button",{staticClass:"informationButton",on:{click:e.gotolink}},[e._v("查看详情")])],1),i("div",{staticClass:"wrap1"},[i("div",{staticClass:"rectangle1"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("6f79")}}),i("div",{staticClass:"text1"},[e._v(" "+e._s(e.data1)),i("br"),e._v("离线网关 ")])]),i("div",{staticClass:"rectangle2"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("1f33")}}),i("div",{staticClass:"text2"},[e._v(" "+e._s(e.data2)),i("br"),e._v("在线网关 ")])]),i("div",{staticClass:"rectangle3"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("7268")}}),i("div",{staticClass:"text3"},[e._v(" "+e._s(e.data3)),i("br"),e._v("待注册网关 ")])]),i("div",{staticClass:"rectangle4"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("1657")}}),i("div",{staticClass:"text4"},[e._v(" "+e._s(e.datatotal1)),i("br"),e._v("总计网关 ")])])])]),i("div",{staticClass:"Platform"},[i("div",{staticClass:"littleTitle"},[i("el-divider",{attrs:{"content-position":"left"}},[e._v("平台概览")]),i("el-button",{staticClass:"informationButton",on:{click:e.gotolink2}},[e._v("查看详情")])],1),i("div",{staticClass:"wrap2"},[i("div",{staticClass:"rectangle5"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("6a2c")}}),i("div",{staticClass:"text5"},[e._v(" "+e._s(e.data4)),i("br"),e._v("运行数据流 ")])]),i("div",{staticClass:"rectangle6"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("c17e")}}),i("div",{staticClass:"text6"},[e._v(" "+e._s(e.data5)),i("br"),e._v("未运行数据流 ")])]),i("div",{staticClass:"rectangle7"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("84b1")}}),i("div",{staticClass:"text7"},[e._v(" "+e._s(e.data6)),i("br"),e._v("报警数据流 ")])]),i("div",{staticClass:"rectangle8"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("632a")}}),i("div",{staticClass:"text8"},[e._v(" "+e._s(e.datatotal2)),i("br"),e._v("总计数据流 ")])])])]),i("div",{staticClass:"DataShow"},[i("div",{staticClass:"littleTitle"},[i("el-divider",{attrs:{"content-position":"left"}},[e._v("平台数据量分析")])],1),i("div",{staticStyle:{width:"800px",height:"300px","padding-left":"0px"},attrs:{id:"EchartsView"}})])])],1)],1)},E=[],S=a("852e"),O=a.n(S),T=a("313e"),j={name:"DataInformation",data:function(){return{data1:"",data2:"",data3:"",datatotal1:"",data4:"",data5:"",data6:"",datatotal2:"",activeName:"first",gatewayList:[],companyList:[],dataList:[],deviceidList:[],datanumList:[],userID:"",token:"",companyID:"",modal:""}},created:function(){this.token=O.a.get("token"),this.userID=O.a.get("user_id"),this.companyID=O.a.get("company_id"),this.modal=O.a.get("modal"),this.fetchGData()},mounted:function(){this.drawLine()},methods:{drawLine:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"028",user_id:e.userID,company_id:e.companyID,token:e.token}}).then((function(t){e.dataList=t.data.data;for(var a=0;a<e.dataList.length;a++)e.deviceidList.push(e.dataList[a].device_id),e.datanumList.push(e.dataList[a].dataNumber);var i=e.$echarts.init(document.getElementById("EchartsView")),r={title:{text:"最近24小时"},tooltip:{},legend:{data:["数据量"]},xAxis:{name:"设备id",data:e.deviceidList},yAxis:{},series:[{name:"数据量",type:"bar",data:e.datanumList}]};i.setOption(r)})).catch((function(e){}))},fetchGData:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"003",user_id:e.userID,company_id:e.companyID,token:e.token}}).then((function(t){e.gatewayList=t.data.data,e.getGData()})).catch((function(e){}))},gotolink:function(){this.$router.push({name:"ViewDetails"})},gotolink2:function(){this.$router.push({name:"ViewDetails2"})},handleClick:function(e,t){},getGData:function(){var e=this,t=0,a=0,i=0;if("3"!==e.modal){for(var r=0;r<e.gatewayList.length;r++)"1"===e.gatewayList[r].dismiss?t++:"2"===e.gatewayList[r].dismiss?a++:i++;e.data1=t,e.data2=a,e.data3=i,e.datatotal1=e.gatewayList.length}}}},P=j,L=(a("a473"),Object(n["a"])(P,I,E,!1,null,null,null)),A=L.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("设备地图")])],1),a("div",{staticClass:"workspack"})],1)},q=[],R=(a("ea5a"),{}),B=Object(n["a"])(R,F,q,!1,null,null,null),$=B.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("数字镜像")]),a("el-breadcrumb-item",[e._v("设备管理")])],1),a("div",{staticClass:"deviceManage"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("设备列表")]),null===this.companyID||"3"!==this.userType&&"2"!==this.userType?e._e():a("el-button",{staticClass:"plusButton",attrs:{type:"primary",icon:"el-icon-circle-plus-outline",circle:""},on:{click:function(t){return e.goToAdd(1)}}}),"3"===this.userType?a("el-select",{attrs:{placeholder:"请选择工厂"},model:{value:e.companyID,callback:function(t){e.companyID=t},expression:"companyID"}},e._l(e.Componies,(function(e,t){return a("el-option",{key:t,attrs:{label:e.company_name,value:e.company_id}})})),1):e._e(),"3"===this.userType?a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.goToAdd(2)}}},[e._v("添加工厂")]):e._e(),null===this.companyID?a("el-empty",{staticStyle:{width:"100%",height:"80%"},attrs:{description:"请选择工厂"}}):e._e(),null!==this.companyID?a("div",{ref:"scroll",staticStyle:{width:"100%",height:"85%"}},[void 0===this.cards||0===this.cards.length?a("el-empty",{attrs:{description:"该工厂还没有设备,点击上方加号添加"}}):e._e(),void 0!==this.cards?a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("div",{staticClass:"cardBox"},e._l(e.cards,(function(t,i){return a("el-card",{key:i,staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"20px"}},[e._v(e._s(t.sensor_name))]),a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-circle-close",circle:"",size:"small"},on:{click:function(t){return e.deleteRow(i,e.cards)}}}),a("el-button",{staticStyle:{float:"right"},attrs:{type:"success",icon:"el-icon-info",circle:"",size:"small"},on:{click:function(t){return e.goToInfor(i)}}})],1)])})),1)]):e._e()],1):e._e()],1)],1)},z=[],W=(a("a434"),{data:function(){return{height:document.documentElement.clientHeight,userID:"user_2",token:"1628765771204",companyID:"",type3ID:null,userType:3,cards:[],Componies:[]}},created:function(){var e=this;this.userType=O.a.get("modal"),"3"!==this.userType?(this.companyID=O.a.get("company_id"),this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"007",user_id:O.a.get("user_id"),company_id:O.a.get("company_id"),token:O.a.get("token")}}).then((function(t){e.cards=t.data.data})).catch((function(e){}))):(this.companyID=null,this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"011",user_id:O.a.get("user_id"),token:O.a.get("token")}}).then((function(t){e.Componies=t.data.data})).catch((function(e){})))},mounted:function(){},methods:{goToDevices:function(e){},handleSizeChange:function(e){},handleCurrentChange:function(e){},goToInfor:function(e){var t={createTime:this.cards[e].create_time,productID:this.cards[e].product_id,sensorName:this.cards[e].sensor_name},a=this;this.$router.push({name:"DeviceInformation",params:{card:t,companyID:a.companyID}})},goToAdd:function(e){2===e?this.$router.push({name:"AddCompony",params:{whichFrom:2}}):this.$router.push({name:"AddDevice",params:{companyID:this.companyID}})},deleteRow:function(e,t){if("1"===this.userType)this.$message({message:"权限不够，无法操作",type:"warning"});else{var a=this.cards[e],i=this;this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"012",user_id:O.a.get("user_id"),company_id:this.companyID,token:O.a.get("token"),device_id:a.sensor_id}}).then((function(a){"1"===a.data.result&&(i.$message({message:"删除成功",type:"success"}),t.splice(e,1))})).catch((function(e){}))}}},watch:{companyID:function(){this.cards=[];var e=this;null!==this.companyID&&this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"007",user_id:O.a.get("user_id"),company_id:this.companyID,token:O.a.get("token")}}).then((function(t){var a=t.data.data;for(var i in a)"1"===a[i].dismiss&&e.cards.push(a[i])})).catch((function(e){}))}}}),K=W,N=(a("dcf2"),Object(n["a"])(K,U,z,!1,null,"18a14f8d",null)),V=N.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("数字镜像")]),a("el-breadcrumb-item",{attrs:{to:{name:"DeviceManage"}}},[e._v("设备管理")]),a("el-breadcrumb-item",[e._v("设备信息")])],1),a("div",{staticClass:"deviceInformation"},[a("el-divider",{attrs:{"content-position":"right"}},[e._v("设备信息")]),a("el-form",{ref:"card",attrs:{model:e.card,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"设备名称"}},[a("el-tag",[e._v(e._s(e.card.sensorName))])],1),a("el-form-item",{attrs:{label:"产品型号"}},[a("el-tag",[e._v(e._s(e.productName))])],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-tag",[e._v(e._s(e._f("formatDate")(e.createTime)))])],1)],1)],1)],1)},H=[],J=(a("a9e3"),a("c1df")),Y=a.n(J),Z={data:function(){return{productions:[],productName:"",createTime:0}},filters:{formatDate:function(e){return Y()(e).format("YYYY-MM-DD HH:MM:ss")}},props:["card","companyID"],created:function(){var e=this;this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"005",user_id:O.a.get("user_id"),company_id:e.companyID,token:O.a.get("token")}}).then((function(t){e.productions=t.data.data;var a=t.data.data;for(var i in e.createTime=Number(e.card.createTime),t.data.data)a[i].product_id===e.card.productID&&(e.productName=a[i].product_name)})).catch((function(e){}))},mounted:function(){}},X=Z,Q=(a("7d8d"),Object(n["a"])(X,G,H,!1,null,null,null)),ee=Q.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("数字镜像")]),2===this.whichFrom?a("el-breadcrumb-item",{attrs:{to:{name:"DeviceManage"}}},[e._v("设备管理")]):e._e(),1===this.whichFrom?a("el-breadcrumb-item",{attrs:{to:{name:"ProductionManage"}}},[e._v("产品管理")]):e._e(),a("el-breadcrumb-item",[e._v("添加工厂")])],1),a("div",{staticClass:"addCompony"},[a("el-divider",{attrs:{"content-position":"right"}},[e._v("添加工厂")]),a("div",{ref:"scroll",staticStyle:{width:"100%",height:"80%"}},[a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("div",{staticClass:"form"},[a("el-form",{ref:"form",attrs:{model:e.componyForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"公司名称"}},[a("el-input",{model:{value:e.componyForm.name,callback:function(t){e.$set(e.componyForm,"name",t)},expression:"componyForm.name"}})],1),a("el-form-item",{attrs:{label:"公司位置(点击选址)"}},[a("div",{staticStyle:{"text-align":"right"}},[e._v(" 省："),a("select",{staticStyle:{width:"130px",height:"30px",border:"1px solid #ccc"},attrs:{id:"province"},on:{change:e.search}}),e._v(" 市："),a("select",{staticStyle:{width:"130px",height:"30px",border:"1px solid #ccc"},attrs:{id:"city"},on:{change:e.search}}),e._v(" 区："),a("select",{staticStyle:{width:"130px",height:"30px",border:"1px solid #ccc"},attrs:{id:"district"},on:{change:e.search}})]),a("div",{attrs:{id:"container"}})]),null!==e.componyForm.position.lat?a("el-form-item",{attrs:{label:"选中位置"}},[a("el-tag",{staticStyle:{"margin-right":"20px"}},[e._v("经度："+e._s(e.componyForm.position.lng))]),a("el-tag",[e._v("纬度："+e._s(e.componyForm.position.lat))])],1):e._e()],1)],1)])],1),a("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","padding-right":"10px",height:"10%","padding-bottom":"10px"}},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.creat()}}},[e._v("创建")])],1)],1)],1)},ae=[],ie=(a("841c"),a("d81d"),{data:function(){var e=this;return{marker:null,position:{lat:null,lng:null},map:null,polygons:[],district:null,componyForm:{name:"",position:{lat:null,lng:null}},events:{click:function(t){var a=t.lnglat,i=a.lng,r=a.lat;e.lng=i,e.lat=r,alert(e.lng+"/"+e.lat)}}}},methods:{province:function(){var e=this,t={subdistrict:1,showbiz:!1};this.district=new AMap.DistrictSearch(t),this.district.search("中国",(function(t,a){"complete"===t&&e.getData(a.districtList[0])}))},getData:function(e,t){var a=document.getElementById("city"),i=document.getElementById("district"),r=e.boundaries,s=this;if(r){for(var n=0,o=r.length;n<o;n++){var l=new AMap.Polygon({map:this.map,strokeWeight:1,strokeColor:"#ff52a1",fillColor:"#ffeef6",fillOpacity:.2,path:r[n]});AMap.event.addListener(l,"click",(function(e){s.position=e.lnglat,null!==s.marker&&s.map.remove(s.marker),s.marker=new AMap.Marker({position:[e.lnglat.lng,e.lnglat.lat]}),s.marker.setMap(s.map),s.componyForm.position=e.lnglat})),this.polygons.push(l)}null!==this.marker&&this.map.remove(s.marker),this.componyForm.position.lat=null,this.componyForm.position.lng=null,this.map.setFitView()}"province"===t?(a.innerHTML="",i.innerHTML=""):"city"===t&&(i.innerHTML="");var c=e.districtList;if(c){var d="",u=c[0].level,m=document.querySelector("#"+u);if(!m)return!1;"province"===u?m.add(new Option("全国")):"city"===u?m.add(new Option("全市")):m.add(new Option("全区"));for(var p=0,_=c.length;p<_;p++){var h=c[p].name,f=c[p].level;d=new Option(h),d.setAttribute("value",f),d.center=c[p].center,d.adcode=c[p].adcode,m.add(d)}}},search:function(e){for(var t=this,a=0,i=this.polygons.length;a<i;a++)this.polygons[a].setMap(null);var r=e.srcElement[e.srcElement.options.selectedIndex],s=r.adcode;this.district.setLevel(r.value),this.district.setExtensions("all"),this.district.search(s,(function(a,i){"complete"===a&&t.getData(i.districtList[0],e.srcElement.id)}))},loadmap:function(){var e=this;this.map=new AMap.Map("container",{center:[118.792221,31.938254],zoom:15}),AMap.event.addListener(this.map,"click",(function(t){null!==e.marker&&e.map.remove(e.marker),e.marker=new AMap.Marker({position:[t.lnglat.lng,t.lnglat.lat]}),e.marker.setMap(e.map),e.componyForm.position=t.lnglat}))},creat:function(){var e=this;""===this.componyForm.name||null===this.componyForm.position.lat?this.$message({message:"未填写完，创建失败",type:"warning"}):this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"024",user_id:O.a.get("user_id"),token:O.a.get("token"),name:this.componyForm.name,latitude:this.componyForm.position.lat,longitude:this.componyForm.position.lng}}).then((function(t){void 0!==t.data?(e.$message({message:"创建成功",type:"success"}),1===e.whichFrom?e.$router.push({name:"ProductionManage"}):e.$router.push({name:"DeviceManage"})):e.$message({message:"上传失败",type:"warning"})})).catch((function(e){}))}},mounted:function(){this.loadmap(),this.province()},watch:{componyForm:function(){}},props:["whichFrom"]}),re=ie,se=(a("23d1"),Object(n["a"])(re,te,ae,!1,null,null,null)),ne=se.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("数字镜像")]),a("el-breadcrumb-item",{attrs:{to:{name:"DeviceManage"}}},[e._v("设备管理")]),a("el-breadcrumb-item",[e._v("添加设备")])],1),a("div",{staticClass:"addDevice"},[a("el-divider",{attrs:{"content-position":"right"}},[e._v("添加设备")]),a("div",{ref:"scroll",staticStyle:{width:"100%",height:"80%"}},[void 0!==this.cards?a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"选择产品"}},[a("el-select",{attrs:{placeholder:"请选择产品"},model:{value:e.form.product_id,callback:function(t){e.$set(e.form,"product_id",t)},expression:"form.product_id"}},e._l(e.form.productions,(function(e,t){return a("el-option",{key:t,attrs:{value:e.product_id,label:e.product_name}})})),1)],1),a("el-form-item",{attrs:{label:"设备名称"}},[a("el-input",{model:{value:e.form.sensor_name,callback:function(t){e.$set(e.form,"sensor_name",t)},expression:"form.sensor_name"}})],1),a("el-form-item",{attrs:{label:"设备位置(点击选址)"}},[a("div",{staticStyle:{"text-align":"right"}},[e._v(" 省："),a("select",{staticStyle:{width:"130px",height:"30px",border:"1px solid #ccc"},attrs:{id:"province"},on:{change:e.search}}),e._v(" 市："),a("select",{staticStyle:{width:"130px",height:"30px",border:"1px solid #ccc"},attrs:{id:"city"},on:{change:e.search}}),e._v(" 区："),a("select",{staticStyle:{width:"130px",height:"30px",border:"1px solid #ccc"},attrs:{id:"district"},on:{change:e.search}})]),a("div",{attrs:{id:"containerOfAD"}})]),null!==e.form.position.lat?a("el-form-item",{attrs:{label:"选中位置"}},[a("el-tag",{staticStyle:{"margin-right":"20px"}},[e._v("经度："+e._s(e.form.position.lng))]),a("el-tag",[e._v("纬度："+e._s(e.form.position.lat))])],1):e._e()],1)],1):e._e()],1),a("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","padding-right":"10px",height:"10%","padding-bottom":"10px"}},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.creatSensor()}}},[e._v("创建")])],1)],1)],1)},le=[],ce={data:function(){return{marker:null,position:{lat:null,lng:null},map:null,polygons:[],district:null,upForm:{productionType:0},form:{componyName:"",productions:[],product_id:null,sensor_name:"",position:{lat:null,lng:null}},cards:[{name:"牛死逼车床",description:"这个车床牛死逼了",imageCount:0,url:"https://img2.baidu.com/it/u=1938097429,3295786295&fm=26&fmt=auto&gp=0.jpg",Arrtribute:[{type:"电流",name1:"车床总线电流",name2:"QWER - 5 电流表",default:"50",unit:"ma"},{type:"温度",name1:"车床车刀温度",name2:"QWER - 5 测温仪",default:"90",unit:"°C"}]},{name:"牛死逼车床ver2.0",description:"这个车床牛死逼了",imageCount:0,url:"https://img2.baidu.com/it/u=1938097429,3295786295&fm=26&fmt=auto&gp=0.jpg",Arrtribute:[{type:"电流",name1:"车床总线电流",name2:"QWER - 5 电流表",default:"50",unit:"ma"},{type:"温度",name1:"车床车刀温度",name2:"QWER - 5 测温仪",default:"90",unit:"°C"}]}]}},methods:{province:function(){var e=this,t={subdistrict:1,showbiz:!1};this.district=new AMap.DistrictSearch(t),this.district.search("中国",(function(t,a){"complete"===t&&e.getData(a.districtList[0])}))},getData:function(e,t){var a=document.getElementById("city"),i=document.getElementById("district"),r=e.boundaries,s=this;if(r){for(var n=0,o=r.length;n<o;n++){var l=new AMap.Polygon({map:this.map,strokeWeight:1,strokeColor:"#ff52a1",fillColor:"#ffeef6",fillOpacity:.2,path:r[n]});AMap.event.addListener(l,"click",(function(e){s.position=e.lnglat,null!==s.marker&&s.map.remove(s.marker),s.marker=new AMap.Marker({position:[e.lnglat.lng,e.lnglat.lat]}),s.marker.setMap(s.map),s.form.position=e.lnglat})),this.polygons.push(l)}null!==this.marker&&this.map.remove(s.marker),this.form.position.lat=null,this.form.position.lng=null,this.map.setFitView()}"province"===t?(a.innerHTML="",i.innerHTML=""):"city"===t&&(i.innerHTML="");var c=e.districtList;if(c){var d="",u=c[0].level,m=document.querySelector("#"+u);if(!m)return!1;"province"===u?m.add(new Option("全国")):"city"===u?m.add(new Option("全市")):m.add(new Option("全区"));for(var p=0,_=c.length;p<_;p++){var h=c[p].name,f=c[p].level;d=new Option(h),d.setAttribute("value",f),d.center=c[p].center,d.adcode=c[p].adcode,m.add(d)}}},search:function(e){for(var t=this,a=0,i=this.polygons.length;a<i;a++)this.polygons[a].setMap(null);var r=e.srcElement[e.srcElement.options.selectedIndex],s=r.adcode;this.district.setLevel(r.value),this.district.setExtensions("all"),this.district.search(s,(function(a,i){"complete"===a&&t.getData(i.districtList[0],e.srcElement.id)}))},loadmap:function(){var e=this;this.map=new AMap.Map("containerOfAD",{center:[118.792221,31.938254],zoom:15}),AMap.event.addListener(this.map,"click",(function(t){null!==e.marker&&e.map.remove(e.marker),e.marker=new AMap.Marker({position:[t.lnglat.lng,t.lnglat.lat]}),e.marker.setMap(e.map),e.form.position=t.lnglat}))},creatSensor:function(){if(null===this.form.product_id||""===this.form.sensor_name||null===this.form.position.lat)this.$message({message:"未填写完，创建失败",type:"warning"});else{var e=this;this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"006",user_id:O.a.get("user_id"),token:O.a.get("token"),company_id:e.companyID,sensor_name:e.form.sensor_name,product_id:e.form.product_id,latitude:e.form.position.lat,longitude:e.form.position.lng}}).then((function(t){"1"===t.data.result?(e.$message({message:"创建成功",type:"success"}),e.$router.push({name:"DeviceManage"})):e.$message({message:"创建失败",type:"warning"})})).catch((function(e){}))}}},created:function(){this.form.componyName=this.componyName;var e=this;this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"005",user_id:O.a.get("user_id"),company_id:e.companyID,token:O.a.get("token")}}).then((function(t){e.form.productions=t.data.data})).catch((function(e){}))},props:["componyName","companyID"],mounted:function(){this.loadmap(),this.province()}},de=ce,ue=(a("e5ff"),Object(n["a"])(de,oe,le,!1,null,null,null)),me=ue.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("数字镜像")]),a("el-breadcrumb-item",{attrs:{to:{name:"ProductionManage"}}},[e._v("产品管理")]),a("el-breadcrumb-item",[e._v("添加产品")])],1),a("div",{staticClass:"addProduction"},[a("el-divider",{attrs:{"content-position":"right"}},[e._v("添加产品")]),a("div",{ref:"scroll",staticStyle:{width:"100%",height:"80%"}},[a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("div",{staticClass:"form"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"产品名称"}},[a("el-input",{model:{value:e.form.product_name,callback:function(t){e.$set(e.form,"product_name",t)},expression:"form.product_name"}})],1),a("el-form-item",{attrs:{label:"产品图片"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.openImg}},[e._v("选择")]),a("div",[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"input",attrs:{type:"file",accept:"image/*"},on:{change:function(t){return e.tirggerFile(t)}}}),a("div",{staticClass:"images"},e._l(e.imgUrl,(function(t,i){return a("div",{key:i,staticStyle:{width:"200px",height:"200px","text-align":"center","margin-right":"10px"}},[a("el-button",{staticStyle:{position:"absolute"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.deleteImage(i,e.imgUrl)}}}),a("el-image",{staticStyle:{height:"100%",width:"100%","z-index":"-1"},attrs:{src:t,fit:"cover"}})],1)})),0)])],1),a("el-form-item",{attrs:{label:"产品描述"}},[a("el-input",{model:{value:e.form.product_des,callback:function(t){e.$set(e.form,"product_des",t)},expression:"form.product_des"}})],1),a("el-form-item",{attrs:{label:"产品属性"}},[a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.tableData,"max-height":"250"}},[a("el-table-column",{attrs:{prop:"name",label:"属性名称",width:"150"}}),a("el-table-column",{attrs:{prop:"default",label:"默认值",width:"120"}}),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"300"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[e._v(" 移除 ")])]}}])})],1)],1)]),e.addMode?a("el-form-item",{staticStyle:{width:"50%","z-index":"999"},attrs:{label:"添加属性"}},[a("el-input",{attrs:{placeholder:"属性名称"},model:{value:e.addTable.name,callback:function(t){e.$set(e.addTable,"name",t)},expression:"addTable.name"}}),a("el-input",{attrs:{placeholder:"默认值"},model:{value:e.addTable.default,callback:function(t){e.$set(e.addTable,"default",t)},expression:"addTable.default"}}),a("el-input",{attrs:{placeholder:"单位"},model:{value:e.addTable.unit,callback:function(t){e.$set(e.addTable,"unit",t)},expression:"addTable.unit"}})],1):e._e()],1),e.addMode?e._e():a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(t){return e.addItem()}}},[e._v("添加属性 ")]),e.addMode?a("el-button",{staticStyle:{width:"70px"},attrs:{type:"primary"},on:{click:function(t){return e.addItem()}}},[e._v("确定 ")]):e._e()],1)])],1),a("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","padding-right":"10px",height:"10%","padding-bottom":"10px"}},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.upload()}}},[e._v("上传")])],1)],1)],1)},_e=[],he={data:function(){return{isSelectFile:!1,imgUrl:[],imgData:[],height:0,addMode:!1,upNumber:0,form:{product_name:"",product_des:"",images:[],data_format:[],company_id:null,user_id:O.a.get("user_id"),token:O.a.get("token")},tableData:[],addTable:{name:"",default:"",unit:""}}},mounted:function(){},created:function(){this.form.company_id=this.companyID},methods:{openImg:function(){this.$refs.input.click()},tirggerFile:function(e){var t=e.target.files[0];if("image/jpeg"!==t.type&&"image/png"!==t.type&&"image/jpg"!==t.type)this.$message({message:"请选择合适的文件类型",type:"warning"});else{this.imgData.push(t);var a=new FileReader;a.readAsDataURL(t);var i=this;a.onload=function(e){var t=e.target.result;i.imgUrl.push(t)}}},deleteImage:function(e,t){t.splice(e,1),this.imgData.splice(e,1)},deleteRow:function(e,t){t.splice(e,1)},addItem:function(){if(this.addMode){var e=this.addTable,t=!0;if(""!==e.name&&""!==e.default&&""!==e.unit||(t=!1),t){var a={name:"",showName:"",type:"",default:"",unit:""};a.showName=this.addTable.showName,a.name=this.addTable.name,a.type=this.addTable.type,a.unit=this.addTable.unit,a.default=this.addTable.default,this.tableData.push(a),this.addTable.name="",this.addTable.showName="",this.addTable.type="",this.addTable.default="",this.addTable.unit="",this.addMode=!1}else this.$message({message:"属性未填写完成",type:"warning"})}else this.addMode=!0},upload:function(){var e=this.form;if(e.data_format=this.tableData,0===e.data_format.length||""===e.product_name||""===e.product_des)this.$message({message:"无法上传",type:"warning"});else{for(var t in this.imgData){var a=new FormData,i=String((new Date).valueOf())+O.a.get("user_id")+String(t),r=this;a.append("name","file"),a.append("imagename",i),a.append("file",this.imgData[t]);var s="https://site.maple.today/iotplat/"+i;this.form.images.push(s),this.$axios.post("https://site.maple.today/IOTplatform/upload/picture.htm",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){r.upNumber=r.upNumber+1})).catch((function(e){}))}}}},props:["companyID"],watch:{upNumber:function(e,t){if(this.upNumber===this.imgData.length){var a=this,i=JSON.stringify(this.form.data_format),r=JSON.stringify(this.form.images);this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"004",user_id:a.form.user_id,token:a.form.token,company_id:a.form.company_id,product_name:a.form.product_name,product_des:a.form.product_des,images:r,data_format:i}}).then((function(e){void 0!==e.data?(a.$message({message:"上传成功",type:"success"}),a.$router.push({name:"ProductionManage"})):a.$message({message:"上传失败",type:"warning"})})).catch((function(e){}))}}}},fe=he,ge=(a("2fcd"),Object(n["a"])(fe,pe,_e,!1,null,null,null)),ve=ge.exports,be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("数字镜像")]),a("el-breadcrumb-item",{attrs:{to:{name:"ProductionManage"}}},[e._v("产品管理")]),a("el-breadcrumb-item",[e._v("修改产品")])],1),a("div",{staticClass:"addProduction"},[a("el-divider",{attrs:{"content-position":"right"}},[e._v("修改产品")]),a("div",{ref:"scroll",staticStyle:{width:"100%",height:"80%"}},[a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("div",{staticClass:"form"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"产品名称"}},[a("el-input",{model:{value:e.form.product_name,callback:function(t){e.$set(e.form,"product_name",t)},expression:"form.product_name"}})],1),a("el-form-item",{attrs:{label:"产品图片"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.openImg}},[e._v("选择")]),a("div",[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"input",attrs:{type:"file",accept:"image/*"},on:{change:function(t){return e.tirggerFile(t)}}}),a("div",{staticClass:"imagesFix"},[e._l(e.form.images,(function(t,i){return a("div",{key:i,staticStyle:{width:"200px",height:"200px","text-align":"center","margin-right":"10px"}},[a("el-button",{staticStyle:{position:"absolute"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.deleteForeImage(i,e.form.images)}}}),a("el-image",{staticStyle:{height:"100%",width:"100%","z-index":"-1"},attrs:{src:t,fit:"cover"}})],1)})),e._l(e.imgUrl,(function(t,i){return a("div",{key:i,staticStyle:{width:"200px",height:"200px","text-align":"center","margin-right":"10px"}},[a("el-button",{staticStyle:{position:"absolute"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(t){return e.deleteImage(i,e.imgUrl)}}}),a("el-image",{staticStyle:{height:"100%",width:"100%","z-index":"-1"},attrs:{src:t,fit:"cover"}})],1)}))],2)])],1),a("el-form-item",{attrs:{label:"产品描述"}},[a("el-input",{model:{value:e.form.product_des,callback:function(t){e.$set(e.form,"product_des",t)},expression:"form.product_des"}})],1),a("el-form-item",{attrs:{label:"产品属性"}},[a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.tableData,"max-height":"250"}},[a("el-table-column",{attrs:{prop:"name",label:"属性名称",width:"150"}}),a("el-table-column",{attrs:{prop:"default",label:"默认值",width:"120"}}),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"300"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),e.deleteRow(t.$index,e.tableData)}}},[e._v(" 移除 ")])]}}])})],1)],1)]),e.addMode?a("el-form-item",{staticStyle:{width:"50%","z-index":"999"},attrs:{label:"添加属性"}},[a("el-input",{attrs:{placeholder:"属性名称"},model:{value:e.addTable.name,callback:function(t){e.$set(e.addTable,"name",t)},expression:"addTable.name"}}),a("el-input",{attrs:{placeholder:"默认值"},model:{value:e.addTable.default,callback:function(t){e.$set(e.addTable,"default",t)},expression:"addTable.default"}}),a("el-input",{attrs:{placeholder:"单位"},model:{value:e.addTable.unit,callback:function(t){e.$set(e.addTable,"unit",t)},expression:"addTable.unit"}})],1):e._e()],1),e.addMode?e._e():a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(t){return e.addItem()}}},[e._v("添加属性 ")]),e.addMode?a("el-button",{staticStyle:{width:"70px"},attrs:{type:"primary"},on:{click:function(t){return e.addItem()}}},[e._v("确定 ")]):e._e()],1)])],1),a("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","padding-right":"10px",height:"10%","padding-bottom":"10px"}},[a("el-button",{attrs:{type:"success"},on:{click:function(t){return e.upload()}}},[e._v("上传")])],1)],1)],1)},ye=[],De={data:function(){return{isUp:!1,upNumber:0,height:0,addMode:!1,imgData:[],imgUrl:[],tableData:[],addTable:{name:"",default:"",unit:""}}},mounted:function(){},created:function(){this.tableData=this.form.data_format},methods:{openImg:function(){this.$refs.input.click()},tirggerFile:function(e){var t=e.target.files[0];if("image/jpeg"!==t.type&&"image/png"!==t.type&&"image/jpg"!==t.type)this.$message({message:"请选择合适的文件类型",type:"warning"});else{this.imgData.push(t);var a=new FileReader;a.readAsDataURL(t);var i=this;a.onload=function(e){var t=e.target.result;i.imgUrl.push(t)}}},deleteForeImage:function(e,t){t.splice(e,1)},deleteImage:function(e,t){t.splice(e,1),this.imgData.splice(e,1)},deleteRow:function(e,t){t.splice(e,1)},addItem:function(){if(this.addMode){var e=this.addTable,t=!0;if(""!==e.name&&""!==e.default&&""!==e.unit||(t=!1),t){var a={name:"",showName:"",type:"",default:"",unit:""};a.showName=this.addTable.showName,a.name=this.addTable.name,a.type=this.addTable.type,a.unit=this.addTable.unit,a.default=this.addTable.default,this.tableData.push(a),this.addTable.name="",this.addTable.showName="",this.addTable.type="",this.addTable.default="",this.addTable.unit="",this.addMode=!1}else this.$message({message:"属性未填写完成",type:"warning"})}else this.addMode=!0},upload:function(){var e=this,t=this.form;if(t.data_format=this.tableData,0===t.data_format.length||""===t.product_name||""===t.product_des)this.$message({message:"无法上传",type:"warning"});else{if(0===this.imgData.length)this.isUp=!0;else for(var a in this.imgData){var i=new FormData,r=String((new Date).valueOf())+O.a.get("user_id"),s=this;i.append("name","file"),i.append("imagename",r),i.append("file",this.imgData[a]);var n="https://site.maple.today/iotplat/"+r;this.form.images.push(n),this.$axios.post("https://site.maple.today/IOTplatform/upload/picture.htm",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){s.upNumber=s.upNumber+1,s.upNumber===s.imgData.length&&(e.isUp=!0)})).catch((function(e){}))}}}},props:["companyID","form"],watch:{isUp:function(){var e=JSON.stringify(this.form.data_format),t=JSON.stringify(this.form.images),a=this;this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"020",user_id:O.a.get("user_id"),token:O.a.get("token"),company_id:a.form.company_id,product_name:a.form.product_name,product_des:a.form.product_des,product_id:a.form.product_id,images:t,data_format:e}}).then((function(e){void 0!==e.data?(a.$message({message:"修改成功",type:"success"}),a.$router.push({name:"ProductionManage"})):a.$message({message:"上传失败",type:"warning"})})).catch((function(e){}))}}},we=De,ke=(a("88e7"),Object(n["a"])(we,be,ye,!1,null,null,null)),xe=ke.exports,Ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("数字镜像")]),a("el-breadcrumb-item",[e._v("产品管理")])],1),a("div",{staticClass:"productionManage"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("产品列表（设备模型)")]),null!==this.companyID?a("el-button",{staticClass:"plusButton",attrs:{type:"primary",icon:"el-icon-circle-plus-outline",circle:""},on:{click:function(t){return e.goToAdd()}}}):e._e(),"3"===this.userType?a("el-select",{attrs:{placeholder:"请选择工厂"},model:{value:e.companyID,callback:function(t){e.companyID=t},expression:"companyID"}},e._l(e.Componies,(function(e,t){return a("el-option",{key:t,attrs:{label:e.company_name,value:e.company_id}})})),1):e._e(),"3"===this.userType?a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.goToAddConpony()}}},[e._v("添加工厂 ")]):e._e(),null===this.companyID?a("el-empty",{staticStyle:{width:"100%",height:"80%"},attrs:{description:"请选择工厂"}}):e._e(),a("el-scrollbar",{staticStyle:{height:"85%",width:"100%"}},[void 0===this.cards||0===this.cards.length?a("el-empty",{attrs:{description:"该工厂还没有产品,点击上方加号添加"}}):e._e(),a("div",{staticClass:"cardBox"},e._l(e.cards,(function(t,i){return a("el-card",{key:i,staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"20px"}},[e._v(e._s(t.product_name))]),a("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",icon:"el-icon-setting",circle:"",size:"small"},on:{click:function(t){return e.fix(i,e.cards)}}})],1),a("el-carousel",{attrs:{height:"150px"}},e._l(t.images,(function(e,t){return a("el-carousel-item",{key:t},[a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e,fit:"cover"}})],1)})),1),a("el-collapse",[a("el-collapse-item",{attrs:{title:"描述",name:"1"}},[a("div",[e._v(e._s(t.product_des))])]),a("el-collapse-item",{attrs:{title:"仪器指标",name:"2"}},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.data_format}},[a("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),a("el-table-column",{attrs:{prop:"default",label:"默认值"}}),a("el-table-column",{attrs:{prop:"unit",label:"单位"}})],1)]],2)],1)],1)})),1)],1)],1)],1)},Me=[],Ie={data:function(){return{height:document.documentElement.clientHeight,companyID:"1",userType:null,cards:[],Componies:[]}},beforeCreate:function(){},created:function(){this.userType=O.a.get("modal");var e=this;"3"!==this.userType?this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"005",user_id:O.a.get("user_id"),company_id:O.a.get("company_id"),token:O.a.get("token")}}).then((function(t){e.cards=t.data.data})).catch((function(e){})):(this.companyID=null,this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"011",user_id:O.a.get("user_id"),token:O.a.get("token")}}).then((function(t){e.Componies=t.data.data})).catch((function(e){})))},mounted:function(){},methods:{handleSizeChange:function(e){},handleCurrentChange:function(e){},goToAdd:function(){this.$router.push({name:"AddProduction",params:{companyID:this.companyID}})},goToAddConpony:function(){this.$router.push({name:"AddCompony",params:{whichFrom:1}})},fix:function(e,t){var a=this.cards[e];this.$router.push({name:"FixProduction",params:{companyID:a.company_id,form:a}})}},watch:{companyID:function(){this.cards=[];var e=this;null!==this.companyID&&this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"005",user_id:O.a.get("user_id"),company_id:this.companyID,token:O.a.get("token")}}).then((function(t){var a=t.data.data;for(var i in a)"1"===a[i].dismiss&&e.cards.push(a[i])})).catch((function(e){}))}}},Ee=Ie,Se=(a("f4db"),Object(n["a"])(Ee,Ce,Me,!1,null,"4f63268a",null)),Oe=Se.exports,Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("设备数据流")]),a("el-breadcrumb-item",[e._v("平台数据流")])],1),e._m(0)],1)},je=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"DataFlout"},[a("div",{staticClass:"StreamSets"},[a("a",{staticStyle:{color:"#f16baa","font-size":"20px"},attrs:{href:"http://116.63.40.126:18630",onclick:"return confirm('即将跳转至StreamSets登陆平台\\n初始登录账号为用户id,初始密码为123456\\nps:用户id可前往个人详情页面查阅\\n密码可前往设置页面修改');"}},[e._v(" 点击查看平台概览详情 ")])])])}],Pe=(a("818d"),{}),Le=Object(n["a"])(Pe,Te,je,!1,null,null,null),Ae=Le.exports,Fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("时序数据库")]),a("el-breadcrumb-item",[e._v("元数据")])],1),a("el-divider",{attrs:{"content-position":"left"}},[e._v("元数据")]),!0===this.isType3?a("el-empty",{attrs:{description:"系统管理员无法使用该功能"}}):e._e(),!1===this.isType3?a("el-scrollbar",{staticStyle:{height:"95%",width:"100%"}},[a("div",{attrs:{id:"box"}})]):e._e()],1)},qe=[],Re=a("a932"),Be=Re["a"],$e=(a("8736"),Object(n["a"])(Be,Fe,qe,!1,null,null,null)),Ue=$e.exports,ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"location"},[a("el-breadcrumb",{staticStyle:{height:"35px"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("时序数据库")]),a("el-breadcrumb-item",[e._v("数据查询")])],1)],1),a("div",{staticClass:"DataCheck"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("数据查询")]),!0===this.isType3?a("el-empty",{attrs:{description:"系统管理员无法使用该功能"}}):e._e(),!1===this.isType3?a("el-scrollbar",{staticStyle:{height:"95%",width:"100%"}},[a("div",{staticClass:"boxhead"},[a("el-tabs",{staticClass:"leftbox",model:{value:e.tabName,callback:function(t){e.tabName=t},expression:"tabName"}},[a("el-tab-pane",{attrs:{label:"指标",name:"first"}}),a("el-tab-pane",{attrs:{label:"轴线",name:"second"}})],1),a("el-dropdown",{staticClass:"rightbox",attrs:{trigger:"click"},on:{command:e.ChangeSource}},[a("span",{staticClass:"el-dropdown-link",staticStyle:{"font-size":"14px"}},[a("span",{staticStyle:{"margin-right":"15px"}},[e._v("数据源")]),a("span",{staticClass:"span-size"},[e._v(e._s(e.SelcetDataSource)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})])]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.DataSource,(function(t,i){return a("el-dropdown-item",{key:i,attrs:{command:t}},[e._v(e._s(t)+" ")])})),1)],1)],1),a("div",{staticClass:"boxbody"},[a("div",{staticClass:"firstbox"},[a("div",{staticClass:"Timebox"},[a("span",{staticClass:"el-dropdown-link"},[a("span",[e._v(" 时间选择: ")])]),a("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{type:"datetimerange","picker-options":e.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),a("div",{staticClass:"checkbox"},[a("el-collapse",{model:{value:e.collapseName,callback:function(t){e.collapseName=t},expression:"collapseName"}},[e._l(e.infor,(function(t,i){return a("el-collapse-item",{key:i,attrs:{title:String.fromCharCode(Number(i)+65),name:i}},[a("div",{staticStyle:{width:"600px",float:"left"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"指标"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:t.target,callback:function(a){e.$set(t,"target",a)},expression:"item.target"}})],1),a("el-form-item",{attrs:{label:"聚合函数"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.function,callback:function(a){e.$set(t,"function",a)},expression:"item.function"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"过滤"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择过滤"},model:{value:t.filtration,callback:function(a){e.$set(t,"filtration",a)},expression:"item.filtration"}},e._l(e.options_filtration,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-checkbox",{model:{value:t.underclocking,callback:function(a){e.$set(t,"underclocking",a)},expression:"item.underclocking"}},[e._v("降频")])],1)],1)],1),a("i",{staticClass:"el-icon-delete",staticStyle:{float:"right","font-size":"20px","margin-right":"20px"},on:{click:function(t){return e.deletecol(i)}}})])})),a("el-collapse-item",{attrs:{title:String.fromCharCode(e.infor.length+65),name:"last"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.AddSearch}},[e._v("新增查询")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.SelectData}},[e._v("时序分析")])],1)],2)],1),a("div",{attrs:{id:"main"}})])])]):e._e()],1)])},We=[],Ke=a("ebbd"),Ne=Ke["a"],Ve=(a("b6bd"),Object(n["a"])(Ne,ze,We,!1,null,null,null)),Ge=Ve.exports,He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("监控运维")]),a("el-breadcrumb-item",[e._v("仪表盘")])],1),a("div",{staticClass:"workspace"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("产品列表")]),!1!==this.isType3?a("el-empty",{attrs:{description:"系统管理员无法使用此功能"}}):e._e(),!1===this.isType3?a("div",{staticClass:"scrollbox"},[a("el-scrollbar",{staticStyle:{height:"95%",width:"100%"}},[a("div",{staticClass:"productList"},[a("div",{staticClass:"list"},e._l(e.productListData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),(function(t){return a("div",{key:t.product_id,staticClass:"list-items",on:{click:function(a){return e.goDevice(t)}}},[a("el-card",{attrs:{shadow:"always","body-style":{padding:"10px"}}},[a("div",{staticClass:"image-container"},[a("el-image",{staticStyle:{width:"200px",height:"180px"},attrs:{src:t.images[0],fit:"cover"}})],1),a("h4",{staticStyle:{"margin-top":"8px"}},[e._v(e._s(t.product_name))])])],1)})),0),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"Page",attrs:{background:"",layout:"prev, pager, next",total:e.productListData.length,"page-size":e.pagesize,"current-page":e.currentPage},on:{"current-change":e.handleChange}})],1)])])],1):e._e()],1)],1)},Je=[],Ye={data:function(){return{isType3:!1,user_id:"",token:"",company_id:"",productListData:[],currentPage:1,pagesize:4}},created:function(){var e=this;e.user_id=O.a.get("user_id"),e.token=O.a.get("token"),"3"===O.a.get("modal")?(e.company_id="1",e.isType3=!0):e.company_id=O.a.get("company_id"),e.getProductList()},methods:{getProductList:function(){var e=this,t="https://site.maple.today/IOTplatform/ServerMain?requestCode=005";_.a.get(t,{params:{user_id:e.user_id,token:e.token,company_id:e.company_id}}).then((function(t){"1"===t.data.result&&(e.productListData=t.data.data)})).catch((function(e){}))},goDevice:function(e){var t=JSON.stringify(e);this.$router.push({path:"/mainPage/dashBoard/deviceList",query:{product:encodeURIComponent(t)}})},handleChange:function(e){this.currentPage=e}}},Ze=Ye,Xe=(a("ec88"),Object(n["a"])(Ze,He,Je,!1,null,"432e3fd2",null)),Qe=Xe.exports,et=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("监控运维")]),a("el-breadcrumb-item",[e._v("数据监控")])],1),a("div",{staticClass:"DataMonitor"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("数据监控")]),"3"===e.modal?a("div",[a("div",{staticClass:"scrollbox",staticStyle:{height:"100%","overflow-x":"hidden"}},[a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("div",{staticClass:"data-monitor"},[a("div",{staticClass:"data-class"},[a("div",{staticClass:"card"},[a("div",{staticStyle:{"font-weight":"bold"}},[a("div",{staticClass:"content",staticStyle:{"margin-left":"10px"}},[e._v("接收数据量："+e._s(e.datar))])]),a("div")]),a("div",{staticClass:"card"},[a("div",{staticStyle:{"font-weight":"bold"}},[a("div",{staticClass:"content",staticStyle:{"margin-left":"10px"}},[e._v("发送数据量："+e._s(e.datas))])]),a("div")]),a("div",{staticClass:"card"},[a("div",{staticStyle:{"font-weight":"bold"}},[a("div",{staticClass:"content",staticStyle:{"margin-left":"10px"}},[e._v("丢弃数据量："+e._s(e.datad))])]),a("div")])]),a("div",{staticClass:"otherdata-class"},[a("div",{staticClass:"number-board"},[a("div",{staticClass:"othercard"},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[a("div",{staticStyle:{"font-size":"14px","font-weight":"bold","margin-left":"10px"}},[e._v(" 客户端数量："+e._s(e.cdata))]),a("i",{staticClass:"el-icon-s-platform",staticStyle:{"font-size":"40px",color:"#409eff"}})]),a("div")]),a("div",{staticClass:"othercard"},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[a("div",{staticStyle:{"font-size":"14px","font-weight":"bold","margin-left":"10px"}},[e._v(" 会话数量："+e._s(e.sedata))]),a("i",{staticClass:"el-icon-message",staticStyle:{"font-size":"40px",color:"#409eff"}})]),a("div")]),a("div",{staticClass:"othercard"},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[a("div",{staticStyle:{"font-size":"14px","font-weight":"bold","margin-left":"10px"}},[e._v(" 主题数量："+e._s(e.tdata))]),a("i",{staticClass:"el-icon-s-open",staticStyle:{"font-size":"40px",color:"#409eff"}})]),a("div")]),a("div",{staticClass:"othercard"},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[a("div",{staticStyle:{"font-size":"14px","font-weight":"bold","margin-left":"10px"}},[e._v(" 订阅数量："+e._s(e.sudata))]),a("i",{staticClass:"el-icon-collection-tag",staticStyle:{"font-size":"40px",color:"#409eff"}})]),a("div")])]),a("div",{staticClass:"Client"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("客户端列表")]),a("el-table",{staticStyle:{width:"1053px"},attrs:{data:e.clientList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"50"}}),a("el-table-column",{attrs:{prop:"clientid",label:"客户端标识",width:"200px"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"200px"}}),a("el-table-column",{attrs:{prop:"ip_address",label:"IP",width:"200px"}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"200px"}}),a("el-table-column",{attrs:{prop:"",label:"清除会话",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击按钮清除会话",placement:"top-start",enterable:!1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.Cleaning(t.row)}}})],1)]}}],null,!1,2711557471)})],1),a("el-pagination",{attrs:{"current-page":e.pagenum,"page-sizes":[1,2,5,10],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.cdata},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])])],1)]):e._e(),"3"!==e.modal?a("div",[a("h2",{staticStyle:{"margin-left":"20px"}},[e._v("此页面为系统管理员专属")])]):e._e()],1)],1)},tt=[],at={name:"DataMonitor",data:function(){return{datar:"",datas:"",datad:"",cdata:"",tdata:"",sedata:"",sudata:"",userID:"",companyID:"",token:"",modal:"",clientList:[],pagenum:"1",pagesize:"2",tclientid:""}},created:function(){this.token=O.a.get("token"),this.userID=O.a.get("user_id"),this.companyID=O.a.get("company_id"),this.modal=O.a.get("modal"),"3"===this.modal&&(this.fetchData1(),this.fetchData2(),this.fetchData3())},methods:{handleSizeChange:function(e){this.pagesize=e,this.fetchData3()},handleCurrentChange:function(e){this.pagenum=e,this.fetchData3()},fetchData1:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"029",user_id:e.userID,token:e.token}}).then((function(t){e.datas=t.data.data.data[0]["metrics"]["packets.publish.sent"],e.datar=t.data.data.data[0]["metrics"]["packets.publish.received"],e.datad=t.data.data.data[0]["metrics"]["packets.publish.dropped"]})).catch((function(e){}))},fetchData2:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"031",user_id:e.userID,token:e.token}}).then((function(t){e.cdata=t.data.data.data[0]["stats"]["connections.count"],e.tdata=t.data.data.data[0]["stats"]["topics.count"],e.sedata=t.data.data.data[0]["stats"]["sessions.count"],e.sudata=t.data.data.data[0]["stats"]["subscriptions.count"]})).catch((function(e){}))},fetchData3:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"030",user_id:e.userID,token:e.token,page:e.pagenum,page_con:e.pagesize}}).then((function(t){e.clientList=t.data.data.data})).catch((function(e){}))},Cleaning:function(e){var t=this;t.tclientid=e.clientid,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"032",user_id:t.userID,token:t.token,client_id:t.tclientid}}).then((function(e){alert("已清除会话。")})).catch((function(e){}))}}},it=at,rt=(a("6e91"),Object(n["a"])(it,et,tt,!1,null,"397c31b9",null)),st=rt.exports,nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("监控运维")]),a("el-breadcrumb-item",{attrs:{to:{name:"DashBoard"}}},[e._v("仪表盘")]),a("el-breadcrumb-item",[e._v("设备列表")])],1),a("div",{staticClass:"workspace"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("设备列表")]),a("div",{staticClass:"scrollbox"},[a("el-scrollbar",{staticStyle:{height:"95%",width:"100%"}},[a("div",{staticClass:"productList"},[a("div",{staticClass:"list"},e._l(e.deviceList,(function(t){return a("div",{key:t.sensor_id,staticClass:"list-items",on:{click:function(a){return e.goData(t)}}},[a("el-card",{attrs:{shadow:"always","body-style":{padding:"10px"}}},[a("div",{staticClass:"image-container"}),a("h4",{staticStyle:{"margin-top":"8px"}},[e._v(e._s(t.sensor_name))])])],1)})),0)])])],1)],1)],1)},ot=[],lt={data:function(){return{user_id:"",token:"",company_id:"",product:{},deviceList:[]}},created:function(){var e=this;e.user_id=O.a.get("user_id"),e.token=O.a.get("token"),"3"===O.a.get("modal")?e.company_id="1":e.company_id=O.a.get("company_id"),e.getRouteData(),e.getDeviceData()},methods:{getRouteData:function(){var e=this,t=decodeURIComponent(e.$route.query.product);e.product=JSON.parse(t)},goData:function(e){var t=JSON.stringify(e);this.$router.push({path:"/mainPage/dashBoard/deviceList/dataBoard",query:{device:encodeURIComponent(t)}})},getDeviceData:function(){var e=this,t="https://site.maple.today/IOTplatform/ServerMain?requestCode=025";_.a.get(t,{params:{user_id:e.user_id,token:e.token,company_id:e.company_id,product_id:e.product.product_id}}).then((function(t){if("1"===t.data.result){e.deviceList=t.data.data;for(var a=0;a<e.deviceList.length;a++)e.deviceList[a].data_format=e.product.data_format}})).catch((function(e){}))}}},ct=lt,dt=(a("9c18"),Object(n["a"])(ct,nt,ot,!1,null,"2b562ea3",null)),ut=dt.exports,mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("监控运维")]),a("el-breadcrumb-item",[e._v("仪表盘")]),a("span",{staticStyle:{display:"flex","flex-direction":"row"}},[a("div",{staticStyle:{"font-weight":"700",color:"#000000",display:"flex","flex-direction":"row"},on:{click:e.goBack}},[e._v(" 设备列表 ")]),a("i",{staticClass:"el-icon-arrow-right",staticStyle:{color:"#9fa0a3"}})]),a("el-breadcrumb-item",[e._v("数据查看")])],1),a("div",{staticClass:"workspace"},[a("div",{staticClass:"title-bar"},[e.device?a("div",[e._v(e._s(e.device.sensor_name))]):e._e(),a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-right":"5px"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择日期"},on:{change:e.getChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.dateOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("div",[a("el-select",{attrs:{size:"small",placeholder:"请选择日期"},on:{change:e.getType},model:{value:e.val,callback:function(t){e.val=t},expression:"val"}},e._l(e.datatype,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1)])]),a("div",{staticClass:"scrollbox"},[a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("div",{staticClass:"data-board"},[a("div",{staticClass:"chartbox"},[a("div",{staticClass:"chart-container"},[a("div",{staticStyle:{width:"49%",height:"400px",border:"1px solid #aaaaaa","border-radius":"5px"},attrs:{id:"linechart1"}}),a("div",{staticStyle:{width:"49%",height:"400px",border:"1px solid #aaaaaa","border-radius":"5px"},attrs:{id:"linechart2"}})]),a("div",{staticStyle:{border:"1px solid #aaaaaa",color:"black","border-radius":"5px",height:"300px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.chartData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),height:"250"}},[a("el-table-column",{attrs:{label:"Time",prop:"name"}}),a("el-table-column",{attrs:{label:"数值",prop:"value[1]"}})],1),a("div",{staticStyle:{width:"100%",height:"50px",display:"flex","justify-content":"center","align-items":"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.chartData.length,"page-size":e.pagesize,"current-page":e.currentPage},on:{"current-change":e.handleChange}})],1)],1)])])])],1)])],1)},pt=[],_t=(a("5319"),a("4d63"),a("25f0"),a("4e82"),a("b680"),a("fb6a"),a("e7fc")),ht=a.n(_t);String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"gm"),t)};var ft={data:function(){return{device:"",user_id:"",token:"",password:"",company_id:"",device_id:"",fetchdata:[],dateOptions:[],datatype:[],value:"",val:"",chartData:[],chartData2:[],newchartData:[],data:[],msg:"",currentPage:1,pagesize:10,length:""}},created:function(){this.getDateArray(),this.getDataType(),this.getRouteData(),this.getCookieData(),this.fetchDeviceData(),this.getMqtt()},watch:{msg:{deep:!0,handler:function(e){var t=this;t.fetchdata.push(e);for(var a=0;a<t.fetchdata.length;a++)delete t.fetchdata[a].company_id,delete t.fetchdata[a].sensor_id,delete t.fetchdata[a].device_id;var i=t.getBeforeDate(0);if(t.value===i){for(var r,s=t.sliceDataArray(i),n=s[0].data_format[0].name,o=0;o<s[0].data_format.length;o++)s[0].data_format[o].name===n&&(r=o);for(var l=[],c=0;c<s.length;c++){var d={name:"",value:[]};d.name=s[c].time,d.value.push(s[c].time),d.value.push(parseInt(s[c].data[r])),l.push(d)}var u=l.sort((function(e,t){return e.name>t.name?1:-1}));t.chartData=u;for(var m=[],p=0,_=t.chartData[0].value[1],h=t.chartData[0].value[1],f=0;f<t.chartData.length;f++)p+=t.chartData[f].value[1],_<t.chartData[f].value[1]&&(_=t.chartData[f].value[1]),h>t.chartData[f].value[1]&&(h=t.chartData[f].value[1]);p/=t.chartData.length,p=p.toFixed(2),m.push(p),m.push(_),m.push(h),t.newchartData=m}}},chartData:{deep:!0,handler:function(){var e=this;this.$nextTick((function(){setTimeout((function(){e.drawChart("linechart1")}),300)}))}},newchartData:{deep:!0,handler:function(){var e=this;this.$nextTick((function(){setTimeout((function(){e.drawChart2("linechart2")}),300)}))}}},methods:{goBack:function(){this.$router.go(-1)},handleChange:function(e){this.currentPage=e},getCookieData:function(){var e=this;e.user_id=O.a.get("user_id"),e.token=O.a.get("token"),e.company_id=O.a.get("company_id")},getRouteData:function(){var e=this,t=decodeURIComponent(e.$route.query.device);e.device=JSON.parse(t)},getBeforeDate:function(e){var t=new Date,a=t.getFullYear(),i=t.getMonth()+1,r=t.getDate();r<=e&&(i>1?i-=1:(a-=1,i=12)),t.setDate(t.getDate()-e),a=t.getFullYear(),i=t.getMonth()+1,r=t.getDate();var s=a+"-"+(i<10?"0"+i:i)+"-"+(r<10?"0"+r:r);return s},getDateArray:function(){for(var e=this,t=0;t<5;t++){var a={};a.value=e.getBeforeDate(t),a.label=e.getBeforeDate(t),e.dateOptions.push(a)}e.value=e.dateOptions[0].value},getDataType:function(){for(var e=this,t=decodeURIComponent(e.$route.query.device),a=JSON.parse(t),i=0;i<a.data_format.length;i++){var r={};r.value=a.data_format[i].name,r.label=a.data_format[i].name,e.datatype[i]=r}e.val=e.datatype[0].value},getYMDHMS:function(e){var t=new Date(e),a=t.getFullYear(),i=t.getMonth()+1,r=t.getDate(),s=t.getHours(),n=t.getMinutes(),o=t.getSeconds();return i<10&&(i="0"+i),r<10&&(r="0"+r),s<10&&(s="0"+s),n<10&&(n="0"+n),o<10&&(o="0"+o),a+"-"+i+"-"+r+" "+s+":"+n+":"+o},getMqtt:function(){var e=this,t=this,a=O.a.get("user_id"),i=O.a.get("password"),r=O.a.get("company_id"),s={connectTimeout:4e3,clientId:a,username:a,password:i,keepalive:60,clean:!0},n="wss://mqtt.maple.today:8084/mqtt";this.client=ht.a.connect(n,s);var o="update/"+r+"/device_"+t.device.sensor_id;this.client.on("connect",(function(){e.client.subscribe(o,(function(e){}))})),this.client.on("reconnect",(function(t){e.client.end(),O.a.remove("token"),location.reload()})),this.client.on("error",(function(e){})),this.client.on("message",(function(e,a){var i=JSON.parse(a.toString()),r={data:[],data_format:[],sensor_id:"",time:"",device_id:"",company_id:""};r.company_id=i.company_id,r.sensor_id=i.sensor_id,r.device_id=i.device_id,r.data=i.data_upload,r.data_format=t.device.data_format,r.time=t.getYMDHMS(parseInt(i.timestamp)),t.msg=r}))},endMqtt:function(){this.client.end()},fetchDeviceData:function(){var e=this,t="https://site.maple.today/IOTplatform/ServerMain?requestCode=027";_.a.get(t,{params:{user_id:e.user_id,company_id:e.company_id,token:e.token,device_id:e.device.sensor_id}}).then((function(t){for(var a=0;a<t.data.data.length;a++){var i=t.data.data[a].data.replace("[",""),r=i.replace("]",""),s=r.replaceAll('"',"");t.data.data[a].data=s.split(","),t.data.data[a].data_format=e.device.data_format}e.fetchdata=t.data.data;for(var n=0;n<e.fetchdata.length;n++)delete e.fetchdata[n].company_id,delete e.fetchdata[n].sensor_id,delete e.fetchdata[n].device_id;for(var o,l=e.getBeforeDate(0),c=e.sliceDataArray(l),d=c[0].data_format[0].name,u=0;u<c[0].data_format.length;u++)c[0].data_format[u].name===d&&(o=u);for(var m=[],p=0;p<c.length;p++){var _={name:"",value:[]};_.name=c[p].time,_.value.push(c[p].time),_.value.push(parseInt(c[p].data[o])),m.push(_)}e.chartData=m.sort((function(e,t){return e.name>t.name?1:-1}));for(var h=[],f=0,g=e.chartData[0].value[1],v=e.chartData[0].value[1],b=0;b<e.chartData.length;b++)f+=e.chartData[b].value[1],g<e.chartData[b].value[1]&&(g=e.chartData[b].value[1]),v>e.chartData[b].value[1]&&(v=e.chartData[b].value[1]);f/=e.chartData.length,f=f.toFixed(2),h.push(f),h.push(g),h.push(v),e.newchartData=h})).catch((function(e){}))},sliceDataArray:function(e){for(var t=this,a=[],i=0;i<t.fetchdata.length;i++){var r=t.fetchdata[i].time.slice(0,10);r===e&&a.push(t.fetchdata[i])}return a},getChange:function(e){var t=this;t.value=e;var a,i=e,r=t.sliceDataArray(i);t.length=r.length,0===t.length&&(t.chartData=[],t.newchartData=[]);for(var s=0;s<r[0].data_format.length;s++)r[0].data_format[s].name===t.val&&(a=s);for(var n=[],o=0;o<r.length;o++){var l={name:"",value:[]};l.name=r[o].time,l.value.push(r[o].time),l.value.push(parseInt(r[o].data[a])),n.push(l)}t.chartData=n.sort((function(e,t){return e.name>t.name?1:-1})),t.chartData2=n.sort((function(e,t){return e.name>t.name?1:-1}));for(var c=[],d=0,u=t.chartData[0].value[1],m=t.chartData[0].value[1],p=0;p<t.chartData.length;p++)d+=t.chartData[p].value[1],u<t.chartData[p].value[1]&&(u=t.chartData[p].value[1]),m>t.chartData[p].value[1]&&(m=t.chartData[p].value[1]);d/=t.chartData.length,d=d.toFixed(2),c.push(d),c.push(u),c.push(m),t.newchartData=c},getType:function(e){var t=this;t.val=e;for(var a,i=t.sliceDataArray(t.value),r=e,s=0;s<i[0].data_format.length;s++)i[0].data_format[s].name===r&&(a=s);for(var n=[],o=0;o<i.length;o++){var l={name:"",value:[]};l.name=i[o].time,l.value.push(i[o].time),l.value.push(parseInt(i[o].data[a])),n.push(l)}t.chartData=n.sort((function(e,t){return e.name>t.name?1:-1})),t.chartData2=n.sort((function(e,t){return e.name>t.name?1:-1}));for(var c=[],d=0,u=t.chartData[0].value[1],m=t.chartData[0].value[1],p=0;p<t.chartData.length;p++)d+=t.chartData[p].value[1],u<t.chartData[p].value[1]&&(u=t.chartData[p].value[1]),m>t.chartData[p].value[1]&&(m=t.chartData[p].value[1]);d/=t.chartData.length,d=d.toFixed(2),c.push(d),c.push(u),c.push(m),t.newchartData=c},drawChart:function(e){var t=this.$echarts.init(document.getElementById(e)),a=this.chartData,i={title:{},tooltip:{trigger:"axis",formatter:function(e){e=e[0];var t=new Date(e.name),a=t.getHours(),i=t.getMinutes(),r=t.getSeconds();a<10&&(a="0"+a),i<10&&(i="0"+i),r<10&&(r="0"+r);var s=a+":"+i+":"+r;return t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate()+"/"+s+" - "+e.value[1]},axisPointer:{animation:!1}},xAxis:{type:"time",splitLine:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],axisLine:{show:!0,lineStyle:{width:1}}},series:[{type:"line",showSymbol:!1,areaStyle:{},hoverAnimation:!1,data:a}],dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]};t.setOption(i),window.addEventListener("resize",(function(){t&&t.resize()}))},drawChart2:function(e){var t=this.$echarts.init(document.getElementById(e)),a={tooltip:{},xAxis:{type:"category",data:["均值","极大值","极小值"]},yAxis:{type:"value"},series:[{data:this.newchartData,type:"bar",itemStyle:{normal:{label:{show:!0,position:"top",textStyle:{color:"black",fontSize:16}}}}}]};t.setOption(a),window.addEventListener("resize",(function(){t&&t.resize()}))}},mounted:function(){var e=this;this.$nextTick((function(){setTimeout((function(){e.drawChart("linechart1"),e.drawChart2("linechart2")}),300)}))},beforeDestroy:function(){this.endMqtt()}},gt=ft,vt=(a("1b75"),Object(n["a"])(gt,mt,pt,!1,null,"71c675e4",null)),bt=vt.exports,yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",{attrs:{to:{name:"DataInformation"}}},[e._v("数据概览")]),a("el-breadcrumb-item",[e._v("网关概览详情")])],1),a("div",{staticClass:"ViewDetails"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("网关概览详情")]),a("div",{staticClass:"panel-body",staticStyle:{height:"90%","overflow-x":"hidden"}},["3"===e.modal?a("el-card",[a("el-table",{staticStyle:{width:"981px"},attrs:{data:e.companyList,stripe:"",border:"",title:"点击获取该公司网关列表"},on:{"row-click":e.GetCompany}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"280px"}}),a("el-table-column",{attrs:{prop:"company_name",label:"公司名称",width:"700px"}})],1),e.gatewayList.length>0?a("el-table",{staticStyle:{width:"981px"},attrs:{data:e.gatewayList,stripe:"",border:"",title:"点击获取该网关的时序设备数据"},on:{"row-click":e.GetChart}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"60px"}}),a("el-table-column",{attrs:{prop:"device_name",label:"设备名称",width:"200px"}}),a("el-table-column",{attrs:{prop:"device_id",label:"设备id",width:"200px"}}),a("el-table-column",{attrs:{prop:"dismiss",label:"设备状态",width:"200px"}}),a("el-table-column",{attrs:{prop:"company",label:"设备工厂",width:"200px"}}),a("el-table-column",{attrs:{label:"注册网关",width:"120px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"未注册网关可点击此按钮注册",placement:"top-start",enterable:!1}},["待注册"===t.row.dismiss?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){return e.Register(t.row)}}}):e._e()],1)]}}],null,!1,331757021)})],1):e._e(),a("div",{staticStyle:{width:"800px",height:"300px","padding-left":"80px","margin-top":"50px"},attrs:{id:"EchartsView"}})],1):e._e(),"2"===e.modal?a("el-card",[a("el-button",{staticStyle:{"margin-left":"10px","margin-bottom":"10px",float:"right","margin-right":"55px"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" 添加网关 ")]),a("el-dialog",{attrs:{title:"添加网关",visible:e.dialogVisible,width:"3","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"网关名称",prop:"device_name"}},[a("el-input",{model:{value:e.addForm.device_name,callback:function(t){e.$set(e.addForm,"device_name",t)},expression:"addForm.device_name"}})],1)],1),a("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"网关密码",prop:"password"}},[a("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1,e.Adding()}}},[e._v("确 定")])],1)],1),a("el-table",{staticStyle:{width:"981px"},attrs:{data:e.gatewayList,stripe:"",border:"",title:"点击获取该网关的时序设备数据"},on:{"row-click":e.GetChart}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"80px"}}),a("el-table-column",{attrs:{prop:"device_name",label:"设备名称",width:"225px"}}),a("el-table-column",{attrs:{prop:"device_id",label:"设备id",width:"225px"}}),a("el-table-column",{attrs:{prop:"dismiss",label:"设备状态",width:"225px"}}),a("el-table-column",{attrs:{prop:"company",label:"设备工厂",width:"225px"}})],1),a("div",{staticStyle:{width:"800px",height:"300px","padding-left":"80px","margin-top":"50px"},attrs:{id:"EchartsView"}})],1):e._e(),"1"===e.modal?a("el-card",[a("el-table",{staticStyle:{width:"981px"},attrs:{data:e.gatewayList,stripe:"",border:"",title:"点击获取该网关的时序设备数据"},on:{"row-click":e.GetChart}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"80px"}}),a("el-table-column",{attrs:{prop:"device_name",label:"设备名称",width:"225px"}}),a("el-table-column",{attrs:{prop:"device_id",label:"设备id",width:"225px"}}),a("el-table-column",{attrs:{prop:"dismiss",label:"设备状态",width:"225px"}}),a("el-table-column",{attrs:{prop:"company",label:"设备工厂",width:"225px"}})],1),a("div",{staticStyle:{width:"800px",height:"300px","padding-left":"80px","margin-top":"50px"},attrs:{id:"EchartsView"}})],1):e._e()],1)],1)],1)},Dt=[],wt={name:"ViewDetails",data:function(){return{gatewayList:[],companyList:[],dataList:[],deviceidList:[],datanumList:[],deviceID:"",userID:"",token:"",companyID:"",modal:"",deviceid:"",tag:"0",companyID1:"",dialogVisible:!1,addForm:{device_name:"",password:""},addFormRules:{device_name:[{required:!0,message:"请输入网关名称",trigger:"blur"},{min:1,max:40,message:"网关名称的长度在1~40个字符区间",trigger:"blur"}],password:[{required:!0,message:"请输入网关密码",trigger:"blur"},{min:1,max:10,message:"网关密码的长度在1~10个字符区间",trigger:"blur"}]}}},created:function(){this.token=O.a.get("token"),this.userID=O.a.get("user_id"),this.modal=O.a.get("modal"),this.companyID=O.a.get("company_id"),"3"===this.modal?this.fetchCData():this.fetchGData()},methods:{GetChart:function(e){var t=this;t.deviceID=e.device_id,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"028",user_id:t.userID,company_id:t.companyID,token:t.token}}).then((function(e){t.dataList=e.data.data;for(var a=0;a<t.dataList.length;a++)t.dataList[a].net_id===t.deviceID&&(t.deviceidList.push(t.dataList[a].device_id),t.datanumList.push(t.dataList[a].dataNumber),t.tag="1");if("0"===t.tag)t.deviceidList=[],t.datanumList=[],alert("该网关下没有设备");else{var i=t.$echarts.init(document.getElementById("EchartsView")),r={title:{text:"最近24小时"},tooltip:{},legend:{data:["数据量"]},xAxis:{name:"设备id",data:t.deviceidList},yAxis:{},series:[{name:"数据量",type:"bar",data:t.datanumList}]};i.setOption(r),t.tag="0",t.Gotohere()}})).catch((function(e){}))},Gotohere:function(){this.$el.querySelector("#EchartsView").scrollIntoView({block:"start",behavior:"smooth"})},fetchCData:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"011",user_id:e.userID,token:e.token}}).then((function(t){e.companyList=t.data.data})).catch((function(e){}))},fetchGData:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"003",user_id:e.userID,company_id:e.companyID,token:e.token}}).then((function(t){e.gatewayList=t.data.data,e.ChangeDismiss()})).catch((function(e){}))},ChangeDismiss:function(){for(var e=this,t=0;t<e.gatewayList.length;t++)"1"===e.gatewayList[t].dismiss?e.gatewayList[t].dismiss="离线":"2"===e.gatewayList[t].dismiss?e.gatewayList[t].dismiss="在线":e.gatewayList[t].dismiss="待注册"},GetCompany:function(e){var t=this;t.companyID=e.company_id,t.fetchGData()},Register:function(e){var t=this;t.deviceid=e.device_id,t.companyID1=e.company,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"009",user_id:t.userID,company_id:t.companyID1,token:t.token,device_id:t.deviceid}}).then((function(e){})).catch((function(e){})),alert("已成功注册！请刷新页面。")},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},Adding:function(){var e=this,t=a("6c27").sha256,i=t(e.addForm.password);_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"008",user_id:e.userID,company_id:e.companyID,token:e.token,device_name:e.addForm.device_name,password:i}}).then((function(e){})).catch((function(e){}))}}},kt=wt,xt=(a("6587"),Object(n["a"])(kt,yt,Dt,!1,null,"29cff868",null)),Ct=xt.exports,Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",{attrs:{to:{name:"DataInformation"}}},[e._v("数据概览")]),a("el-breadcrumb-item",[e._v("平台概览详情")])],1),a("div",{staticClass:"ViewDetails2"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("平台概览详情")]),a("el-card",[a("el-row",{attrs:{gutter:"8"}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入内容"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)],1),a("el-table",{staticStyle:{width:"901px"},attrs:{data:e.platformlist,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"100px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"400px"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"400px"}})],1)],1)],1)],1)},It=[],Et={name:"ViewDetails2",data:function(){return{platformlist:[{name:"数据流1",status:"running"},{name:"数据流2",status:"unrunning"},{name:"数据流3",status:"alert"}]}},methods:{}},St=Et,Ot=(a("da77"),Object(n["a"])(St,Mt,It,!1,null,"700a3b9c",null)),Tt=Ot.exports,jt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("个人详情")])],1),a("div",{staticClass:"PersonnalDetails"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("个人详情")]),a("div",{staticClass:"panel-body",staticStyle:{height:"90%","overflow-x":"hidden"}},["1"===e.modal?a("el-card",[a("div",{staticStyle:{"margin-left":"10px"}},[a("h4",[e._v("用户id："+e._s(e.userID))]),a("h4",[e._v("所在工厂："+e._s(e.companyID))])]),a("el-button",{staticStyle:{"margin-left":"10px","margin-bottom":"10px",float:"left","margin-right":"55px"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" 申请加入工厂 ")]),a("el-dialog",{attrs:{title:"申请加入工厂",visible:e.dialogVisible,width:"3","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"工厂id",prop:"factory_id"}},[a("el-input",{model:{value:e.addForm.factory_id,callback:function(t){e.$set(e.addForm,"factory_id",t)},expression:"addForm.factory_id"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1,e.Applying()}}},[e._v("确 定")])],1)],1)],1):e._e(),"2"===e.modal?a("el-card",[a("div",{staticStyle:{"margin-left":"10px"}},[a("h4",[e._v("用户id："+e._s(e.userID))]),a("h4",[e._v("所在工厂："+e._s(e.companyID))]),a("h4",[e._v("申请人员列表：")])]),a("el-button",{staticStyle:{width:"200px"},attrs:{stripe:"",border:"",title:"点击获取申请人员列表"},on:{click:e.fetchData1}},[e._v(" 申请列表 ")]),a("el-button",{staticStyle:{width:"200px"},attrs:{stripe:"",border:"",title:"点击获取工厂用户列表"},on:{click:e.fetchData2}},[e._v(" 用户列表 ")]),e.requestList.length>0?a("el-table",{staticStyle:{width:"981px"},attrs:{data:e.requestList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"80px"}}),a("el-table-column",{attrs:{prop:"company_id",label:"工厂id",width:"225px"}}),a("el-table-column",{attrs:{prop:"user_id",label:"用户id",width:"225px"}}),a("el-table-column",{attrs:{prop:"dismiss",label:"状态",width:"225px"}}),a("el-table-column",{attrs:{prop:"",label:"处理申请",width:"225px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"申请中的用户点此按钮同意",placement:"top-start",enterable:!1}},["申请中"===t.row.dismiss?a("el-button",{attrs:{type:"success",icon:"el-icon-check",size:"small"},on:{click:function(a){return e.Register1(t.row)}}}):e._e()],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"申请中的用户点此按钮拒绝",placement:"top-start",enterable:!1}},["申请中"===t.row.dismiss?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.Register2(t.row)}}}):e._e()],1)]}}],null,!1,3118057372)})],1):e._e(),e.personList.length>0?a("el-table",{staticStyle:{width:"981px"},attrs:{data:e.personList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"50px"}}),a("el-table-column",{attrs:{prop:"company",label:"工厂id",width:"75px"}}),a("el-table-column",{attrs:{prop:"user_id",label:"用户id",width:"100px"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"100px"}}),a("el-table-column",{attrs:{prop:"modal",label:"权限",width:"100px"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"100px"}}),a("el-table-column",{attrs:{prop:"phoneNumber",label:"电话号码",width:"150px"}}),a("el-table-column",{attrs:{prop:"otherplat",label:"其它平台",width:"100px"}}),a("el-table-column",{attrs:{prop:"dismiss",label:"状态",width:"75px"}}),a("el-table-column",{attrs:{prop:"",label:"操作处理",width:"130px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点此按钮删除工厂用户",placement:"top-start",enterable:!1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.Register4(t.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点此按钮升级用户权限",placement:"top-start",enterable:!1}},["工厂管理员"!==t.row.modal?a("el-button",{attrs:{type:"success",icon:"el-icon-check",size:"small"},on:{click:function(a){return e.Register3(t.row)}}}):e._e()],1)]}}],null,!1,2004853929)})],1):e._e()],1):e._e(),"3"===e.modal?a("el-card",[a("div",{staticStyle:{"margin-left":"10px"}},[a("h4",[e._v("系统管理员")])]),a("el-button",{staticStyle:{width:"200px"},attrs:{stripe:"",border:"",title:"点击获取所有用户列表"},on:{click:e.fetchData3}},[e._v(" 用户列表 ")]),e.allperList.length>0?a("el-table",{staticStyle:{width:"981px"},attrs:{data:e.allperList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"50px"}}),a("el-table-column",{attrs:{prop:"company",label:"工厂id",width:"70px"}}),a("el-table-column",{attrs:{prop:"user_id",label:"用户id",width:"100px"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"100px"}}),a("el-table-column",{attrs:{prop:"modal",label:"权限",width:"75px"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"100px"}}),a("el-table-column",{attrs:{prop:"phoneNumber",label:"电话号码",width:"150px"}}),a("el-table-column",{attrs:{prop:"otherplat",label:"其它平台",width:"80px"}}),a("el-table-column",{attrs:{prop:"dismiss",label:"状态",width:"75px"}}),a("el-table-column",{attrs:{prop:"",label:"操作处理",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击此按钮升级用户为系统管理员",placement:"top-start",enterable:!1}},["系统管理员"!==t.row.modal?a("el-button",{attrs:{type:"success",icon:"el-icon-check",size:"small"},on:{click:function(a){return e.Register5(t.row)}}}):e._e()],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击此按钮升级用户为工厂管理员",placement:"top-start",enterable:!1}},["0"!==t.row.company&&"普通用户"===t.row.modal?a("el-button",{attrs:{type:"warning",icon:"el-icon-check",size:"small"},on:{click:function(a){return e.Register3(t.row)}}}):e._e()],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击此按钮初始化用户",placement:"top-start",enterable:!1}},["0"!==t.row.company?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.Register4(t.row)}}}):e._e()],1)]}}],null,!1,438806853)})],1):e._e()],1):e._e()],1)],1)],1)},Pt=[],Lt={name:"PersonnalDetails",data:function(){return{token:"",userID:"",modal:"",companyID:"",requestList:[],personList:[],allreqList:[],allperList:[],requestID:"",companyID1:"",tuserID:"",dialogVisible:!1,addForm:{factory_id:""},addFormRules:{factory_id:[{required:!0,message:"请输入请求加入的工厂id",trigger:"blur"},{min:1,max:11,message:"工厂id的长度在1~11个字符区间",trigger:"blur"}]}}},created:function(){this.token=O.a.get("token"),this.userID=O.a.get("user_id"),this.modal=O.a.get("modal"),this.companyID=O.a.get("company_id")},methods:{fetchData1:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"014",user_id:e.userID,token:e.token,company_id:e.companyID}}).then((function(t){e.requestList=t.data.data,e.ChangeDismiss1()})).catch((function(e){}))},ChangeDismiss1:function(){for(var e=this,t=0;t<e.requestList.length;t++)"0"===e.requestList[t].dismiss?e.requestList[t].dismiss="申请失败":"1"===e.requestList[t].dismiss?e.requestList[t].dismiss="申请中":e.requestList[t].dismiss="通过"},Applying:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"013",user_id:e.userID,token:e.token,company_id:e.addForm.factory_id}}).then((function(e){})).catch((function(e){}))},Register1:function(e){var t=this;t.requestID=e.request_id,t.companyID1=e.company_id,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"015",user_id:t.userID,company_id:t.companyID1,token:t.token,type:"1",request_id:t.requestID}}).then((function(e){})).catch((function(e){})),alert("已通过申请！请刷新页面。")},Register2:function(e){var t=this;t.requestID=e.request_id,t.companyID1=e.company_id,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"015",user_id:t.userID,company_id:t.companyID1,token:t.token,type:"0",request_id:t.requestID}}).then((function(e){})).catch((function(e){})),alert("已拒绝申请！请刷新页面。")},fetchData2:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"016",user_id:e.userID,token:e.token,company_id:e.companyID}}).then((function(t){e.personList=t.data.data,e.ChangeDismiss2()})).catch((function(e){}))},ChangeDismiss2:function(){for(var e=this,t=0;t<e.personList.length;t++)e.personList[t].dismiss="通过","1"===e.personList[t].modal?e.personList[t].modal="普通用户":"2"===e.personList[t].modal&&(e.personList[t].modal="工厂管理员")},Register3:function(e){var t=this;t.tuserID=e.user_id,t.companyID1=e.company,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"017",user_id:t.userID,company_id:t.companyID1,token:t.token,type:"1",target_user_id:t.tuserID}}).then((function(e){})).catch((function(e){})),alert("已升级权限！请刷新页面。")},Register4:function(e){var t=this;t.tuserID=e.user_id,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"018",user_id:t.userID,company_id:t.companyID,token:t.token,target_user_id:t.tuserID}}).then((function(e){})).catch((function(e){})),alert("已删除该用户！请刷新页面。")},fetchData3:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"022",user_id:e.userID,token:e.token}}).then((function(t){e.allperList=t.data.data,e.ChangeDismiss3()})).catch((function(e){}))},ChangeDismiss3:function(){for(var e=this,t=0;t<e.allperList.length;t++)e.allperList[t].dismiss="通过","1"===e.allperList[t].modal?e.allperList[t].modal="普通用户":"2"===e.allperList[t].modal?e.allperList[t].modal="工厂管理员":e.allperList[t].modal="系统管理员"},Register5:function(e){var t=this;t.tuserID=e.user_id,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"017",user_id:t.userID,company_id:t.companyID,token:t.token,type:"2",target_user_id:t.tuserID}}).then((function(e){})).catch((function(e){})),alert("已升级权限！请刷新页面。")}}},At=Lt,Ft=(a("dab7"),Object(n["a"])(At,jt,Pt,!1,null,"0ac50f8e",null)),qt=Ft.exports,Rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("设置")])],1),a("div",{staticClass:"Settings"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("设置")]),a("el-card",[a("el-button",{staticStyle:{"margin-left":"10px","margin-bottom":"10px"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" 修改StreamSets密码 ")]),a("el-dialog",{attrs:{title:"修改StreamSets密码",visible:e.dialogVisible,width:"3","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"addFormRef",attrs:{model:e.addForm,rules:e.addFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"新密码",prop:"password"}},[a("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1,e.Changepassword()}}},[e._v("确 定")])],1)],1),a("br"),a("el-button",{staticStyle:{"margin-left":"10px","margin-bottom":"10px","margin-top":"10px"},on:{click:e.gotolink8}},[e._v(" 修改用户密码 ")]),a("br"),a("el-button",{staticStyle:{"margin-left":"10px","margin-bottom":"10px","margin-top":"10px"},on:{click:function(t){e.dialogVisible1=!0}}},[e._v(" 修改用户名 ")]),a("el-dialog",{attrs:{title:"修改用户名",visible:e.dialogVisible1,width:"3","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible1=t}}},[a("el-form",{ref:"addFormRef1",attrs:{model:e.addForm1,rules:e.addFormRules1,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"新用户名",prop:"username"}},[a("el-input",{model:{value:e.addForm1.username,callback:function(t){e.$set(e.addForm1,"username",t)},expression:"addForm1.username"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible1=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible1=!1,e.Changeusername()}}},[e._v("确 定")])],1)],1),a("br"),a("el-button",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-left":"10px"},on:{click:e.gotolink6}},[e._v(" 退出登录 ")])],1)],1)],1)},Bt=[],$t={name:"Settings",data:function(){return{token:"",userID:"",modal:"",companyID:"",dialogVisible:!1,dialogVisible1:!1,addForm:{password:""},addFormRules:{password:[{required:!0,message:"请输入新的StreamSets密码",trigger:"blur"},{min:6,max:18,message:"StreamSets密码的长度在6~18个字符区间",trigger:"blur"}]},addForm1:{username:""},addFormRules1:{username:[{required:!0,message:"请输入新的用户名",trigger:"blur"},{min:1,max:40,message:"用户名的长度在1~40个字符区间",trigger:"blur"}]}}},created:function(){this.token=O.a.get("token"),this.userID=O.a.get("user_id"),this.modal=O.a.get("modal"),this.companyID=O.a.get("company_id")},methods:{Changeusername:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"033",user_id:e.userID,token:e.token,username:e.addForm1.username}}).then((function(e){})).catch((function(e){}))},Changepassword:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"023",user_id:e.userID,token:e.token,password:e.addForm.password}}).then((function(e){})).catch((function(e){}))},gotolink6:function(){O.a.remove("token"),O.a.remove("user_id"),O.a.remove("modal"),O.a.remove("company_id"),this.$router.push({name:"Loading"})},gotolink8:function(){alert("即将进行页面跳转\n请前往登陆页面进行密码修改。"),O.a.remove("token"),O.a.remove("user_id"),O.a.remove("modal"),O.a.remove("company_id"),this.$router.push({name:"Loading"})}}},Ut=$t,zt=(a("cd62"),Object(n["a"])(Ut,Rt,Bt,!1,null,"0110f4d1",null)),Wt=zt.exports,Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[e._v("首页")]),a("el-breadcrumb-item",[e._v("设备地图")])],1),a("div",{staticClass:"DeviceMap"},[a("el-divider",{attrs:{"content-position":"left"}},[e._v("设备地图(设备总数："+e._s(e.devicenum)+", 工厂总数："+e._s(e.factorynum)+")")]),e._m(0)],1)],1)},Nt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"Show"},[a("div",{attrs:{id:"container1"}})])}],Vt=(a("a15b"),{name:"DeviceMap",data:function(){return{deviceList:[],alldevice:[],companyList:[],mycompany:{},map:"",infoWindow:"",devicenum:"",factorynum:"",marker:"",token:"",userID:"",companyID:"",modal:""}},created:function(){this.token=O.a.get("token"),this.userID=O.a.get("user_id"),this.companyID=O.a.get("company_id"),this.modal=O.a.get("modal"),"3"===this.modal?this.fetchData():this.fetchaData()},mounted:function(){this.loadmap()},methods:{changeTime:function(){for(var e=this,t=0;t<e.companyList.length;t++)e.companyList[t].create_time=e.timestampToTime(e.companyList[t].create_time)},timestampToTime:function(e){var t=new Date(parseInt(e)),a=t.getFullYear(),i=t.getMonth()+1,r=t.getDate(),s=t.getHours(),n=t.getMinutes(),o=t.getSeconds();return a+"/"+i+"/"+r+" "+s+":"+n+":"+o},loadmap:function(){this.map=new AMap.Map("container1",{center:[118.792221,31.938254],zoom:8})},fetchData:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"011",user_id:e.userID,token:e.token}}).then((function(t){e.companyList=t.data.data,e.changeTime(),e.putCData(),e.fetchDData()})).catch((function(e){}))},fetchDData:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"019",user_id:e.userID,token:e.token}}).then((function(t){e.alldevice=t.data.data,e.devicenum=e.alldevice.length})).catch((function(e){}))},putCData:function(){var e=this;e.infoWindow=new AMap.InfoWindow({offset:new AMap.Pixel(0,-20)});for(var t=0;t<e.companyList.length;t++){var i=[];i.push("<h4>"+e.companyList[t].company_name+"</h4>"),i.push("<p>公司ID:"+e.companyList[t].company_id+"</p>"),i.push("<p>创建时间:"+e.companyList[t].create_time+"</p>"),e.marker=new AMap.Marker({position:new AMap.LngLat(e.companyList[t].longitude,e.companyList[t].latitude),offset:new AMap.Pixel(-10,-10),icon:new AMap.Icon({image:a("6346"),size:new AMap.Size(52,52),imageSize:new AMap.Size(32,32)}),title:e.companyList[t].company_name}),e.marker.content=i.join(""),e.marker.on("click",e.markerClick),e.marker.emit("click",{target:e.marker}),e.marker.setMap(e.map)}e.factorynum=e.companyList.length},markerClick:function(e){var t=this;t.infoWindow.setContent(e.target.content),t.infoWindow.open(t.map,e.target.getPosition())},fetchaData:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"021",user_id:e.userID,token:e.token,company_id:e.companyID}}).then((function(t){e.mycompany=t.data.data,e.putGData()})).catch((function(e){})),"0"===e.companyID?e.factorynum="0":e.factorynum="1"},putGData:function(){var e=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"007",user_id:e.userID,token:e.token,company_id:e.companyID}}).then((function(t){e.deviceList=t.data.data,e.devicenum=e.deviceList.length})).catch((function(e){})),e.marker=new AMap.Marker({position:new AMap.LngLat(e.mycompany.longitude,e.mycompany.latitude),offset:new AMap.Pixel(-10,-10),icon:new AMap.Icon({image:a("6346"),size:new AMap.Size(52,52),imageSize:new AMap.Size(32,32)}),title:e.mycompany.company_name}),e.infoWindow=new AMap.InfoWindow({offset:new AMap.Pixel(0,-20)});var t=[];t.push("<h4>"+e.mycompany.company_name+"</h4>"),t.push("<p>公司ID:"+e.mycompany.company_id+"</p>"),t.push("<p>创建时间:"+e.mycompany.create_time+"</p>"),e.marker.content=t.join(""),e.marker.on("click",e.markerClick),e.marker.emit("click",{target:e.marker}),e.marker.setMap(e.map)}}}),Gt=Vt,Ht=(a("a309"),Object(n["a"])(Gt,Kt,Nt,!1,null,null,null)),Jt=Ht.exports;i["default"].use(d["a"]);var Yt=[{path:"/",name:"Loading",component:y},{path:"/register",name:"Register",component:M},{path:"/mainPage",name:"MainPage",children:[{path:"dataInformation",name:"DataInformation",component:A},{path:"dataInformation/viewDetails",name:"ViewDetails",component:Ct},{path:"dataInformation/viewDetails2",name:"ViewDetails2",component:Tt},{path:"personnalDetails",name:"PersonnalDetails",component:qt},{path:"settings",name:"Settings",component:Wt},{path:"map",name:"Map",component:$},{path:"devicemap",name:"DeviceMap",component:Jt},{path:"productionManage",name:"ProductionManage",component:Oe},{path:"productionManage/addProduction",name:"AddProduction",component:ve,props:!0},{path:"productionManage/fixProduction",name:"FixProduction",component:xe,props:!0},{path:"deviceManage",name:"DeviceManage",props:!0,component:V},{path:"deviceManage/deviceInformation",name:"DeviceInformation",component:ee,props:!0},{path:"deviceManage/addCompony",name:"AddCompony",component:ne,props:!0},{path:"deviceManage/addDevice",name:"AddDevice",component:me,props:!0},{path:"foreData",name:"ForeData",component:Ue},{path:"dataFlout",name:"DataFlout",component:Ae},{path:"dataCheck",name:"DataCheck",component:Ge},{path:"dashBoard",name:"DashBoard",component:Qe},{path:"dashBoard/deviceList",name:"DeviceList",component:ut},{path:"dashBoard/deviceList/dataBoard",name:"DataBoard",component:bt},{path:"dataMonitor",name:"DataMonitor",component:st}],component:function(){return a.e("about").then(a.bind(null,"4385"))}}],Zt=new d["a"]({mode:"hash",base:"",routes:Yt});Zt.beforeEach((function(e,t,a){if("/"===e.path||"/register"===e.path)a();else{var i=O.a.get("token");"null"===i||""===i||void 0===i?a("/"):a()}}));var Xt=Zt,Qt=a("2f62");i["default"].use(Qt["a"]);var ea=new Qt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),ta=a("5c96"),aa=a.n(ta),ia=(a("0fae"),a("f24c"),a("2106")),ra=a.n(ia),sa=a("8f9b"),na=a.n(sa);i["default"].prototype.$echarts=T,i["default"].use(na.a),i["default"].use(ra.a,_.a),i["default"].prototype.$axios=_.a,na.a.initAMapApiLoader({key:"e2df70d22396a3f82829ecc392bb0d32",plugin:["AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PlaceSearch","AMap.Geolocation","AMap.Geocoder","AMap.DistrictSearch","AMap.Maker"],v:"1.4.4",uiVersion:"1.0"}),i["default"].config.productionTip=!1,i["default"].use(aa.a),new i["default"]({router:Xt,store:ea,render:function(e){return e(c)}}).$mount("#app")},cd62:function(e,t,a){"use strict";a("1734")},da77:function(e,t,a){"use strict";a("dcc2")},da82:function(e,t,a){},dab7:function(e,t,a){"use strict";a("3d1f")},dcc2:function(e,t,a){},dcf2:function(e,t,a){"use strict";a("7878")},e314:function(e,t,a){},e5ff:function(e,t,a){"use strict";a("9baf")},e901:function(e,t,a){},ea5a:function(e,t,a){"use strict";a("bbc2")},ebbd:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a434"),core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4e82"),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("1276"),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("841c"),core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_7__),echarts__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("313e"),axios__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_9__),qs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("4328"),qs__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_10__),js_cookie__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("852e"),js_cookie__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_11__),mqtt__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("e7fc"),mqtt__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(mqtt__WEBPACK_IMPORTED_MODULE_12__);function Fre2(e,t){var a=-1,i=0,r="",s=0,n=0;for(n=0;n<e.length;n++)if(n%t===0){if(n-a!==1&&(s=i/(n-a),e.splice(a,n-a,{name:r,value:[r,s]}),n>=e.length))break;a=n,i=parseFloat(e[n].value[1]),r=e[n].name}else i+=parseFloat(e[n].value[1]);return n-a!==1&&n<e.length&&(s=i/(n-a),e.splice(a,n-a,{name:r,value:[r,s]})),e}function SubFre(e){var t=-1,a=0,i="",r=0,s=0;for(s=0;s<e.length;s++)if(e[s].name!==i){if(s-t!==1&&(r=a/(s-t),e.splice(t,s-t,{name:i,value:[i,r]}),s>=e.length))break;t=s,a=parseFloat(e[s].value[1]),i=e[s].name}else a+=parseFloat(e[s].value[1]);return s-t!==1&&s<e.length&&(r=a/(s-t),e.splice(t,s-t,{name:i,value:[i,r]})),e}function FunctionData(e,t){var a=0,i=0,r=0,s=-1/0,n=1/0;if("求和"===e){for(i=0,a=0;a<t.length;a++)i+=parseFloat(t[a].value[1]);return i}if("求方差"===e){for(i=0,a=0;a<t.length;a++)i+=parseFloat(t[a].value[1]);for(r=i/t.length,a=0;a<t.length;a++)i+=Math.pow(r-parseFloat(t[a].value[1]),2);return Math.sqrt(i/t.length,2)}if("求平均"===e){for(i=0,a=0;a<t.length;a++)i+=parseFloat(t[a].value[1]);return r=i/t.length,r}if("求最大"===e){for(a=0;a<t.length;a++)parseFloat(t[a].value[1])>s&&(s=parseFloat(t[a].value[1]));return s}if("求最小"===e){for(a=0;a<t.length;a++)parseFloat(t[a].value[1])<n&&(n=parseFloat(t[a].value[1]));return n}return NaN}function CompareDate(e,t){return new Date(e.replace(/-/g,"/"))>new Date(t.replace(/-/g,"/"))}function compare(e,t){var a=e.name,i=t.name;return new Date(a.replace(/-/g,"/"))>new Date(i.replace(/-/g,"/"))?-1:new Date(i.replace(/-/g,"/"))>new Date(a.replace(/-/g,"/"))?1:0}function CheckDate(e,t,a){for(var i=0;i<a.length;){if(i>=a.length)break;CompareDate(e,a[i].name)||CompareDate(a[i].name,t)?a.splice(i,1):i++}return a}function TargetData(e,t){var a=0,i=0,r="",s="";e=e.replace("请输入指标eg:",""),e=e.replace(/\n/g,"");var n=e.split(";");for(a=0;a<n.length;a++)if(-1!==n[a].search("temperature>="))for(r=n[a],r=r.replace("temperature>=",""),r=parseFloat(r),i=0;i<t.temperature.length;){if(i>=t.temperature.length)break;s=t.temperature[i].value[1],s=parseFloat(s),s<r?t.temperature.splice(i,1):i++}else if(-1!==n[a].search("temperature>")&&-1===n[a].search("="))for(r=n[a].replace("temperature>",""),r=parseFloat(r),i=0;i<t.temperature.length;){if(i>=t.temperature.length)break;s=t.temperature[i].value[1],s=parseFloat(s),s<=r?t.temperature.splice(i,1):i++}else if(-1!==n[a].search("temperature<="))for(r=n[a].replace("temperature<=",""),r=parseFloat(r),i=0;i<t.temperature.length;){if(i>=t.temperature.length)break;s=t.temperature[i].value[1],s=parseFloat(s),s>r?t.temperature.splice(i,1):i++}else if(-1!==n[a].search("temperature<")&&-1===n[a].search("="))for(r=n[a].replace("temperature<",""),r=parseFloat(r),i=0;i<t.temperature.length;){if(i>=t.temperature.length)break;s=t.temperature[i].value[1],s=parseFloat(s),s>=r?t.temperature.splice(i,1):i++}else if(-1!==n[a].search("humidity>="))for(r=n[a].replace("humidity>=",""),r=parseFloat(r),i=0;i<t.humidity.length;){if(i>=t.humidity.length)break;s=t.humidity[i].value[1],s=parseFloat(s),s<r?t.humidity.splice(i,1):i++}else if(-1!==n[a].search("humidity>")&&-1===n[a].search("="))for(r=n[a].replace("humidity>",""),r=parseFloat(r),i=0;i<t.humidity.length;){if(i>=t.humidity.length)break;s=t.humidity[i].value[1],s=parseFloat(s),s<=r?t.humidity.splice(i,1):i++}else if(-1!==n[a].search("humidity<="))for(r=n[a].replace("humidity<=",""),r=parseFloat(r),i=0;i<t.humidity.length;){if(i>=t.humidity.length)break;s=t.humidity[i].value[1],s=parseFloat(s),s>r?t.humidity.splice(i,1):i++}else if(-1!==n[a].search("humidity<")&&-1===n[a].search("="))for(r=n[a].replace("humidity<",""),r=parseFloat(r),i=0;i<t.humidity.length;){if(i>=t.humidity.length)break;s=t.humidity[i].value[1],s=parseFloat(s),s>=r?t.humidity.splice(i,1):i++}else if(-1!==n[a].search("voltage>="))for(r=n[a].replace("voltage>=",""),r=parseFloat(r),i=0;i<t.voltage.length;){if(i>=t.voltage.length)break;s=t.voltage[i].value[1],s=parseFloat(s),s<r?t.voltage.splice(i,1):i++}else if(-1!==n[a].search("voltage>")&&-1===n[a].search("="))for(r=n[a].replace("voltage>",""),r=parseFloat(r),i=0;i<t.voltage.length;){if(i>=t.voltage.length)break;s=t.voltage[i].value[1],s=parseFloat(s),s<=r?t.voltage.splice(i,1):i++}else if(-1!==n[a].search("voltage<="))for(r=n[a].replace("voltage<=",""),r=parseFloat(r),i=0;i<t.voltage.length;){if(i>=t.voltage.length)break;s=t.voltage[i].value[1],s=parseFloat(s),s>r?t.voltage.splice(i,1):i++}else if(-1!==n[a].search("voltage<")&&-1===n[a].search("="))for(r=n[a].replace("voltage<",""),r=parseFloat(r),i=0;i<t.voltage.length;){if(i>=t.voltage.length)break;s=t.voltage[i].value[1],s=parseFloat(s),s>=r?t.voltage.splice(i,1):i++}else if(-1!==n[a].search("electricity>="))for(r=n[a].replace("electricity>=",""),r=parseFloat(r),i=0;i<t.electricity.length;){if(i>=t.electricity.length)break;s=t.electricity[i].value[1],s=parseFloat(s),s<r?t.electricity.splice(i,1):i++}else if(-1!==n[a].search("electricity>")&&-1===n[a].search("="))for(r=n[a].replace("electricity>",""),r=parseFloat(r),i=0;i<t.electricity.length;){if(i>=t.electricity.length)break;s=t.electricity[i].value[1],s=parseFloat(s),s<=r?t.electricity.splice(i,1):i++}else if(-1!==n[a].search("electricity<="))for(r=n[a].replace("electricity<=",""),r=parseFloat(r),i=0;i<t.electricity.length;){if(i>=t.electricity.length)break;s=t.electricity[i].value[1],s=parseFloat(s),s>r?t.electricity.splice(i,1):i++}else if(-1!==n[a].search("electricity<")&&-1===n[a].search("="))for(r=n[a].replace("electricity<",""),r=parseFloat(r),i=0;i<t.electricity.length;){if(i>=t.electricity.length)break;s=t.electricity[i].value[1],s=parseFloat(s),s>=r?t.electricity.splice(i,1):i++}return t}function TimeChangeString(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+(e.getHours()>=10?e.getHours():"0"+e.getHours())+":"+(e.getMinutes()>=10?e.getMinutes():"0"+e.getMinutes())+":"+(e.getSeconds()>=10?e.getSeconds():"0"+e.getSeconds())}__webpack_exports__["a"]={data:function(){return{isType3:!1,tabName:"first",DataSource:[],SelcetDataSource:"选择数据源",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value2:[],time:"请选择",collapseName:[0,"last"],infor:[{target:"请输入指标eg:\ntemperature>=40;\ntemperature<20",function:"请选择聚合函数",filtration:[],underclocking:!1}],options:[{value:"求和",label:"求和"},{value:"求方差",label:"求方差"},{value:"求平均",label:"求平均"},{value:"求最大",label:"求最大"},{value:"求最小",label:"求最小"}],options_filtration:[{value:"默认",label:"默认"},{value:"temperature",label:"temperature"},{value:"humidity",label:"humidity"},{value:"voltage",label:"voltage"},{value:"electricity",label:"electricity"}],ProductionsInfor:[],DeviceInfor:[],Device:[]}},mounted:function mounted(){var user_id=js_cookie__WEBPACK_IMPORTED_MODULE_11___default.a.get("user_id"),token=js_cookie__WEBPACK_IMPORTED_MODULE_11___default.a.get("token"),company_id=js_cookie__WEBPACK_IMPORTED_MODULE_11___default.a.get("company_id"),ProductionsURL="https://site.maple.today/IOTplatform/ServerMain",ProductionsData={requestCode:"005",user_id:user_id,token:token,company_id:1},AXIOS=axios__WEBPACK_IMPORTED_MODULE_9___default.a.create({headers:{"Content-Type":"application/x-www-form-urlencoded"}}),_this=this;AXIOS.post(ProductionsURL,qs__WEBPACK_IMPORTED_MODULE_10___default.a.stringify(ProductionsData)).then((function(res){_this.ProductionsInfor=res.data.data;for(var i=0;i<_this.ProductionsInfor.length;i++){var DeviceURL="https://site.maple.today/IOTplatform/ServerMain",DeviceData={requestCode:"025",user_id:user_id,token:token,company_id:1,product_id:_this.ProductionsInfor[i].product_id};AXIOS.post(DeviceURL,qs__WEBPACK_IMPORTED_MODULE_10___default.a.stringify(DeviceData)).then((function(res){_this.DeviceInfor=res.data.data;for(var j=0;j<_this.DeviceInfor.length;j++){var url="https://site.maple.today/IOTplatform/ServerMain",postdata={requestCode:"027",user_id:user_id,token:token,company_id:1,device_id:_this.DeviceInfor[j].sensor_id};AXIOS.post(url,qs__WEBPACK_IMPORTED_MODULE_10___default.a.stringify(postdata)).then((function(res){var temp=res.data.data,temperature_seriesData=[],humidity_seriesData=[],voltage_seriesData=[],electricity_seriesData=[],device_id=qs__WEBPACK_IMPORTED_MODULE_10___default.a.parse(res.config.data).device_id;_this.DataSource.push("device_"+device_id);for(var k=0;k<temp.length;k++)for(var time=temp[k].time,arr=eval("("+temp[k].data+")"),temperature={},humidity={},voltage={},electricity={},l=0;l<arr.length;l++)0===l?(temperature={name:time,value:[time,arr[l]]},temperature_seriesData.push(temperature)):1===l?(humidity={name:time,value:[time,arr[l]]},humidity_seriesData.push(humidity)):2===l?(voltage={name:time,value:[time,arr[l]]},voltage_seriesData.push(voltage)):(electricity={name:time,value:[time,arr[l]]},electricity_seriesData.push(electricity));_this.Device.push({device_id:device_id,value:{temperature:temperature_seriesData,humidity:humidity_seriesData,voltage:voltage_seriesData,electricity:electricity_seriesData}})})).catch((function(e){}))}})).catch((function(e){}))}})).catch((function(e){}))},created:function(){"3"===js_cookie__WEBPACK_IMPORTED_MODULE_11___default.a.get("modal")&&(this.isType3=!0)},methods:{ChangeSource:function(e){this.SelcetDataSource=e},deletecol:function(e){this.infor.splice(e,1)},AddSearch:function(){this.infor.length>=25?alert("查询点过多"):(this.infor.push({target:"请输入指标eg:\ntemperature>=40;\ntemperature<20",function:"请选择聚合函数",filtration:[],underclocking:!1}),this.collapseName.push(this.infor.length-1))},SelectData:function(){for(var e=this,t="",a=0;a<e.Device.length;a++)if("device_"+e.Device[a].device_id===e.SelcetDataSource){t=JSON.parse(JSON.stringify(e.Device[a].value));break}t.temperature.sort(compare),t.humidity.sort(compare),t.voltage.sort(compare),t.electricity.sort(compare);var i=e.value2[0],r=e.value2[1];i=TimeChangeString(i),r=TimeChangeString(r),t.temperature=CheckDate(i,r,t.temperature),t.humidity=CheckDate(i,r,t.humidity),t.voltage=CheckDate(i,r,t.voltage),t.electricity=CheckDate(i,r,t.electricity);var s=[];for(a=0;a<e.infor.length;a++){var n=TargetData(e.infor[a].target,JSON.parse(JSON.stringify(t)));s.push(n)}var o=[];for(a=0;a<e.infor.length;a++){var l=FunctionData(e.infor[a].function,s[a].temperature),c=FunctionData(e.infor[a].function,s[a].humidity),d=FunctionData(e.infor[a].function,s[a].voltage),u=FunctionData(e.infor[a].function,s[a].electricity);o.push({temperature:l,humidity:c,voltage:d,electricity:u})}for(a=0;a<e.infor.length;a++)for(var m=0;m<e.infor[a].filtration.length;m++)"temperature"===e.infor[a].filtration[m]?s[a].temperature=[]:"humidity"===e.infor[a].filtration[m]?s[a].humidity=[]:"voltage"===e.infor[a].filtration[m]?s[a].voltage=[]:"electricity"===e.infor[a].filtration[m]&&(s[a].electricity=[]);for(a=0;a<e.infor.length;a++)!0===e.infor[a].underclocking&&(s[a].temperature=SubFre(s[a].temperature),s[a].humidity=SubFre(s[a].humidity),s[a].voltage=SubFre(s[a].voltage),s[a].electricity=SubFre(s[a].electricity));for(a=0;a<e.infor.length;a++)!0===e.infor[a].underclocking&&(s[a].temperature=Fre2(s[a].temperature,5),s[a].humidity=Fre2(s[a].humidity,5),s[a].voltage=Fre2(s[a].voltage,5),s[a].electricity=Fre2(s[a].electricity,5));if("first"===e.tabName)for(a=0;a<e.infor.length;a++){var p=document.createElement("div");p.id="module_"+String.fromCharCode(Number(a)+65),p.style="width: 1200px;height: 400px;",document.getElementById("main").appendChild(p);var _=document.getElementById("module_"+String.fromCharCode(Number(a)+65)),h=echarts__WEBPACK_IMPORTED_MODULE_8__["init"](_),f={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"属性",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:s[a].temperature.length,name:"temperature"},{value:s[a].humidity.length,name:"humidity"},{value:s[a].voltage.length,name:"voltage"},{value:s[a].electricity.length,name:"electricity"}]}]};f&&h.setOption(f)}else if("second"===e.tabName)for(a=0;a<e.infor.length;a++)p=document.createElement("div"),p.id="module_"+String.fromCharCode(Number(a)+65),p.style="width: 1200px;height: 400px;",document.getElementById("main").appendChild(p),_=document.getElementById("module_"+String.fromCharCode(Number(a)+65)),h=echarts__WEBPACK_IMPORTED_MODULE_8__["init"](_),f={title:{text:"module_"+String.fromCharCode(Number(a)+65)},legend:{data:["Temperature","Humidity","Voltage","Electricity"]},tooltip:{trigger:"axis",formatter:function(e){return e=e[0],e.name+" Value: "+e.value[1]},axisPointer:{animation:!1}},xAxis:{type:"time",axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},axisLine:{show:!0}},series:[{name:"Temperature",type:"line",showSymbol:!1,hoverAnimation:!1,data:s[a].temperature},{name:"Humidity",type:"line",showSymbol:!1,hoverAnimation:!1,data:s[a].humidity},{name:"Voltage",type:"line",showSymbol:!1,hoverAnimation:!1,data:s[a].voltage},{name:"Electricity",type:"line",showSymbol:!1,hoverAnimation:!1,data:s[a].electricity}]},f&&h.setOption(f)}}}},ec88:function(e,t,a){"use strict";a("9599")},f24c:function(e,t,a){},f4db:function(e,t,a){"use strict";a("9d98")},fac1:function(e,t,a){}});
//# sourceMappingURL=app.46999a3a.js.map