(function(t){function e(e){for(var i,r,o=e[0],l=e[1],c=e[2],d=0,u=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);p&&p(e);while(u.length)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,r=1;r<a.length;r++){var o=a[r];0!==s[o]&&(i=!1)}i&&(n.splice(e--,1),t=l(l.s=a[0]))}return t}var i={},r={app:0},s={app:0},n=[];function o(t){return l.p+"static/js/"+({about:"about"}[t]||t)+"."+{about:"ca47cdb6"}[t]+".js"}function l(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(t){var e=[],a={about:1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=new Promise((function(e,a){for(var i="static/css/"+({about:"about"}[t]||t)+"."+{about:"c5b99385"}[t]+".css",s=l.p+i,n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var c=n[o],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===i||d===s))return e()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){c=u[o],d=c.getAttribute("data-href");if(d===i||d===s)return e()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=e,p.onerror=function(e){var i=e&&e.target&&e.target.src||s,n=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");n.code="CSS_CHUNK_LOAD_FAILED",n.request=i,delete r[t],p.parentNode.removeChild(p),a(n)},p.href=s;var m=document.getElementsByTagName("head")[0];m.appendChild(p)})).then((function(){r[t]=0})));var i=s[t];if(0!==i)if(i)e.push(i[2]);else{var n=new Promise((function(e,a){i=s[t]=[e,a]}));e.push(i[2]=n);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=o(t);var u=new Error;c=function(e){d.onerror=d.onload=null,clearTimeout(p);var a=s[t];if(0!==a){if(a){var i=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+i+": "+r+")",u.name="ChunkLoadError",u.type=i,u.request=r,a[1](u)}s[t]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(e)},l.m=t,l.c=i,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(a,i,function(e){return t[e]}.bind(null,i));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var p=d;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"0852":function(t,e,a){},1:function(t,e){},"11c2":function(t,e,a){},1657:function(t,e,a){t.exports=a.p+"static/img/total.44e8e6cd.png"},1734:function(t,e,a){},"1f33":function(t,e,a){t.exports=a.p+"static/img/on-line.0b392b7d.png"},2:function(t,e){},"23d1":function(t,e,a){"use strict";a("9f04")},"2cfd":function(t,e,a){"use strict";a("e314")},"2fcd":function(t,e,a){"use strict";a("fac1")},3:function(t,e){},3554:function(t,e,a){"use strict";a("af95")},"3d1f":function(t,e,a){},"3d24":function(t,e,a){},4:function(t,e){},"422c":function(t,e,a){},4678:function(t,e,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=s(t);return a(e)}function s(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=s,t.exports=r,r.id="4678"},5:function(t,e){},6:function(t,e){},"632a":function(t,e,a){t.exports=a.p+"static/img/total2.20de720f.png"},6346:function(t,e,a){t.exports=a.p+"static/img/locate.b4d22ae3.png"},6587:function(t,e,a){"use strict";a("0852")},"6a2c":function(t,e,a){t.exports=a.p+"static/img/running.bb6a243c.png"},"6e91":function(t,e,a){"use strict";a("3d24")},"6f79":function(t,e,a){t.exports=a.p+"static/img/off-line.b58527f5.png"},7268:function(t,e,a){t.exports=a.p+"static/img/unregistered.dd755173.png"},7878:function(t,e,a){},"7d8d":function(t,e,a){"use strict";a("84ad")},"818d":function(t,e,a){"use strict";a("11c2")},"84ad":function(t,e,a){},"84b1":function(t,e,a){t.exports=a.p+"static/img/alert.23b66c6f.png"},8736:function(t,e,a){"use strict";a("a272")},"88e7":function(t,e,a){"use strict";a("9fa1")},9599:function(t,e,a){},"9a7e":function(t,e,a){},"9baf":function(t,e,a){},"9c18":function(t,e,a){"use strict";a("9a7e")},"9d98":function(t,e,a){},"9f04":function(t,e,a){},"9f48":function(t,e,a){"use strict";a("da82")},"9fa1":function(t,e,a){},a272:function(t,e,a){},a309:function(t,e,a){"use strict";a("bca4")},a473:function(t,e,a){"use strict";a("e901")},a932:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4e82"),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("fb6a"),core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_slice_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d3b7"),core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("25f0"),core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_regexp_to_string_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_6__),js_cookie__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("852e"),js_cookie__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_7__),echarts__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("313e"),axios__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_9__),qs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("4328"),qs__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_10__),mqtt=__webpack_require__("e7fc");function CompareDate(t,e){return new Date(t.replace(/-/g,"/"))>new Date(e.replace(/-/g,"/"))}function compare(t,e){var a=t.name,i=e.name;return new Date(a.replace(/-/g,"/"))>new Date(i.replace(/-/g,"/"))?-1:new Date(i.replace(/-/g,"/"))>new Date(a.replace(/-/g,"/"))?1:0}__webpack_exports__["a"]={data:function(){return{ProductionsInfor:[],DeviceInfor:[],Device:[],isType3:!1,DataList:{},product_list:[],device_list:[]}},created:function(){"3"===js_cookie__WEBPACK_IMPORTED_MODULE_7___default.a.get("modal")&&(this.isType3=!0)},mounted:function mounted(){var _this2=this,user_id=js_cookie__WEBPACK_IMPORTED_MODULE_7___default.a.get("user_id"),token=js_cookie__WEBPACK_IMPORTED_MODULE_7___default.a.get("token"),company_id=js_cookie__WEBPACK_IMPORTED_MODULE_7___default.a.get("company_id"),password=js_cookie__WEBPACK_IMPORTED_MODULE_7___default.a.get("password"),options={connectTimeout:4e3,clientId:user_id,username:user_id,password:password,keepalive:60,clean:!0},TCP_URL="wss://mqtt.maple.today:8084/mqtt",updatemess="update/"+company_id+"/#";this.client=mqtt.connect(TCP_URL,options),this.client.on("connect",(function(){_this2.client.subscribe(updatemess,(function(t){}))})),this.client.on("reconnect",(function(t){_this2.client.end(),js_cookie__WEBPACK_IMPORTED_MODULE_7___default.a.remove("token"),location.reload()})),this.client.on("error",(function(t){}));var data=[],now=new Date,value,option={title:{text:"未连接"},tooltip:{trigger:"axis",formatter:function(t){return t=t[0],t.name+" Value: "+t.value[1]},axisPointer:{animation:!1}},xAxis:{splitNumber:30,type:"time",axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},axisLine:{show:!0}},series:[{name:"模拟数据",type:"line",showSymbol:!1,hoverAnimation:!1,data:data}]},ProductionsURL="https://site.maple.today/IOTplatform/ServerMain",ProductionsData={requestCode:"005",user_id:user_id,token:token,company_id:company_id},AXIOS=axios__WEBPACK_IMPORTED_MODULE_9___default.a.create({headers:{"Content-Type":"application/x-www-form-urlencoded"}}),_this=this;_this.DataList={company_id:company_id,product_list:[]},AXIOS.post(ProductionsURL,qs__WEBPACK_IMPORTED_MODULE_10___default.a.stringify(ProductionsData)).then((function(res){_this.ProductionsInfor=res.data.data;for(var i=0;i<_this.ProductionsInfor.length;i++){for(var format_arr=[],j=0;j<_this.ProductionsInfor[i].data_format.length;j++)format_arr.push({name:_this.ProductionsInfor[i].data_format[j].name,unit:_this.ProductionsInfor[i].data_format[j].unit});_this.DataList.product_list.push({product_id:_this.ProductionsInfor[i].product_id,data_format:format_arr,device_list:[]})}for(var i=0;i<_this.ProductionsInfor.length;i++){var DeviceURL="https://site.maple.today/IOTplatform/ServerMain",DeviceData={requestCode:"025",user_id:user_id,token:token,company_id:company_id,product_id:_this.ProductionsInfor[i].product_id};AXIOS.post(DeviceURL,qs__WEBPACK_IMPORTED_MODULE_10___default.a.stringify(DeviceData)).then((function(res){var config_data_product_id=qs__WEBPACK_IMPORTED_MODULE_10___default.a.parse(res.config.data).product_id;_this.DeviceInfor=res.data.data;for(var product_id_col=echarts__WEBPACK_IMPORTED_MODULE_8__["number"],i=0;i<_this.DataList.product_list.length;i++)if(_this.DataList.product_list[i].product_id===config_data_product_id){product_id_col=i;break}for(var j=0;j<_this.DeviceInfor.length;j++){_this.DataList.product_list[product_id_col].device_list.push({device_id:_this.DeviceInfor[j].sensor_id,data:[]});var url="https://site.maple.today/IOTplatform/ServerMain",postdata={requestCode:"027",user_id:user_id,token:token,company_id:company_id,device_id:_this.DeviceInfor[j].sensor_id};AXIOS.post(url,qs__WEBPACK_IMPORTED_MODULE_10___default.a.stringify(postdata)).then((function(res){for(var temp=res.data.data,device_id=qs__WEBPACK_IMPORTED_MODULE_10___default.a.parse(res.config.data).device_id,temparr=[],namedata=[],i=0;i<_this.DataList.product_list.length;i++)for(var j=0;j<_this.DataList.product_list[i].device_list.length;j++)if(_this.DataList.product_list[i].device_list[j].device_id===device_id)for(var k=0;k<_this.DataList.product_list[i].data_format.length;k++)temparr.push([]),namedata.push(_this.DataList.product_list[i].data_format[k].name);for(var k=0;k<temp.length;k++){var time=temp[k].time,arr=eval("("+temp[k].data+")");if(arr.length===namedata.length)for(var l=0;l<arr.length;l++){var temp_data={name:time,value:[time,arr[l]]};temparr[l].push(temp_data)}}for(var i=0;i<temparr.length;i++)temparr[i].sort(compare);for(var i=0;i<_this.DataList.product_list.length;i++)for(var j=0;j<_this.DataList.product_list[i].device_list.length;j++)_this.DataList.product_list[i].device_list[j].device_id===device_id&&(_this.DataList.product_list[i].device_list[j].data=temparr);var maindiv=document.createElement("div");maindiv.id="device_"+device_id,maindiv.style="width: 1200px;height: 400px;",document.getElementById("box").appendChild(maindiv);for(var cdom=document.getElementById("device_"+device_id),mychart=echarts__WEBPACK_IMPORTED_MODULE_8__["init"](cdom),seriesData=[],i=0;i<namedata.length;i++)seriesData.push({name:namedata[i],type:"line",showSymbol:!1,hoverAnimation:!1,data:temparr[i]});var optiontemp={title:{text:"device_"+device_id},legend:{data:namedata},tooltip:{trigger:"axis",formatter:function(t){return t=t[0],t.name+" Value: "+t.value[1]},axisPointer:{animation:!1}},xAxis:{type:"time",axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},axisLine:{show:!0}},series:seriesData};optiontemp&&mychart.setOption(optiontemp)})).catch((function(t){}))}})).catch((function(t){}))}})).catch((function(t){})),this.client.on("message",(function(t,e){t.slice("update/1/#".length);var a=JSON.parse(e.toString());now=new Date,value=a.data_upload;for(var i=now.getFullYear()+"-"+(now.getMonth()+1)+"-"+now.getDate()+" "+(now.getHours()>=10?now.getHours():"0"+now.getHours())+":"+(now.getMinutes()>=10?now.getMinutes():"0"+now.getMinutes())+":"+(now.getSeconds()>=10?now.getSeconds():"0"+now.getSeconds()),r=a.sensor_id,s=(a.company_id,-1),n=-1,o=0;o<_this.DataList.product_list.length;o++)for(var l=0;l<_this.DataList.product_list[o].device_list.length;l++)_this.DataList.product_list[o].device_list[l].device_id===r&&(s=o,n=l);if(-1===s)return-1;for(o=0;o<value.length;o++){var c={name:i,value:[i,value[o]]};_this.DataList.product_list[s].device_list[n].data[o].push(c),_this.DataList.product_list[s].device_list[n].data[o].sort(compare)}var d=[];for(o=0;o<_this.DataList.product_list[s].data_format.length;o++)d.push(_this.DataList.product_list[s].data_format[o].name);var u=document.getElementById("device_"+r),p=echarts__WEBPACK_IMPORTED_MODULE_8__["init"](u),m=[];for(o=0;o<d.length;o++)m.push({name:d[o],type:"line",showSymbol:!1,hoverAnimation:!1,data:_this.DataList.product_list[s].device_list[n].data[o]});option={title:{text:"device_"+r},legend:{data:d},tooltip:{trigger:"axis",formatter:function(t){return t=t[0],t.name+" Value: "+t.value[1]},axisPointer:{animation:!1}},xAxis:{type:"time",axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},axisLine:{show:!0}},series:m},option&&p.setOption(option)}))},methods:{},beforeDestroy:function(){this.client.end()}}},af95:function(t,e,a){},b6bd:function(t,e,a){"use strict";a("422c")},bbc2:function(t,e,a){},bca4:function(t,e,a){},c17e:function(t,e,a){t.exports=a.p+"static/img/unrunning.ff302d24.png"},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],n=a("2877"),o={},l=Object(n["a"])(o,r,s,!1,null,null,null),c=l.exports,d=(a("d3b7"),a("3ca3"),a("ddb0"),a("8c4f")),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loginBox"},[a("div",{staticClass:"loginContainer"},[t._m(0),a("div",{staticClass:"login"},[a("el-form",{ref:"form",attrs:{model:t.form}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"手机号/邮箱"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"密码","show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-form-item",[a("el-checkbox",{staticStyle:{float:"left"},attrs:{label:"记住密码"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1),a("el-form-item",[a("el-button",{staticStyle:{width:"400px"},attrs:{type:"primary"},on:{click:function(e){return t.loading()}}},[t._v(" 登录 ")])],1),a("el-form-item",[a("el-button",{staticStyle:{width:"400px"},attrs:{type:"primary"},on:{click:function(e){return t.register()}}},[t._v(" 注册 ")])],1)],1)],1)])])},p=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"text-align":"left",width:"400px"}},[a("h2",[t._v("登录")])])}],m=(a("b0c0"),a("ac1f"),a("1276"),a("6c27"),a("bc3a")),_=a.n(m),h=a("4328"),f=a.n(h),g={name:"Loading",data:function(){return{token:"",user_id:"",checked:!1,form:{name:"",password:""}}},mounted:function(){this.getNameCookie(),this.getIdCookier(),""!==this.user_id&&""!==this.token&&""!==this.company_id&&""!==this.modal&&this.$router.push("/mainPage/dataInformation")},methods:{loading:function(){var t,e=this,i=this,r=a("6c27").sha256,s=r(this.form.password);if(t=/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-8]|18[0-9]|14[5679]|19[189]|16[56])[0-9]{8}$/.test(this.form.name)?1:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/.test(this.form.name)?2:3,""===this.form.name||""===this.form.password)alert("账号或密码不能为空");else{i.checked?i.setNameCookie(i.form.name,i.form.password,7):i.clearNameCookie();var n="https://site.maple.today/IOTplatform/ServerMain",o={requestCode:"002",account:this.form.name,loginway:t,password:s},l=_.a.create({headers:{"Content-Type":"application/x-www-form-urlencoded"}});l.post(n,f.a.stringify(o)).then((function(t){"1"===t.data.result?(i.setIdCookie(t.data.user_id,t.data.token,t.data.company,t.data.modal,e.form.password,1),i.$router.push("/mainPage/dataInformation")):"0"===t.data.result?alert("该用户未注册"):"2"===t.data.result&&alert("密码错误")})).catch((function(t){}))}},register:function(){this.$router.push({name:"Register"})},setNameCookie:function(t,e,a){var i=new Date;i.setTime(i.getTime()+864e5*a),window.document.cookie="userName="+t+";path=/;expires="+i.toGMTString(),window.document.cookie="userPwd="+e+";path=/;expires="+i.toGMTString()},setIdCookie:function(t,e,a,i,r,s){var n=new Date;n.setTime(n.getTime()+864e5*s),window.document.cookie="user_id="+t+";path=/;expires="+n.toGMTString(),window.document.cookie="token="+e+";path=/;expires="+n.toGMTString(),window.document.cookie="company_id="+a+";path=/;expires="+n.toGMTString(),window.document.cookie="modal="+i+";path=/;expires="+n.toGMTString(),window.document.cookie="password="+r+";path=/;expires="+n.toGMTString()},getNameCookie:function(){if(document.cookie.length>0){this.checked=!0;for(var t=document.cookie.split("; "),e=0;e<t.length;e++){var a=t[e].split("=");"userName"===a[0]&&(this.form.name=a[1]),"userPwd"===a[0]&&(this.form.password=a[1])}}},getIdCookier:function(){if(document.cookie.length>0)for(var t=document.cookie.split("; "),e=0;e<t.length;e++){var a=t[e].split("=");"user_id"===a[0]&&(this.user_id=a[1]),"token"===a[0]&&(this.token=a[1]),"company_id"===a[0]&&(this.company_id=a[1]),"modal"===a[0]&&(this.modal=a[1])}},clearNameCookie:function(){this.setNameCookie("","",-1)},clearIdCookie:function(){this.setIdCookie("","","","","",-1)}}},v=g,b=(a("9f48"),Object(n["a"])(v,u,p,!1,null,null,null)),y=b.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box"},[a("h1",[t._v("IOT平台注册")]),t._m(0),a("el-form",{ref:"ruleForm",staticStyle:{"text-align":"left"},attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"手机号/邮箱",prop:"phone"}},[a("el-input",{model:{value:t.ruleForm.phone,callback:function(e){t.$set(t.ruleForm,"phone",e)},expression:"ruleForm.phone"}}),a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.getCode}},[t._v("获取验证码")])],1),a("el-form-item",{attrs:{label:"验证码",prop:"code"}},[a("el-input",{model:{value:t.ruleForm.code,callback:function(e){t.$set(t.ruleForm,"code",e)},expression:"ruleForm.code"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"pass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm.pass,callback:function(e){t.$set(t.ruleForm,"pass",e)},expression:"ruleForm.pass"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm.checkPass,callback:function(e){t.$set(t.ruleForm,"checkPass",e)},expression:"ruleForm.checkPass"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("立即注册")]),a("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")])],1)],1)],1)},w=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h4",[t._v("已有账号,"),a("a",{attrs:{href:"/"}},[t._v("去登陆>")])])}],k={data:function(){var t=this,e=function(e,a,i){""===a?i(new Error("请输入密码")):(""!==t.ruleForm.checkPass&&t.$refs.ruleForm.validateField("checkPass"),i())},a=function(e,a,i){""===a?i(new Error("请再次输入密码")):a!==t.ruleForm.pass?i(new Error("两次输入密码不一致!")):i()};return{user_id:"",token:"",company_id:"",modal:"",way:!1,ruleForm:{pass:"",checkPass:"",code:"",phone:"",sms_id:""},rules:{pass:[{validator:e,trigger:"blur"},{required:!0,message:"请输入密码",trigger:"blur"}],checkPass:[{validator:a,trigger:"blur"},{required:!0,message:"确认密码",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号/邮箱",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},mounted:function(){this.getIdCookier(),""!==this.user_id&&""!==this.token&&""!==this.company_id&&""!==this.modal&&this.$router.push({name:"MainPage"})},methods:{submit:function(){var t,e=a("6c27").sha256,i=e(this.ruleForm.pass);if(/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-8]|18[0-9]|14[5679]|19[189]|16[56])[0-9]{8}$/.test(this.ruleForm.phone))t={requestCode:"002",phoneNumber:this.ruleForm.phone,code:this.ruleForm.code,sms_id:this.ruleForm.sms_id,password:i};else{if(!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/.test(this.ruleForm.phone))return;t={requestCode:"004",address:this.ruleForm.phone,code:this.ruleForm.code,sms_id:this.ruleForm.sms_id,password:i}}var r=this,s="https://site.maple.today/IOTplatform/SMS",n=_.a.create({headers:{"Content-Type":"application/x-www-form-urlencoded"}});n.post(s,f.a.stringify(t)).then((function(t){"1"===t.data.result?(r.setIdCookie(t.data.user_id,t.data.token,t.data.company,t.data.modal,1),r.$router.push({name:"MainPage"})):"0"===t.data.result?alert("未知错误"):"2"===t.data.result&&alert("超时或验证码错误")})).catch((function(t){}))},resetForm:function(t){this.$refs[t].resetFields()},getCode:function(){var t,e,a=this;/^(0|86|17951)?(13[0-9]|15[012356789]|17[0-8]|18[0-9]|14[5679]|19[189]|16[56])[0-9]{8}$/.test(this.ruleForm.phone)?(t="https://site.maple.today/IOTplatform/SMS",e={requestCode:"001",phoneNumber:this.ruleForm.phone}):/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+$/.test(this.ruleForm.phone)&&(t="https://site.maple.today/IOTplatform/SMS",e={requestCode:"003",address:this.ruleForm.phone});var i=_.a.create({headers:{"Content-Type":"application/x-www-form-urlencoded"}});i.post(t,f.a.stringify(e)).then((function(t){"1"===t.data.result?a.ruleForm.sms_id=t.data.sms_id:"0"===t.data.result?alert("超出本日短信上限"):"2"===t.data.result&&alert("请求过于频繁，1分钟后再请求")})).catch((function(t){}))},setNameCookie:function(t,e,a){var i=new Date;i.setTime(i.getTime()+864e5*a),window.document.cookie="userName="+t+";path=/;expires="+i.toGMTString(),window.document.cookie="userPwd="+e+";path=/;expires="+i.toGMTString()},setIdCookie:function(t,e,a,i,r){var s=new Date;s.setTime(s.getTime()+864e5*r),window.document.cookie="user_id="+t+";path=/;expires="+s.toGMTString(),window.document.cookie="token="+e+";path=/;expires="+s.toGMTString(),window.document.cookie="company_id="+a+";path=/;expires="+s.toGMTString(),window.document.cookie="modal="+i+";path=/;expires="+s.toGMTString()},getNameCookie:function(){if(document.cookie.length>0){this.checked=!0;for(var t=document.cookie.split("; "),e=0;e<t.length;e++){var a=t[e].split("=");"userName"===a[0]&&(this.ruleForm.name=a[1]),"userPwd"===a[0]&&(this.ruleForm.password=a[1])}}},getIdCookier:function(){if(document.cookie.length>0)for(var t=document.cookie.split("; "),e=0;e<t.length;e++){var a=t[e].split("=");"user_id"===a[0]&&(this.user_id=a[1]),"token"===a[0]&&(this.token=a[1]),"company_id"===a[0]&&(this.company_id=a[1]),"modal"===a[0]&&(this.modal=a[1])}},clearNameCookie:function(){this.setNameCookie("","",-1)},clearIdCookie:function(){this.setIdCookie("","","","",-1)}}},x=k,C=(a("2cfd"),Object(n["a"])(x,D,w,!1,null,null,null)),M=C.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",[t._v("首页")]),i("el-breadcrumb-item",[t._v("数据概览")])],1),i("div",{staticClass:"DataInformation"},[i("el-divider",{attrs:{"content-position":"left"}},[t._v("数据概览")]),i("div",{staticClass:"panel-body",staticStyle:{height:"100%","overflow-x":"hidden",width:"100%"}},[i("div",{staticClass:"Gateway"},[i("div",{staticClass:"littleTitle"},[i("el-divider",{staticStyle:{width:"50%"},attrs:{"content-position":"left"}},[t._v("网管概览")]),i("el-button",{staticClass:"informationButton",on:{click:t.gotolink}},[t._v("查看详情")])],1),i("div",{staticClass:"wrap1"},[i("div",{staticClass:"rectangle1"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("6f79")}}),i("div",{staticClass:"text1"},[t._v(" "+t._s(t.data1)),i("br"),t._v("离线网关 ")])]),i("div",{staticClass:"rectangle2"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("1f33")}}),i("div",{staticClass:"text2"},[t._v(" "+t._s(t.data2)),i("br"),t._v("在线网关 ")])]),i("div",{staticClass:"rectangle3"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("7268")}}),i("div",{staticClass:"text3"},[t._v(" "+t._s(t.data3)),i("br"),t._v("待注册网关 ")])]),i("div",{staticClass:"rectangle4"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("1657")}}),i("div",{staticClass:"text4"},[t._v(" "+t._s(t.datatotal1)),i("br"),t._v("总计网关 ")])])])]),i("div",{staticClass:"Platform"},[i("div",{staticClass:"littleTitle"},[i("el-divider",{attrs:{"content-position":"left"}},[t._v("平台概览")]),i("el-button",{staticClass:"informationButton",on:{click:t.gotolink2}},[t._v("查看详情")])],1),i("div",{staticClass:"wrap2"},[i("div",{staticClass:"rectangle5"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("6a2c")}}),i("div",{staticClass:"text5"},[t._v(" "+t._s(t.data4)),i("br"),t._v("运行数据流 ")])]),i("div",{staticClass:"rectangle6"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("c17e")}}),i("div",{staticClass:"text6"},[t._v(" "+t._s(t.data5)),i("br"),t._v("未运行数据流 ")])]),i("div",{staticClass:"rectangle7"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("84b1")}}),i("div",{staticClass:"text7"},[t._v(" "+t._s(t.data6)),i("br"),t._v("报警数据流 ")])]),i("div",{staticClass:"rectangle8"},[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:a("632a")}}),i("div",{staticClass:"text8"},[t._v(" "+t._s(t.datatotal2)),i("br"),t._v("总计数据流 ")])])])]),i("div",{staticClass:"DataShow"},[i("div",{staticClass:"littleTitle"},[i("el-divider",{attrs:{"content-position":"left"}},[t._v("平台数据量分析")])],1),i("div",{staticStyle:{width:"800px",height:"300px","padding-left":"0px"},attrs:{id:"EchartsView"}})])])],1)],1)},S=[],E=a("852e"),O=a.n(E),j=a("313e"),T={name:"DataInformation",data:function(){return{data1:"",data2:"",data3:"",datatotal1:"",data4:"",data5:"",data6:"",datatotal2:"",activeName:"first",gatewayList:[],companyList:[],dataList:[],deviceidList:[],datanumList:[],userID:"",token:"",companyID:"",modal:""}},created:function(){this.token=O.a.get("token"),this.userID=O.a.get("user_id"),this.companyID=O.a.get("company_id"),this.modal=O.a.get("modal"),this.fetchGData()},mounted:function(){this.drawLine()},methods:{drawLine:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"028",user_id:t.userID,company_id:t.companyID,token:t.token}}).then((function(e){t.dataList=e.data.data;for(var a=0;a<t.dataList.length;a++)t.deviceidList.push(t.dataList[a].device_id),t.datanumList.push(t.dataList[a].dataNumber);var i=t.$echarts.init(document.getElementById("EchartsView")),r={title:{text:"最近24小时"},tooltip:{},legend:{data:["数据量"]},xAxis:{name:"设备id",data:t.deviceidList},yAxis:{},series:[{name:"数据量",type:"bar",data:t.datanumList}]};i.setOption(r)})).catch((function(t){}))},fetchGData:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"003",user_id:t.userID,company_id:t.companyID,token:t.token}}).then((function(e){t.gatewayList=e.data.data,t.getGData()})).catch((function(t){}))},gotolink:function(){this.$router.push({name:"ViewDetails"})},gotolink2:function(){this.$router.push({name:"ViewDetails2"})},handleClick:function(t,e){},getGData:function(){var t=this,e=0,a=0,i=0;if("3"!==t.modal){for(var r=0;r<t.gatewayList.length;r++)"1"===t.gatewayList[r].dismiss?e++:"2"===t.gatewayList[r].dismiss?a++:i++;t.data1=e,t.data2=a,t.data3=i,t.datatotal1=t.gatewayList.length}}}},L=T,P=(a("a473"),Object(n["a"])(L,I,S,!1,null,null,null)),A=P.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("设备地图")])],1),a("div",{staticClass:"workspack"})],1)},q=[],R=(a("ea5a"),{}),$=Object(n["a"])(R,F,q,!1,null,null,null),B=$.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("数字镜像")]),a("el-breadcrumb-item",[t._v("设备管理")])],1),a("div",{staticClass:"deviceManage"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("设备列表")]),null===this.companyID||"3"!==this.userType&&"2"!==this.userType?t._e():a("el-button",{staticClass:"plusButton",attrs:{type:"primary",icon:"el-icon-circle-plus-outline",circle:""},on:{click:function(e){return t.goToAdd(1)}}}),"3"===this.userType?a("el-select",{attrs:{placeholder:"请选择工厂"},model:{value:t.companyID,callback:function(e){t.companyID=e},expression:"companyID"}},t._l(t.Componies,(function(t,e){return a("el-option",{key:e,attrs:{label:t.company_name,value:t.company_id}})})),1):t._e(),"3"===this.userType?a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.goToAdd(2)}}},[t._v("添加工厂")]):t._e(),null===this.companyID?a("el-empty",{staticStyle:{width:"100%",height:"80%"},attrs:{description:"请选择工厂"}}):t._e(),null!==this.companyID?a("div",{ref:"scroll",staticStyle:{width:"100%",height:"85%"}},[void 0===this.cards||0===this.cards.length?a("el-empty",{attrs:{description:"该工厂还没有设备,点击上方加号添加"}}):t._e(),void 0!==this.cards?a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("div",{staticClass:"cardBox"},t._l(t.cards,(function(e,i){return a("el-card",{key:i,staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(e.sensor_name))]),a("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-circle-close",circle:"",size:"small"},on:{click:function(e){return t.deleteRow(i,t.cards)}}}),a("el-button",{staticStyle:{float:"right"},attrs:{type:"success",icon:"el-icon-info",circle:"",size:"small"},on:{click:function(e){return t.goToInfor(i)}}})],1)])})),1)]):t._e()],1):t._e()],1)],1)},z=[],W=(a("a434"),{data:function(){return{height:document.documentElement.clientHeight,userID:"user_2",token:"1628765771204",companyID:"",type3ID:null,userType:3,cards:[],Componies:[]}},created:function(){var t=this;this.userType=O.a.get("modal"),"3"!==this.userType?(this.companyID=O.a.get("company_id"),this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"007",user_id:O.a.get("user_id"),company_id:O.a.get("company_id"),token:O.a.get("token")}}).then((function(e){t.cards=e.data.data})).catch((function(t){}))):(this.companyID=null,this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"011",user_id:O.a.get("user_id"),token:O.a.get("token")}}).then((function(e){t.Componies=e.data.data})).catch((function(t){})))},mounted:function(){},methods:{goToDevices:function(t){},handleSizeChange:function(t){},handleCurrentChange:function(t){},goToInfor:function(t){var e={createTime:this.cards[t].create_time,productID:this.cards[t].product_id,sensorName:this.cards[t].sensor_name},a=this;this.$router.push({name:"DeviceInformation",params:{card:e,companyID:a.companyID}})},goToAdd:function(t){2===t?this.$router.push({name:"AddCompony",params:{whichFrom:2}}):this.$router.push({name:"AddDevice",params:{companyID:this.companyID}})},deleteRow:function(t,e){if("1"===this.userType)this.$message({message:"权限不够，无法操作",type:"warning"});else{var a=this.cards[t],i=this;this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"012",user_id:O.a.get("user_id"),company_id:this.companyID,token:O.a.get("token"),device_id:a.sensor_id}}).then((function(a){"1"===a.data.result&&(i.$message({message:"删除成功",type:"success"}),e.splice(t,1))})).catch((function(t){}))}}},watch:{companyID:function(){this.cards=[];var t=this;null!==this.companyID&&this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"007",user_id:O.a.get("user_id"),company_id:this.companyID,token:O.a.get("token")}}).then((function(e){var a=e.data.data;for(var i in a)"1"===a[i].dismiss&&t.cards.push(a[i])})).catch((function(t){}))}}}),K=W,N=(a("dcf2"),Object(n["a"])(K,U,z,!1,null,"18a14f8d",null)),V=N.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("数字镜像")]),a("el-breadcrumb-item",{attrs:{to:{name:"DeviceManage"}}},[t._v("设备管理")]),a("el-breadcrumb-item",[t._v("设备信息")])],1),a("div",{staticClass:"deviceInformation"},[a("el-divider",{attrs:{"content-position":"right"}},[t._v("设备信息")]),a("el-form",{ref:"card",attrs:{model:t.card,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"设备名称"}},[a("el-tag",[t._v(t._s(t.card.sensorName))])],1),a("el-form-item",{attrs:{label:"产品型号"}},[a("el-tag",[t._v(t._s(t.productName))])],1),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-tag",[t._v(t._s(t._f("formatDate")(t.createTime)))])],1)],1)],1)],1)},H=[],J=(a("a9e3"),a("c1df")),Y=a.n(J),Z={data:function(){return{productions:[],productName:"",createTime:0}},filters:{formatDate:function(t){return Y()(t).format("YYYY-MM-DD HH:MM:ss")}},props:["card","companyID"],created:function(){var t=this;this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"005",user_id:O.a.get("user_id"),company_id:t.companyID,token:O.a.get("token")}}).then((function(e){t.productions=e.data.data;var a=e.data.data;for(var i in t.createTime=Number(t.card.createTime),e.data.data)a[i].product_id===t.card.productID&&(t.productName=a[i].product_name)})).catch((function(t){}))},mounted:function(){}},X=Z,Q=(a("7d8d"),Object(n["a"])(X,G,H,!1,null,null,null)),tt=Q.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("数字镜像")]),2===this.whichFrom?a("el-breadcrumb-item",{attrs:{to:{name:"DeviceManage"}}},[t._v("设备管理")]):t._e(),1===this.whichFrom?a("el-breadcrumb-item",{attrs:{to:{name:"ProductionManage"}}},[t._v("产品管理")]):t._e(),a("el-breadcrumb-item",[t._v("添加工厂")])],1),a("div",{staticClass:"addCompony"},[a("el-divider",{attrs:{"content-position":"right"}},[t._v("添加工厂")]),a("div",{ref:"scroll",staticStyle:{width:"100%",height:"80%"}},[a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("div",{staticClass:"form"},[a("el-form",{ref:"form",attrs:{model:t.componyForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"公司名称"}},[a("el-input",{model:{value:t.componyForm.name,callback:function(e){t.$set(t.componyForm,"name",e)},expression:"componyForm.name"}})],1),a("el-form-item",{attrs:{label:"公司位置(点击选址)"}},[a("div",{staticStyle:{"text-align":"right"}},[t._v(" 省："),a("select",{staticStyle:{width:"130px",height:"30px",border:"1px solid #ccc"},attrs:{id:"province"},on:{change:t.search}}),t._v(" 市："),a("select",{staticStyle:{width:"130px",height:"30px",border:"1px solid #ccc"},attrs:{id:"city"},on:{change:t.search}}),t._v(" 区："),a("select",{staticStyle:{width:"130px",height:"30px",border:"1px solid #ccc"},attrs:{id:"district"},on:{change:t.search}})]),a("div",{attrs:{id:"container"}})]),null!==t.componyForm.position.lat?a("el-form-item",{attrs:{label:"选中位置"}},[a("el-tag",{staticStyle:{"margin-right":"20px"}},[t._v("经度："+t._s(t.componyForm.position.lng))]),a("el-tag",[t._v("纬度："+t._s(t.componyForm.position.lat))])],1):t._e()],1)],1)])],1),a("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","padding-right":"10px",height:"10%","padding-bottom":"10px"}},[a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.creat()}}},[t._v("创建")])],1)],1)],1)},at=[],it=(a("841c"),a("d81d"),{data:function(){var t=this;return{marker:null,position:{lat:null,lng:null},map:null,polygons:[],district:null,componyForm:{name:"",position:{lat:null,lng:null}},events:{click:function(e){var a=e.lnglat,i=a.lng,r=a.lat;t.lng=i,t.lat=r,alert(t.lng+"/"+t.lat)}}}},methods:{province:function(){var t=this,e={subdistrict:1,showbiz:!1};this.district=new AMap.DistrictSearch(e),this.district.search("中国",(function(e,a){"complete"===e&&t.getData(a.districtList[0])}))},getData:function(t,e){var a=document.getElementById("city"),i=document.getElementById("district"),r=t.boundaries,s=this;if(r){for(var n=0,o=r.length;n<o;n++){var l=new AMap.Polygon({map:this.map,strokeWeight:1,strokeColor:"#ff52a1",fillColor:"#ffeef6",fillOpacity:.2,path:r[n]});AMap.event.addListener(l,"click",(function(t){s.position=t.lnglat,null!==s.marker&&s.map.remove(s.marker),s.marker=new AMap.Marker({position:[t.lnglat.lng,t.lnglat.lat]}),s.marker.setMap(s.map),s.componyForm.position=t.lnglat})),this.polygons.push(l)}null!==this.marker&&this.map.remove(s.marker),this.componyForm.position.lat=null,this.componyForm.position.lng=null,this.map.setFitView()}"province"===e?(a.innerHTML="",i.innerHTML=""):"city"===e&&(i.innerHTML="");var c=t.districtList;if(c){var d="",u=c[0].level,p=document.querySelector("#"+u);if(!p)return!1;"province"===u?p.add(new Option("全国")):"city"===u?p.add(new Option("全市")):p.add(new Option("全区"));for(var m=0,_=c.length;m<_;m++){var h=c[m].name,f=c[m].level;d=new Option(h),d.setAttribute("value",f),d.center=c[m].center,d.adcode=c[m].adcode,p.add(d)}}},search:function(t){for(var e=this,a=0,i=this.polygons.length;a<i;a++)this.polygons[a].setMap(null);var r=t.srcElement[t.srcElement.options.selectedIndex],s=r.adcode;this.district.setLevel(r.value),this.district.setExtensions("all"),this.district.search(s,(function(a,i){"complete"===a&&e.getData(i.districtList[0],t.srcElement.id)}))},loadmap:function(){var t=this;this.map=new AMap.Map("container",{center:[118.792221,31.938254],zoom:15}),AMap.event.addListener(this.map,"click",(function(e){null!==t.marker&&t.map.remove(t.marker),t.marker=new AMap.Marker({position:[e.lnglat.lng,e.lnglat.lat]}),t.marker.setMap(t.map),t.componyForm.position=e.lnglat}))},creat:function(){var t=this;""===this.componyForm.name||null===this.componyForm.position.lat?this.$message({message:"未填写完，创建失败",type:"warning"}):this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"024",user_id:O.a.get("user_id"),token:O.a.get("token"),name:this.componyForm.name,latitude:this.componyForm.position.lat,longitude:this.componyForm.position.lng}}).then((function(e){void 0!==e.data?(t.$message({message:"创建成功",type:"success"}),1===t.whichFrom?t.$router.push({name:"ProductionManage"}):t.$router.push({name:"DeviceManage"})):t.$message({message:"上传失败",type:"warning"})})).catch((function(t){}))}},mounted:function(){this.loadmap(),this.province()},watch:{componyForm:function(){}},props:["whichFrom"]}),rt=it,st=(a("23d1"),Object(n["a"])(rt,et,at,!1,null,null,null)),nt=st.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("数字镜像")]),a("el-breadcrumb-item",{attrs:{to:{name:"DeviceManage"}}},[t._v("设备管理")]),a("el-breadcrumb-item",[t._v("添加设备")])],1),a("div",{staticClass:"addDevice"},[a("el-divider",{attrs:{"content-position":"right"}},[t._v("添加设备")]),a("div",{ref:"scroll",staticStyle:{width:"100%",height:"80%"}},[void 0!==this.cards?a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"选择产品"}},[a("el-select",{attrs:{placeholder:"请选择产品"},model:{value:t.form.product_id,callback:function(e){t.$set(t.form,"product_id",e)},expression:"form.product_id"}},t._l(t.form.productions,(function(t,e){return a("el-option",{key:e,attrs:{value:t.product_id,label:t.product_name}})})),1)],1),a("el-form-item",{attrs:{label:"设备名称"}},[a("el-input",{model:{value:t.form.sensor_name,callback:function(e){t.$set(t.form,"sensor_name",e)},expression:"form.sensor_name"}})],1),a("el-form-item",{attrs:{label:"设备位置(点击选址)"}},[a("div",{staticStyle:{"text-align":"right"}},[t._v(" 省："),a("select",{staticStyle:{width:"130px",height:"30px",border:"1px solid #ccc"},attrs:{id:"province"},on:{change:t.search}}),t._v(" 市："),a("select",{staticStyle:{width:"130px",height:"30px",border:"1px solid #ccc"},attrs:{id:"city"},on:{change:t.search}}),t._v(" 区："),a("select",{staticStyle:{width:"130px",height:"30px",border:"1px solid #ccc"},attrs:{id:"district"},on:{change:t.search}})]),a("div",{attrs:{id:"containerOfAD"}})]),null!==t.form.position.lat?a("el-form-item",{attrs:{label:"选中位置"}},[a("el-tag",{staticStyle:{"margin-right":"20px"}},[t._v("经度："+t._s(t.form.position.lng))]),a("el-tag",[t._v("纬度："+t._s(t.form.position.lat))])],1):t._e()],1)],1):t._e()],1),a("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","padding-right":"10px",height:"10%","padding-bottom":"10px"}},[a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.creatSensor()}}},[t._v("创建")])],1)],1)],1)},lt=[],ct={data:function(){return{marker:null,position:{lat:null,lng:null},map:null,polygons:[],district:null,upForm:{productionType:0},form:{componyName:"",productions:[],product_id:null,sensor_name:"",position:{lat:null,lng:null}},cards:[{name:"牛死逼车床",description:"这个车床牛死逼了",imageCount:0,url:"https://img2.baidu.com/it/u=1938097429,3295786295&fm=26&fmt=auto&gp=0.jpg",Arrtribute:[{type:"电流",name1:"车床总线电流",name2:"QWER - 5 电流表",default:"50",unit:"ma"},{type:"温度",name1:"车床车刀温度",name2:"QWER - 5 测温仪",default:"90",unit:"°C"}]},{name:"牛死逼车床ver2.0",description:"这个车床牛死逼了",imageCount:0,url:"https://img2.baidu.com/it/u=1938097429,3295786295&fm=26&fmt=auto&gp=0.jpg",Arrtribute:[{type:"电流",name1:"车床总线电流",name2:"QWER - 5 电流表",default:"50",unit:"ma"},{type:"温度",name1:"车床车刀温度",name2:"QWER - 5 测温仪",default:"90",unit:"°C"}]}]}},methods:{province:function(){var t=this,e={subdistrict:1,showbiz:!1};this.district=new AMap.DistrictSearch(e),this.district.search("中国",(function(e,a){"complete"===e&&t.getData(a.districtList[0])}))},getData:function(t,e){var a=document.getElementById("city"),i=document.getElementById("district"),r=t.boundaries,s=this;if(r){for(var n=0,o=r.length;n<o;n++){var l=new AMap.Polygon({map:this.map,strokeWeight:1,strokeColor:"#ff52a1",fillColor:"#ffeef6",fillOpacity:.2,path:r[n]});AMap.event.addListener(l,"click",(function(t){s.position=t.lnglat,null!==s.marker&&s.map.remove(s.marker),s.marker=new AMap.Marker({position:[t.lnglat.lng,t.lnglat.lat]}),s.marker.setMap(s.map),s.form.position=t.lnglat})),this.polygons.push(l)}null!==this.marker&&this.map.remove(s.marker),this.form.position.lat=null,this.form.position.lng=null,this.map.setFitView()}"province"===e?(a.innerHTML="",i.innerHTML=""):"city"===e&&(i.innerHTML="");var c=t.districtList;if(c){var d="",u=c[0].level,p=document.querySelector("#"+u);if(!p)return!1;"province"===u?p.add(new Option("全国")):"city"===u?p.add(new Option("全市")):p.add(new Option("全区"));for(var m=0,_=c.length;m<_;m++){var h=c[m].name,f=c[m].level;d=new Option(h),d.setAttribute("value",f),d.center=c[m].center,d.adcode=c[m].adcode,p.add(d)}}},search:function(t){for(var e=this,a=0,i=this.polygons.length;a<i;a++)this.polygons[a].setMap(null);var r=t.srcElement[t.srcElement.options.selectedIndex],s=r.adcode;this.district.setLevel(r.value),this.district.setExtensions("all"),this.district.search(s,(function(a,i){"complete"===a&&e.getData(i.districtList[0],t.srcElement.id)}))},loadmap:function(){var t=this;this.map=new AMap.Map("containerOfAD",{center:[118.792221,31.938254],zoom:15}),AMap.event.addListener(this.map,"click",(function(e){null!==t.marker&&t.map.remove(t.marker),t.marker=new AMap.Marker({position:[e.lnglat.lng,e.lnglat.lat]}),t.marker.setMap(t.map),t.form.position=e.lnglat}))},creatSensor:function(){if(null===this.form.product_id||""===this.form.sensor_name||null===this.form.position.lat)this.$message({message:"未填写完，创建失败",type:"warning"});else{var t=this;this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"006",user_id:O.a.get("user_id"),token:O.a.get("token"),company_id:t.companyID,sensor_name:t.form.sensor_name,product_id:t.form.product_id,latitude:t.form.position.lat,longitude:t.form.position.lng}}).then((function(e){"1"===e.data.result?(t.$message({message:"创建成功",type:"success"}),t.$router.push({name:"DeviceManage"})):t.$message({message:"创建失败",type:"warning"})})).catch((function(t){}))}}},created:function(){this.form.componyName=this.componyName;var t=this;this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"005",user_id:O.a.get("user_id"),company_id:t.companyID,token:O.a.get("token")}}).then((function(e){t.form.productions=e.data.data})).catch((function(t){}))},props:["componyName","companyID"],mounted:function(){this.loadmap(),this.province()}},dt=ct,ut=(a("e5ff"),Object(n["a"])(dt,ot,lt,!1,null,null,null)),pt=ut.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("数字镜像")]),a("el-breadcrumb-item",{attrs:{to:{name:"ProductionManage"}}},[t._v("产品管理")]),a("el-breadcrumb-item",[t._v("添加产品")])],1),a("div",{staticClass:"addProduction"},[a("el-divider",{attrs:{"content-position":"right"}},[t._v("添加产品")]),a("div",{ref:"scroll",staticStyle:{width:"100%",height:"80%"}},[a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("div",{staticClass:"form"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"产品名称"}},[a("el-input",{model:{value:t.form.product_name,callback:function(e){t.$set(t.form,"product_name",e)},expression:"form.product_name"}})],1),a("el-form-item",{attrs:{label:"产品图片"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.openImg}},[t._v("选择")]),a("div",[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"input",attrs:{type:"file",accept:"image/*"},on:{change:function(e){return t.tirggerFile(e)}}}),a("div",{staticClass:"images"},t._l(t.imgUrl,(function(e,i){return a("div",{key:i,staticStyle:{width:"200px",height:"200px","text-align":"center","margin-right":"10px"}},[a("el-button",{staticStyle:{position:"absolute"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.deleteImage(i,t.imgUrl)}}}),a("el-image",{staticStyle:{height:"100%",width:"100%","z-index":"-1"},attrs:{src:e,fit:"cover"}})],1)})),0)])],1),a("el-form-item",{attrs:{label:"产品描述"}},[a("el-input",{model:{value:t.form.product_des,callback:function(e){t.$set(t.form,"product_des",e)},expression:"form.product_des"}})],1),a("el-form-item",{attrs:{label:"产品属性"}},[a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.tableData,"max-height":"250"}},[a("el-table-column",{attrs:{prop:"name",label:"属性名称",width:"150"}}),a("el-table-column",{attrs:{prop:"default",label:"默认值",width:"120"}}),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"300"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteRow(e.$index,t.tableData)}}},[t._v(" 移除 ")])]}}])})],1)],1)]),t.addMode?a("el-form-item",{staticStyle:{width:"50%","z-index":"999"},attrs:{label:"添加属性"}},[a("el-input",{attrs:{placeholder:"属性名称"},model:{value:t.addTable.name,callback:function(e){t.$set(t.addTable,"name",e)},expression:"addTable.name"}}),a("el-input",{attrs:{placeholder:"默认值"},model:{value:t.addTable.default,callback:function(e){t.$set(t.addTable,"default",e)},expression:"addTable.default"}}),a("el-input",{attrs:{placeholder:"单位"},model:{value:t.addTable.unit,callback:function(e){t.$set(t.addTable,"unit",e)},expression:"addTable.unit"}})],1):t._e()],1),t.addMode?t._e():a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(e){return t.addItem()}}},[t._v("添加属性 ")]),t.addMode?a("el-button",{staticStyle:{width:"70px"},attrs:{type:"primary"},on:{click:function(e){return t.addItem()}}},[t._v("确定 ")]):t._e()],1)])],1),a("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","padding-right":"10px",height:"10%","padding-bottom":"10px"}},[a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.upload()}}},[t._v("上传")])],1)],1)],1)},_t=[],ht={data:function(){return{isSelectFile:!1,imgUrl:[],imgData:[],height:0,addMode:!1,upNumber:0,form:{product_name:"",product_des:"",images:[],data_format:[],company_id:null,user_id:O.a.get("user_id"),token:O.a.get("token")},tableData:[],addTable:{name:"",default:"",unit:""}}},mounted:function(){},created:function(){this.form.company_id=this.companyID},methods:{openImg:function(){this.$refs.input.click()},tirggerFile:function(t){var e=t.target.files[0];if("image/jpeg"!==e.type&&"image/png"!==e.type&&"image/jpg"!==e.type)this.$message({message:"请选择合适的文件类型",type:"warning"});else{this.imgData.push(e);var a=new FileReader;a.readAsDataURL(e);var i=this;a.onload=function(t){var e=t.target.result;i.imgUrl.push(e)}}},deleteImage:function(t,e){e.splice(t,1),this.imgData.splice(t,1)},deleteRow:function(t,e){e.splice(t,1)},addItem:function(){if(this.addMode){var t=this.addTable,e=!0;if(""!==t.name&&""!==t.default&&""!==t.unit||(e=!1),e){var a={name:"",showName:"",type:"",default:"",unit:""};a.showName=this.addTable.showName,a.name=this.addTable.name,a.type=this.addTable.type,a.unit=this.addTable.unit,a.default=this.addTable.default,this.tableData.push(a),this.addTable.name="",this.addTable.showName="",this.addTable.type="",this.addTable.default="",this.addTable.unit="",this.addMode=!1}else this.$message({message:"属性未填写完成",type:"warning"})}else this.addMode=!0},upload:function(){var t=this.form;if(t.data_format=this.tableData,0===t.data_format.length||""===t.product_name||""===t.product_des)this.$message({message:"无法上传",type:"warning"});else{for(var e in this.imgData){var a=new FormData,i=String((new Date).valueOf())+O.a.get("user_id")+String(e),r=this;a.append("name","file"),a.append("imagename",i),a.append("file",this.imgData[e]);var s="https://site.maple.today/iotplat/"+i;this.form.images.push(s),this.$axios.post("https://site.maple.today/IOTplatform/upload/picture.htm",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){r.upNumber=r.upNumber+1})).catch((function(t){}))}}}},props:["companyID"],watch:{upNumber:function(t,e){if(this.upNumber===this.imgData.length){var a=this,i=JSON.stringify(this.form.data_format),r=JSON.stringify(this.form.images);this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"004",user_id:a.form.user_id,token:a.form.token,company_id:a.form.company_id,product_name:a.form.product_name,product_des:a.form.product_des,images:r,data_format:i}}).then((function(t){void 0!==t.data?(a.$message({message:"上传成功",type:"success"}),a.$router.push({name:"ProductionManage"})):a.$message({message:"上传失败",type:"warning"})})).catch((function(t){}))}}}},ft=ht,gt=(a("2fcd"),Object(n["a"])(ft,mt,_t,!1,null,null,null)),vt=gt.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("数字镜像")]),a("el-breadcrumb-item",{attrs:{to:{name:"ProductionManage"}}},[t._v("产品管理")]),a("el-breadcrumb-item",[t._v("修改产品")])],1),a("div",{staticClass:"addProduction"},[a("el-divider",{attrs:{"content-position":"right"}},[t._v("修改产品")]),a("div",{ref:"scroll",staticStyle:{width:"100%",height:"80%"}},[a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("div",{staticClass:"form"},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"产品名称"}},[a("el-input",{model:{value:t.form.product_name,callback:function(e){t.$set(t.form,"product_name",e)},expression:"form.product_name"}})],1),a("el-form-item",{attrs:{label:"产品图片"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.openImg}},[t._v("选择")]),a("div",[a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"input",attrs:{type:"file",accept:"image/*"},on:{change:function(e){return t.tirggerFile(e)}}}),a("div",{staticClass:"imagesFix"},[t._l(t.form.images,(function(e,i){return a("div",{key:i,staticStyle:{width:"200px",height:"200px","text-align":"center","margin-right":"10px"}},[a("el-button",{staticStyle:{position:"absolute"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.deleteForeImage(i,t.form.images)}}}),a("el-image",{staticStyle:{height:"100%",width:"100%","z-index":"-1"},attrs:{src:e,fit:"cover"}})],1)})),t._l(t.imgUrl,(function(e,i){return a("div",{key:i,staticStyle:{width:"200px",height:"200px","text-align":"center","margin-right":"10px"}},[a("el-button",{staticStyle:{position:"absolute"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.deleteImage(i,t.imgUrl)}}}),a("el-image",{staticStyle:{height:"100%",width:"100%","z-index":"-1"},attrs:{src:e,fit:"cover"}})],1)}))],2)])],1),a("el-form-item",{attrs:{label:"产品描述"}},[a("el-input",{model:{value:t.form.product_des,callback:function(e){t.$set(t.form,"product_des",e)},expression:"form.product_des"}})],1),a("el-form-item",{attrs:{label:"产品属性"}},[a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:this.tableData,"max-height":"250"}},[a("el-table-column",{attrs:{prop:"name",label:"属性名称",width:"150"}}),a("el-table-column",{attrs:{prop:"default",label:"默认值",width:"120"}}),a("el-table-column",{attrs:{prop:"unit",label:"单位",width:"300"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){return a.preventDefault(),t.deleteRow(e.$index,t.tableData)}}},[t._v(" 移除 ")])]}}])})],1)],1)]),t.addMode?a("el-form-item",{staticStyle:{width:"50%","z-index":"999"},attrs:{label:"添加属性"}},[a("el-input",{attrs:{placeholder:"属性名称"},model:{value:t.addTable.name,callback:function(e){t.$set(t.addTable,"name",e)},expression:"addTable.name"}}),a("el-input",{attrs:{placeholder:"默认值"},model:{value:t.addTable.default,callback:function(e){t.$set(t.addTable,"default",e)},expression:"addTable.default"}}),a("el-input",{attrs:{placeholder:"单位"},model:{value:t.addTable.unit,callback:function(e){t.$set(t.addTable,"unit",e)},expression:"addTable.unit"}})],1):t._e()],1),t.addMode?t._e():a("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:function(e){return t.addItem()}}},[t._v("添加属性 ")]),t.addMode?a("el-button",{staticStyle:{width:"70px"},attrs:{type:"primary"},on:{click:function(e){return t.addItem()}}},[t._v("确定 ")]):t._e()],1)])],1),a("div",{staticStyle:{display:"flex","flex-direction":"row-reverse","padding-right":"10px",height:"10%","padding-bottom":"10px"}},[a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.upload()}}},[t._v("上传")])],1)],1)],1)},yt=[],Dt={data:function(){return{isUp:!1,upNumber:0,height:0,addMode:!1,imgData:[],imgUrl:[],tableData:[],addTable:{name:"",default:"",unit:""}}},mounted:function(){},created:function(){this.tableData=this.form.data_format},methods:{openImg:function(){this.$refs.input.click()},tirggerFile:function(t){var e=t.target.files[0];if("image/jpeg"!==e.type&&"image/png"!==e.type&&"image/jpg"!==e.type)this.$message({message:"请选择合适的文件类型",type:"warning"});else{this.imgData.push(e);var a=new FileReader;a.readAsDataURL(e);var i=this;a.onload=function(t){var e=t.target.result;i.imgUrl.push(e)}}},deleteForeImage:function(t,e){e.splice(t,1)},deleteImage:function(t,e){e.splice(t,1),this.imgData.splice(t,1)},deleteRow:function(t,e){e.splice(t,1)},addItem:function(){if(this.addMode){var t=this.addTable,e=!0;if(""!==t.name&&""!==t.default&&""!==t.unit||(e=!1),e){var a={name:"",showName:"",type:"",default:"",unit:""};a.showName=this.addTable.showName,a.name=this.addTable.name,a.type=this.addTable.type,a.unit=this.addTable.unit,a.default=this.addTable.default,this.tableData.push(a),this.addTable.name="",this.addTable.showName="",this.addTable.type="",this.addTable.default="",this.addTable.unit="",this.addMode=!1}else this.$message({message:"属性未填写完成",type:"warning"})}else this.addMode=!0},upload:function(){var t=this,e=this.form;if(e.data_format=this.tableData,0===e.data_format.length||""===e.product_name||""===e.product_des)this.$message({message:"无法上传",type:"warning"});else{if(0===this.imgData.length)this.isUp=!0;else for(var a in this.imgData){var i=new FormData,r=String((new Date).valueOf())+O.a.get("user_id"),s=this;i.append("name","file"),i.append("imagename",r),i.append("file",this.imgData[a]);var n="https://site.maple.today/iotplat/"+r;this.form.images.push(n),this.$axios.post("https://site.maple.today/IOTplatform/upload/picture.htm",i,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){s.upNumber=s.upNumber+1,s.upNumber===s.imgData.length&&(t.isUp=!0)})).catch((function(t){}))}}}},props:["companyID","form"],watch:{isUp:function(){var t=JSON.stringify(this.form.data_format),e=JSON.stringify(this.form.images),a=this;this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"020",user_id:O.a.get("user_id"),token:O.a.get("token"),company_id:a.form.company_id,product_name:a.form.product_name,product_des:a.form.product_des,product_id:a.form.product_id,images:e,data_format:t}}).then((function(t){void 0!==t.data?(a.$message({message:"修改成功",type:"success"}),a.$router.push({name:"ProductionManage"})):a.$message({message:"上传失败",type:"warning"})})).catch((function(t){}))}}},wt=Dt,kt=(a("88e7"),Object(n["a"])(wt,bt,yt,!1,null,null,null)),xt=kt.exports,Ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("数字镜像")]),a("el-breadcrumb-item",[t._v("产品管理")])],1),a("div",{staticClass:"productionManage"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("产品列表（设备模型)")]),null!==this.companyID?a("el-button",{staticClass:"plusButton",attrs:{type:"primary",icon:"el-icon-circle-plus-outline",circle:""},on:{click:function(e){return t.goToAdd()}}}):t._e(),"3"===this.userType?a("el-select",{attrs:{placeholder:"请选择工厂"},model:{value:t.companyID,callback:function(e){t.companyID=e},expression:"companyID"}},t._l(t.Componies,(function(t,e){return a("el-option",{key:e,attrs:{label:t.company_name,value:t.company_id}})})),1):t._e(),"3"===this.userType?a("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.goToAddConpony()}}},[t._v("添加工厂 ")]):t._e(),null===this.companyID?a("el-empty",{staticStyle:{width:"100%",height:"80%"},attrs:{description:"请选择工厂"}}):t._e(),a("el-scrollbar",{staticStyle:{height:"85%",width:"100%"}},[void 0===this.cards||0===this.cards.length?a("el-empty",{attrs:{description:"该工厂还没有产品,点击上方加号添加"}}):t._e(),a("div",{staticClass:"cardBox"},t._l(t.cards,(function(e,i){return a("el-card",{key:i,staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"20px"}},[t._v(t._s(e.product_name))]),a("el-button",{staticStyle:{float:"right"},attrs:{type:"warning",icon:"el-icon-setting",circle:"",size:"small"},on:{click:function(e){return t.fix(i,t.cards)}}})],1),a("el-carousel",{attrs:{height:"150px"}},t._l(e.images,(function(t,e){return a("el-carousel-item",{key:e},[a("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t,fit:"cover"}})],1)})),1),a("el-collapse",[a("el-collapse-item",{attrs:{title:"描述",name:"1"}},[a("div",[t._v(t._s(e.product_des))])]),a("el-collapse-item",{attrs:{title:"仪器指标",name:"2"}},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.data_format}},[a("el-table-column",{attrs:{prop:"name",label:"名称",width:"180"}}),a("el-table-column",{attrs:{prop:"default",label:"默认值"}}),a("el-table-column",{attrs:{prop:"unit",label:"单位"}})],1)]],2)],1)],1)})),1)],1)],1)],1)},Mt=[],It={data:function(){return{height:document.documentElement.clientHeight,companyID:"1",userType:null,cards:[],Componies:[]}},beforeCreate:function(){},created:function(){this.userType=O.a.get("modal");var t=this;"3"!==this.userType?this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"005",user_id:O.a.get("user_id"),company_id:O.a.get("company_id"),token:O.a.get("token")}}).then((function(e){t.cards=e.data.data})).catch((function(t){})):(this.companyID=null,this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"011",user_id:O.a.get("user_id"),token:O.a.get("token")}}).then((function(e){t.Componies=e.data.data})).catch((function(t){})))},mounted:function(){},methods:{handleSizeChange:function(t){},handleCurrentChange:function(t){},goToAdd:function(){this.$router.push({name:"AddProduction",params:{companyID:this.companyID}})},goToAddConpony:function(){this.$router.push({name:"AddCompony",params:{whichFrom:1}})},fix:function(t,e){var a=this.cards[t];this.$router.push({name:"FixProduction",params:{companyID:a.company_id,form:a}})}},watch:{companyID:function(){this.cards=[];var t=this;null!==this.companyID&&this.$axios.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"005",user_id:O.a.get("user_id"),company_id:this.companyID,token:O.a.get("token")}}).then((function(e){var a=e.data.data;for(var i in a)"1"===a[i].dismiss&&t.cards.push(a[i])})).catch((function(t){}))}}},St=It,Et=(a("f4db"),Object(n["a"])(St,Ct,Mt,!1,null,"4f63268a",null)),Ot=Et.exports,jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("设备数据流")]),a("el-breadcrumb-item",[t._v("平台数据流")])],1),t._m(0)],1)},Tt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"DataFlout"},[a("div",{staticClass:"StreamSets"},[a("a",{staticStyle:{color:"#f16baa","font-size":"20px"},attrs:{href:"http://116.63.40.126:18630",onclick:"return confirm('即将跳转至StreamSets登陆平台\\n初始登录账号为用户id,初始密码为123456\\nps:用户id可前往个人详情页面查阅\\n密码可前往设置页面修改');"}},[t._v(" 点击查看平台概览详情 ")])])])}],Lt=(a("818d"),{}),Pt=Object(n["a"])(Lt,jt,Tt,!1,null,null,null),At=Pt.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("时序数据库")]),a("el-breadcrumb-item",[t._v("元数据")])],1),a("el-divider",{attrs:{"content-position":"left"}},[t._v("元数据")]),!0===this.isType3?a("el-empty",{attrs:{description:"系统管理员无法使用该功能"}}):t._e(),!1===this.isType3?a("el-scrollbar",{staticStyle:{height:"95%",width:"100%"}},[a("div",{attrs:{id:"box"}})]):t._e()],1)},qt=[],Rt=a("a932"),$t=Rt["a"],Bt=(a("8736"),Object(n["a"])($t,Ft,qt,!1,null,null,null)),Ut=Bt.exports,zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"location"},[a("el-breadcrumb",{staticStyle:{height:"35px"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("时序数据库")]),a("el-breadcrumb-item",[t._v("数据查询")])],1)],1),a("div",{staticClass:"DataCheck"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("数据查询")]),!0===this.isType3?a("el-empty",{attrs:{description:"系统管理员无法使用该功能"}}):t._e(),!1===this.isType3?a("el-scrollbar",{staticStyle:{height:"95%",width:"100%"}},[a("div",{staticClass:"boxhead"},[a("el-tabs",{staticClass:"leftbox",model:{value:t.tabName,callback:function(e){t.tabName=e},expression:"tabName"}},[a("el-tab-pane",{attrs:{label:"指标",name:"first"}}),a("el-tab-pane",{attrs:{label:"轴线",name:"second"}})],1),a("el-dropdown",{staticClass:"rightbox",attrs:{trigger:"click"},on:{command:t.ChangeSource}},[a("span",{staticClass:"el-dropdown-link",staticStyle:{"font-size":"14px"}},[a("span",{staticStyle:{"margin-right":"15px"}},[t._v("数据源")]),a("span",{staticClass:"span-size"},[t._v(t._s(t.SelcetDataSource)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})])]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.DataSource,(function(e,i){return a("el-dropdown-item",{key:i,attrs:{command:e}},[t._v(t._s(e)+" ")])})),1)],1)],1),a("div",{staticClass:"boxbody"},[a("div",{staticClass:"firstbox"},[a("div",{staticClass:"Timebox"},[a("span",{staticClass:"el-dropdown-link"},[a("span",[t._v(" 时间选择: ")])]),a("el-date-picker",{staticStyle:{"margin-left":"10px"},attrs:{type:"datetimerange","picker-options":t.pickerOptions,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1),a("div",{staticClass:"checkbox"},[a("el-collapse",{model:{value:t.collapseName,callback:function(e){t.collapseName=e},expression:"collapseName"}},[t._l(t.infor,(function(e,i){return a("el-collapse-item",{key:i,attrs:{title:String.fromCharCode(Number(i)+65),name:i}},[a("div",{staticStyle:{width:"600px",float:"left"}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"指标"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.target,callback:function(a){t.$set(e,"target",a)},expression:"item.target"}})],1),a("el-form-item",{attrs:{label:"聚合函数"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.function,callback:function(a){t.$set(e,"function",a)},expression:"item.function"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"过滤"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择过滤"},model:{value:e.filtration,callback:function(a){t.$set(e,"filtration",a)},expression:"item.filtration"}},t._l(t.options_filtration,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",[a("el-checkbox",{model:{value:e.underclocking,callback:function(a){t.$set(e,"underclocking",a)},expression:"item.underclocking"}},[t._v("降频")])],1)],1)],1),a("i",{staticClass:"el-icon-delete",staticStyle:{float:"right","font-size":"20px","margin-right":"20px"},on:{click:function(e){return t.deletecol(i)}}})])})),a("el-collapse-item",{attrs:{title:String.fromCharCode(t.infor.length+65),name:"last"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.AddSearch}},[t._v("新增查询")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.SelectData}},[t._v("时序分析")])],1)],2)],1),a("div",{attrs:{id:"main"}})])])]):t._e()],1)])},Wt=[],Kt=a("ebbd"),Nt=Kt["a"],Vt=(a("b6bd"),Object(n["a"])(Nt,zt,Wt,!1,null,null,null)),Gt=Vt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("监控运维")]),a("el-breadcrumb-item",[t._v("仪表盘")])],1),a("div",{staticClass:"workspace"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("产品列表")]),!1!==this.isType3?a("el-empty",{attrs:{description:"系统管理员无法使用此功能"}}):t._e(),!1===this.isType3?a("div",{staticClass:"scrollbox"},[a("el-scrollbar",{staticStyle:{height:"95%",width:"100%"}},[a("div",{staticClass:"productList"},[a("div",{staticClass:"list"},t._l(t.productListData.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),(function(e){return a("div",{key:e.product_id,staticClass:"list-items",on:{click:function(a){return t.goDevice(e)}}},[a("el-card",{attrs:{shadow:"always","body-style":{padding:"10px"}}},[a("div",{staticClass:"image-container"},[a("el-image",{staticStyle:{width:"200px",height:"180px"},attrs:{src:e.images[0],fit:"cover"}})],1),a("h4",{staticStyle:{"margin-top":"8px"}},[t._v(t._s(e.product_name))])])],1)})),0),a("div",{staticClass:"pagination"},[a("el-pagination",{staticClass:"Page",attrs:{background:"",layout:"prev, pager, next",total:t.productListData.length,"page-size":t.pagesize,"current-page":t.currentPage},on:{"current-change":t.handleChange}})],1)])])],1):t._e()],1)],1)},Jt=[],Yt={data:function(){return{isType3:!1,user_id:"",token:"",company_id:"",productListData:[],currentPage:1,pagesize:4}},created:function(){var t=this;t.user_id=O.a.get("user_id"),t.token=O.a.get("token"),"3"===O.a.get("modal")?(t.company_id="1",t.isType3=!0):t.company_id=O.a.get("company_id"),t.getProductList()},methods:{getProductList:function(){var t=this,e="https://site.maple.today/IOTplatform/ServerMain?requestCode=005";_.a.get(e,{params:{user_id:t.user_id,token:t.token,company_id:t.company_id}}).then((function(e){"1"===e.data.result&&(t.productListData=e.data.data)})).catch((function(t){}))},goDevice:function(t){var e=JSON.stringify(t);this.$router.push({path:"/mainPage/dashBoard/deviceList",query:{product:encodeURIComponent(e)}})},handleChange:function(t){this.currentPage=t}}},Zt=Yt,Xt=(a("ec88"),Object(n["a"])(Zt,Ht,Jt,!1,null,"432e3fd2",null)),Qt=Xt.exports,te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("监控运维")]),a("el-breadcrumb-item",[t._v("数据监控")])],1),a("div",{staticClass:"DataMonitor"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("数据监控")]),"3"===t.modal?a("div",[a("div",{staticClass:"scrollbox",staticStyle:{height:"100%","overflow-x":"hidden"}},[a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("div",{staticClass:"data-monitor"},[a("div",{staticClass:"data-class"},[a("div",{staticClass:"card"},[a("div",{staticStyle:{"font-weight":"bold"}},[a("div",{staticClass:"content",staticStyle:{"margin-left":"10px"}},[t._v("接收数据量："+t._s(t.datar))])]),a("div")]),a("div",{staticClass:"card"},[a("div",{staticStyle:{"font-weight":"bold"}},[a("div",{staticClass:"content",staticStyle:{"margin-left":"10px"}},[t._v("发送数据量："+t._s(t.datas))])]),a("div")]),a("div",{staticClass:"card"},[a("div",{staticStyle:{"font-weight":"bold"}},[a("div",{staticClass:"content",staticStyle:{"margin-left":"10px"}},[t._v("丢弃数据量："+t._s(t.datad))])]),a("div")])]),a("div",{staticClass:"otherdata-class"},[a("div",{staticClass:"number-board"},[a("div",{staticClass:"othercard"},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[a("div",{staticStyle:{"font-size":"14px","font-weight":"bold","margin-left":"10px"}},[t._v(" 客户端数量："+t._s(t.cdata))]),a("i",{staticClass:"el-icon-s-platform",staticStyle:{"font-size":"40px",color:"#409eff"}})]),a("div")]),a("div",{staticClass:"othercard"},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[a("div",{staticStyle:{"font-size":"14px","font-weight":"bold","margin-left":"10px"}},[t._v(" 会话数量："+t._s(t.sedata))]),a("i",{staticClass:"el-icon-message",staticStyle:{"font-size":"40px",color:"#409eff"}})]),a("div")]),a("div",{staticClass:"othercard"},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[a("div",{staticStyle:{"font-size":"14px","font-weight":"bold","margin-left":"10px"}},[t._v(" 主题数量："+t._s(t.tdata))]),a("i",{staticClass:"el-icon-s-open",staticStyle:{"font-size":"40px",color:"#409eff"}})]),a("div")]),a("div",{staticClass:"othercard"},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[a("div",{staticStyle:{"font-size":"14px","font-weight":"bold","margin-left":"10px"}},[t._v(" 订阅数量："+t._s(t.sudata))]),a("i",{staticClass:"el-icon-collection-tag",staticStyle:{"font-size":"40px",color:"#409eff"}})]),a("div")])]),a("div",{staticClass:"Client"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("客户端列表")]),a("el-table",{staticStyle:{width:"1053px"},attrs:{data:t.clientList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"50"}}),a("el-table-column",{attrs:{prop:"clientid",label:"客户端标识",width:"200px"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"200px"}}),a("el-table-column",{attrs:{prop:"ip_address",label:"IP",width:"200px"}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间",width:"200px"}}),a("el-table-column",{attrs:{prop:"",label:"清除会话",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击按钮清除会话",placement:"top-start",enterable:!1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return t.Cleaning(e.row)}}})],1)]}}],null,!1,2711557471)})],1),a("el-pagination",{attrs:{"current-page":t.pagenum,"page-sizes":[1,2,5,10],"page-size":t.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.cdata},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])])],1)]):t._e(),"3"!==t.modal?a("div",[a("h2",{staticStyle:{"margin-left":"20px"}},[t._v("此页面为系统管理员专属")])]):t._e()],1)],1)},ee=[],ae={name:"DataMonitor",data:function(){return{datar:"",datas:"",datad:"",cdata:"",tdata:"",sedata:"",sudata:"",userID:"",companyID:"",token:"",modal:"",clientList:[],pagenum:"1",pagesize:"2",tclientid:""}},created:function(){this.token=O.a.get("token"),this.userID=O.a.get("user_id"),this.companyID=O.a.get("company_id"),this.modal=O.a.get("modal"),"3"===this.modal&&(this.fetchData1(),this.fetchData2(),this.fetchData3())},methods:{handleSizeChange:function(t){this.pagesize=t,this.fetchData3()},handleCurrentChange:function(t){this.pagenum=t,this.fetchData3()},fetchData1:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"029",user_id:t.userID,token:t.token}}).then((function(e){t.datas=e.data.data.data[0]["metrics"]["packets.publish.sent"],t.datar=e.data.data.data[0]["metrics"]["packets.publish.received"],t.datad=e.data.data.data[0]["metrics"]["packets.publish.dropped"]})).catch((function(t){}))},fetchData2:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"031",user_id:t.userID,token:t.token}}).then((function(e){t.cdata=e.data.data.data[0]["stats"]["connections.count"],t.tdata=e.data.data.data[0]["stats"]["topics.count"],t.sedata=e.data.data.data[0]["stats"]["sessions.count"],t.sudata=e.data.data.data[0]["stats"]["subscriptions.count"]})).catch((function(t){}))},fetchData3:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"030",user_id:t.userID,token:t.token,page:t.pagenum,page_con:t.pagesize}}).then((function(e){t.clientList=e.data.data.data})).catch((function(t){}))},Cleaning:function(t){var e=this;e.tclientid=t.clientid,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"032",user_id:e.userID,token:e.token,client_id:e.tclientid}}).then((function(t){alert("已清除会话。")})).catch((function(t){}))}}},ie=ae,re=(a("6e91"),Object(n["a"])(ie,te,ee,!1,null,"397c31b9",null)),se=re.exports,ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("监控运维")]),a("el-breadcrumb-item",{attrs:{to:{name:"DashBoard"}}},[t._v("仪表盘")]),a("el-breadcrumb-item",[t._v("设备列表")])],1),a("div",{staticClass:"workspace"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("设备列表")]),a("div",{staticClass:"scrollbox"},[a("el-scrollbar",{staticStyle:{height:"95%",width:"100%"}},[a("div",{staticClass:"productList"},[a("div",{staticClass:"list"},t._l(t.deviceList,(function(e){return a("div",{key:e.sensor_id,staticClass:"list-items",on:{click:function(a){return t.goData(e)}}},[a("el-card",{attrs:{shadow:"always","body-style":{padding:"10px"}}},[a("div",{staticClass:"image-container"}),a("h4",{staticStyle:{"margin-top":"8px"}},[t._v(t._s(e.sensor_name))])])],1)})),0)])])],1)],1)],1)},oe=[],le={data:function(){return{user_id:"",token:"",company_id:"",product:{},deviceList:[]}},created:function(){var t=this;t.user_id=O.a.get("user_id"),t.token=O.a.get("token"),"3"===O.a.get("modal")?t.company_id="1":t.company_id=O.a.get("company_id"),t.getRouteData(),t.getDeviceData()},methods:{getRouteData:function(){var t=this,e=decodeURIComponent(t.$route.query.product);t.product=JSON.parse(e)},goData:function(t){var e=JSON.stringify(t);this.$router.push({path:"/mainPage/dashBoard/deviceList/dataBoard",query:{device:encodeURIComponent(e)}})},getDeviceData:function(){var t=this,e="https://site.maple.today/IOTplatform/ServerMain?requestCode=025";_.a.get(e,{params:{user_id:t.user_id,token:t.token,company_id:t.company_id,product_id:t.product.product_id}}).then((function(e){if("1"===e.data.result){t.deviceList=e.data.data;for(var a=0;a<t.deviceList.length;a++)t.deviceList[a].data_format=t.product.data_format}})).catch((function(t){}))}}},ce=le,de=(a("9c18"),Object(n["a"])(ce,ne,oe,!1,null,"2b562ea3",null)),ue=de.exports,pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("监控运维")]),a("el-breadcrumb-item",[t._v("仪表盘")]),a("span",{staticStyle:{display:"flex","flex-direction":"row"}},[a("div",{staticStyle:{"font-weight":"700",color:"#000000",display:"flex","flex-direction":"row"},on:{click:t.goBack}},[t._v(" 设备列表 ")]),a("i",{staticClass:"el-icon-arrow-right",staticStyle:{color:"#9fa0a3"}})]),a("el-breadcrumb-item",[t._v("数据查看")])],1),a("div",{staticClass:"workspace"},[a("div",{staticClass:"title-bar"},[t.device?a("div",[t._v(t._s(t.device.sensor_name))]):t._e(),a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"margin-right":"5px"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择日期"},on:{change:t.getChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.dateOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",[a("el-select",{attrs:{size:"small",placeholder:"请选择日期"},on:{change:t.getType},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}},t._l(t.datatype,(function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})})),1)],1)])]),a("div",{staticClass:"scrollbox"},[a("el-scrollbar",{staticStyle:{height:"100%",width:"100%"}},[a("div",{staticClass:"data-board"},[a("div",{staticClass:"chartbox"},[a("div",{staticClass:"chart-container"},[a("div",{staticStyle:{width:"49%",height:"400px",border:"1px solid #aaaaaa","border-radius":"5px"},attrs:{id:"linechart1"}}),a("div",{staticStyle:{width:"49%",height:"400px",border:"1px solid #aaaaaa","border-radius":"5px"},attrs:{id:"linechart2"}})]),a("div",{staticStyle:{border:"1px solid #aaaaaa",color:"black","border-radius":"5px",height:"300px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.chartData.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),height:"250"}},[a("el-table-column",{attrs:{label:"Time",prop:"name"}}),a("el-table-column",{attrs:{label:"数值",prop:"value[1]"}})],1),a("div",{staticStyle:{width:"100%",height:"50px",display:"flex","justify-content":"center","align-items":"center"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.chartData.length,"page-size":t.pagesize,"current-page":t.currentPage},on:{"current-change":t.handleChange}})],1)],1)])])])],1)])],1)},me=[],_e=(a("5319"),a("4d63"),a("25f0"),a("4e82"),a("b680"),a("fb6a"),a("e7fc")),he=a.n(_e);String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"gm"),e)};var fe={data:function(){return{device:"",user_id:"",token:"",password:"",company_id:"",device_id:"",fetchdata:[],dateOptions:[],datatype:[],value:"",val:"",chartData:[],chartData2:[],newchartData:[],data:[],msg:"",currentPage:1,pagesize:10,length:""}},created:function(){this.getDateArray(),this.getDataType(),this.getRouteData(),this.getCookieData(),this.fetchDeviceData(),this.getMqtt()},watch:{msg:{deep:!0,handler:function(t){var e=this;e.fetchdata.push(t);for(var a=0;a<e.fetchdata.length;a++)delete e.fetchdata[a].company_id,delete e.fetchdata[a].sensor_id,delete e.fetchdata[a].device_id;var i=e.getBeforeDate(0);if(e.value===i){for(var r,s=e.sliceDataArray(i),n=s[0].data_format[0].name,o=0;o<s[0].data_format.length;o++)s[0].data_format[o].name===n&&(r=o);for(var l=[],c=0;c<s.length;c++){var d={name:"",value:[]};d.name=s[c].time,d.value.push(s[c].time),d.value.push(parseInt(s[c].data[r])),l.push(d)}var u=l.sort((function(t,e){return t.name>e.name?1:-1}));e.chartData=u;for(var p=[],m=0,_=e.chartData[0].value[1],h=e.chartData[0].value[1],f=0;f<e.chartData.length;f++)m+=e.chartData[f].value[1],_<e.chartData[f].value[1]&&(_=e.chartData[f].value[1]),h>e.chartData[f].value[1]&&(h=e.chartData[f].value[1]);m/=e.chartData.length,m=m.toFixed(2),p.push(m),p.push(_),p.push(h),e.newchartData=p}}},chartData:{deep:!0,handler:function(){var t=this;this.$nextTick((function(){setTimeout((function(){t.drawChart("linechart1")}),300)}))}},newchartData:{deep:!0,handler:function(){var t=this;this.$nextTick((function(){setTimeout((function(){t.drawChart2("linechart2")}),300)}))}}},methods:{goBack:function(){this.$router.go(-1)},handleChange:function(t){this.currentPage=t},getCookieData:function(){var t=this;t.user_id=O.a.get("user_id"),t.token=O.a.get("token"),t.company_id=O.a.get("company_id")},getRouteData:function(){var t=this,e=decodeURIComponent(t.$route.query.device);t.device=JSON.parse(e)},getBeforeDate:function(t){var e=new Date,a=e.getFullYear(),i=e.getMonth()+1,r=e.getDate();r<=t&&(i>1?i-=1:(a-=1,i=12)),e.setDate(e.getDate()-t),a=e.getFullYear(),i=e.getMonth()+1,r=e.getDate();var s=a+"-"+(i<10?"0"+i:i)+"-"+(r<10?"0"+r:r);return s},getDateArray:function(){for(var t=this,e=0;e<5;e++){var a={};a.value=t.getBeforeDate(e),a.label=t.getBeforeDate(e),t.dateOptions.push(a)}t.value=t.dateOptions[0].value},getDataType:function(){for(var t=this,e=decodeURIComponent(t.$route.query.device),a=JSON.parse(e),i=0;i<a.data_format.length;i++){var r={};r.value=a.data_format[i].name,r.label=a.data_format[i].name,t.datatype[i]=r}t.val=t.datatype[0].value},getYMDHMS:function(t){var e=new Date(t),a=e.getFullYear(),i=e.getMonth()+1,r=e.getDate(),s=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return i<10&&(i="0"+i),r<10&&(r="0"+r),s<10&&(s="0"+s),n<10&&(n="0"+n),o<10&&(o="0"+o),a+"-"+i+"-"+r+" "+s+":"+n+":"+o},getMqtt:function(){var t=this,e=this,a=O.a.get("user_id"),i=O.a.get("password"),r=O.a.get("company_id"),s={connectTimeout:4e3,clientId:a,username:a,password:i,keepalive:60,clean:!0},n="wss://mqtt.maple.today:8084/mqtt";this.client=he.a.connect(n,s);var o="update/"+r+"/#";this.client.on("connect",(function(){t.client.subscribe(o,(function(t){}))})),this.client.on("reconnect",(function(e){t.client.end(),O.a.remove("token"),location.reload()})),this.client.on("error",(function(t){})),this.client.on("message",(function(t,a){var i=JSON.parse(a.toString());if(e.device.sensor_id==i.sensor_id){var r={data:[],data_format:[],sensor_id:"",time:"",device_id:"",company_id:""};r.company_id=i.company_id,r.sensor_id=i.sensor_id,r.device_id=i.device_id,r.data=i.data_upload,r.data_format=e.device.data_format,r.time=e.getYMDHMS(parseInt(i.timestamp)),e.msg=r}}))},endMqtt:function(){this.client.end()},fetchDeviceData:function(){var t=this,e="https://site.maple.today/IOTplatform/ServerMain?requestCode=027";_.a.get(e,{params:{user_id:t.user_id,company_id:t.company_id,token:t.token,device_id:t.device.sensor_id}}).then((function(e){for(var a=0;a<e.data.data.length;a++){var i=e.data.data[a].data.replace("[",""),r=i.replace("]",""),s=r.replaceAll('"',"");e.data.data[a].data=s.split(","),e.data.data[a].data_format=t.device.data_format}t.fetchdata=e.data.data;for(var n=0;n<t.fetchdata.length;n++)delete t.fetchdata[n].company_id,delete t.fetchdata[n].sensor_id,delete t.fetchdata[n].device_id;for(var o,l=t.getBeforeDate(0),c=t.sliceDataArray(l),d=c[0].data_format[0].name,u=0;u<c[0].data_format.length;u++)c[0].data_format[u].name===d&&(o=u);for(var p=[],m=0;m<c.length;m++){var _={name:"",value:[]};_.name=c[m].time,_.value.push(c[m].time),_.value.push(parseInt(c[m].data[o])),p.push(_)}t.chartData=p.sort((function(t,e){return t.name>e.name?1:-1}));for(var h=[],f=0,g=t.chartData[0].value[1],v=t.chartData[0].value[1],b=0;b<t.chartData.length;b++)f+=t.chartData[b].value[1],g<t.chartData[b].value[1]&&(g=t.chartData[b].value[1]),v>t.chartData[b].value[1]&&(v=t.chartData[b].value[1]);f/=t.chartData.length,f=f.toFixed(2),h.push(f),h.push(g),h.push(v),t.newchartData=h})).catch((function(t){}))},sliceDataArray:function(t){for(var e=this,a=[],i=0;i<e.fetchdata.length;i++){var r=e.fetchdata[i].time.slice(0,10);r===t&&a.push(e.fetchdata[i])}return a},getChange:function(t){var e=this;e.value=t;var a,i=t,r=e.sliceDataArray(i);e.length=r.length,0===e.length&&(e.chartData=[],e.newchartData=[]);for(var s=0;s<r[0].data_format.length;s++)r[0].data_format[s].name===e.val&&(a=s);for(var n=[],o=0;o<r.length;o++){var l={name:"",value:[]};l.name=r[o].time,l.value.push(r[o].time),l.value.push(parseInt(r[o].data[a])),n.push(l)}e.chartData=n.sort((function(t,e){return t.name>e.name?1:-1})),e.chartData2=n.sort((function(t,e){return t.name>e.name?1:-1}));for(var c=[],d=0,u=e.chartData[0].value[1],p=e.chartData[0].value[1],m=0;m<e.chartData.length;m++)d+=e.chartData[m].value[1],u<e.chartData[m].value[1]&&(u=e.chartData[m].value[1]),p>e.chartData[m].value[1]&&(p=e.chartData[m].value[1]);d/=e.chartData.length,d=d.toFixed(2),c.push(d),c.push(u),c.push(p),e.newchartData=c},getType:function(t){var e=this;e.val=t;for(var a,i=e.sliceDataArray(e.value),r=t,s=0;s<i[0].data_format.length;s++)i[0].data_format[s].name===r&&(a=s);for(var n=[],o=0;o<i.length;o++){var l={name:"",value:[]};l.name=i[o].time,l.value.push(i[o].time),l.value.push(parseInt(i[o].data[a])),n.push(l)}e.chartData=n.sort((function(t,e){return t.name>e.name?1:-1})),e.chartData2=n.sort((function(t,e){return t.name>e.name?1:-1}));for(var c=[],d=0,u=e.chartData[0].value[1],p=e.chartData[0].value[1],m=0;m<e.chartData.length;m++)d+=e.chartData[m].value[1],u<e.chartData[m].value[1]&&(u=e.chartData[m].value[1]),p>e.chartData[m].value[1]&&(p=e.chartData[m].value[1]);d/=e.chartData.length,d=d.toFixed(2),c.push(d),c.push(u),c.push(p),e.newchartData=c},drawChart:function(t){var e=this.$echarts.init(document.getElementById(t)),a=this.chartData,i={title:{},tooltip:{trigger:"axis",formatter:function(t){t=t[0];var e=new Date(t.name),a=e.getHours(),i=e.getMinutes(),r=e.getSeconds();a<10&&(a="0"+a),i<10&&(i="0"+i),r<10&&(r="0"+r);var s=a+":"+i+":"+r;return e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+"/"+s+" - "+t.value[1]},axisPointer:{animation:!1}},xAxis:{type:"time",splitLine:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],axisLine:{show:!0,lineStyle:{width:1}}},series:[{type:"line",showSymbol:!1,areaStyle:{},hoverAnimation:!1,data:a}],dataZoom:[{type:"inside",start:0,end:100},{start:0,end:100}]};e.setOption(i),window.addEventListener("resize",(function(){e&&e.resize()}))},drawChart2:function(t){var e=this.$echarts.init(document.getElementById(t)),a={tooltip:{},xAxis:{type:"category",data:["均值","极大值","极小值"]},yAxis:{type:"value"},series:[{data:this.newchartData,type:"bar",itemStyle:{normal:{label:{show:!0,position:"top",textStyle:{color:"black",fontSize:16}}}}}]};e.setOption(a),window.addEventListener("resize",(function(){e&&e.resize()}))}},mounted:function(){var t=this;this.$nextTick((function(){setTimeout((function(){t.drawChart("linechart1"),t.drawChart2("linechart2")}),300)}))},beforeDestroy:function(){this.endMqtt()}},ge=fe,ve=(a("3554"),Object(n["a"])(ge,pe,me,!1,null,"9a9ad4ec",null)),be=ve.exports,ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",{attrs:{to:{name:"DataInformation"}}},[t._v("数据概览")]),a("el-breadcrumb-item",[t._v("网关概览详情")])],1),a("div",{staticClass:"ViewDetails"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("网关概览详情")]),a("div",{staticClass:"panel-body",staticStyle:{height:"90%","overflow-x":"hidden"}},["3"===t.modal?a("el-card",[a("el-table",{staticStyle:{width:"981px"},attrs:{data:t.companyList,stripe:"",border:"",title:"点击获取该公司网关列表"},on:{"row-click":t.GetCompany}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"280px"}}),a("el-table-column",{attrs:{prop:"company_name",label:"公司名称",width:"700px"}})],1),t.gatewayList.length>0?a("el-table",{staticStyle:{width:"981px"},attrs:{data:t.gatewayList,stripe:"",border:"",title:"点击获取该网关的时序设备数据"},on:{"row-click":t.GetChart}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"60px"}}),a("el-table-column",{attrs:{prop:"device_name",label:"设备名称",width:"200px"}}),a("el-table-column",{attrs:{prop:"device_id",label:"设备id",width:"200px"}}),a("el-table-column",{attrs:{prop:"dismiss",label:"设备状态",width:"200px"}}),a("el-table-column",{attrs:{prop:"company",label:"设备工厂",width:"200px"}}),a("el-table-column",{attrs:{label:"注册网关",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"未注册网关可点击此按钮注册",placement:"top-start",enterable:!1}},["待注册"===e.row.dismiss?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(a){return t.Register(e.row)}}}):t._e()],1)]}}],null,!1,331757021)})],1):t._e(),a("div",{staticStyle:{width:"800px",height:"300px","padding-left":"80px","margin-top":"50px"},attrs:{id:"EchartsView"}})],1):t._e(),"2"===t.modal?a("el-card",[a("el-button",{staticStyle:{"margin-left":"10px","margin-bottom":"10px",float:"right","margin-right":"55px"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" 添加网关 ")]),a("el-dialog",{attrs:{title:"添加网关",visible:t.dialogVisible,width:"3","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"addFormRef",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"网关名称",prop:"device_name"}},[a("el-input",{model:{value:t.addForm.device_name,callback:function(e){t.$set(t.addForm,"device_name",e)},expression:"addForm.device_name"}})],1)],1),a("el-form",{ref:"addFormRef",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"网关密码",prop:"password"}},[a("el-input",{model:{value:t.addForm.password,callback:function(e){t.$set(t.addForm,"password",e)},expression:"addForm.password"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1,t.Adding()}}},[t._v("确 定")])],1)],1),a("el-table",{staticStyle:{width:"981px"},attrs:{data:t.gatewayList,stripe:"",border:"",title:"点击获取该网关的时序设备数据"},on:{"row-click":t.GetChart}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"80px"}}),a("el-table-column",{attrs:{prop:"device_name",label:"设备名称",width:"225px"}}),a("el-table-column",{attrs:{prop:"device_id",label:"设备id",width:"225px"}}),a("el-table-column",{attrs:{prop:"dismiss",label:"设备状态",width:"225px"}}),a("el-table-column",{attrs:{prop:"company",label:"设备工厂",width:"225px"}})],1),a("div",{staticStyle:{width:"800px",height:"300px","padding-left":"80px","margin-top":"50px"},attrs:{id:"EchartsView"}})],1):t._e(),"1"===t.modal?a("el-card",[a("el-table",{staticStyle:{width:"981px"},attrs:{data:t.gatewayList,stripe:"",border:"",title:"点击获取该网关的时序设备数据"},on:{"row-click":t.GetChart}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"80px"}}),a("el-table-column",{attrs:{prop:"device_name",label:"设备名称",width:"225px"}}),a("el-table-column",{attrs:{prop:"device_id",label:"设备id",width:"225px"}}),a("el-table-column",{attrs:{prop:"dismiss",label:"设备状态",width:"225px"}}),a("el-table-column",{attrs:{prop:"company",label:"设备工厂",width:"225px"}})],1),a("div",{staticStyle:{width:"800px",height:"300px","padding-left":"80px","margin-top":"50px"},attrs:{id:"EchartsView"}})],1):t._e()],1)],1)],1)},De=[],we={name:"ViewDetails",data:function(){return{gatewayList:[],companyList:[],dataList:[],deviceidList:[],datanumList:[],deviceID:"",userID:"",token:"",companyID:"",modal:"",deviceid:"",tag:"0",companyID1:"",dialogVisible:!1,addForm:{device_name:"",password:""},addFormRules:{device_name:[{required:!0,message:"请输入网关名称",trigger:"blur"},{min:1,max:40,message:"网关名称的长度在1~40个字符区间",trigger:"blur"}],password:[{required:!0,message:"请输入网关密码",trigger:"blur"},{min:1,max:10,message:"网关密码的长度在1~10个字符区间",trigger:"blur"}]}}},created:function(){this.token=O.a.get("token"),this.userID=O.a.get("user_id"),this.modal=O.a.get("modal"),this.companyID=O.a.get("company_id"),"3"===this.modal?this.fetchCData():this.fetchGData()},methods:{GetChart:function(t){var e=this;e.deviceID=t.device_id,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"028",user_id:e.userID,company_id:e.companyID,token:e.token}}).then((function(t){e.dataList=t.data.data;for(var a=0;a<e.dataList.length;a++)e.dataList[a].net_id===e.deviceID&&(e.deviceidList.push(e.dataList[a].device_id),e.datanumList.push(e.dataList[a].dataNumber),e.tag="1");if("0"===e.tag)e.deviceidList=[],e.datanumList=[],alert("该网关下没有设备");else{var i=e.$echarts.init(document.getElementById("EchartsView")),r={title:{text:"最近24小时"},tooltip:{},legend:{data:["数据量"]},xAxis:{name:"设备id",data:e.deviceidList},yAxis:{},series:[{name:"数据量",type:"bar",data:e.datanumList}]};i.setOption(r),e.tag="0",e.Gotohere()}})).catch((function(t){}))},Gotohere:function(){this.$el.querySelector("#EchartsView").scrollIntoView({block:"start",behavior:"smooth"})},fetchCData:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"011",user_id:t.userID,token:t.token}}).then((function(e){t.companyList=e.data.data})).catch((function(t){}))},fetchGData:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"003",user_id:t.userID,company_id:t.companyID,token:t.token}}).then((function(e){t.gatewayList=e.data.data,t.ChangeDismiss()})).catch((function(t){}))},ChangeDismiss:function(){for(var t=this,e=0;e<t.gatewayList.length;e++)"1"===t.gatewayList[e].dismiss?t.gatewayList[e].dismiss="离线":"2"===t.gatewayList[e].dismiss?t.gatewayList[e].dismiss="在线":t.gatewayList[e].dismiss="待注册"},GetCompany:function(t){var e=this;e.companyID=t.company_id,e.fetchGData()},Register:function(t){var e=this;e.deviceid=t.device_id,e.companyID1=t.company,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"009",user_id:e.userID,company_id:e.companyID1,token:e.token,device_id:e.deviceid}}).then((function(t){})).catch((function(t){})),alert("已成功注册！请刷新页面。")},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},Adding:function(){var t=this,e=a("6c27").sha256,i=e(t.addForm.password);_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"008",user_id:t.userID,company_id:t.companyID,token:t.token,device_name:t.addForm.device_name,password:i}}).then((function(t){})).catch((function(t){}))}}},ke=we,xe=(a("6587"),Object(n["a"])(ke,ye,De,!1,null,"29cff868",null)),Ce=xe.exports,Me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",{attrs:{to:{name:"DataInformation"}}},[t._v("数据概览")]),a("el-breadcrumb-item",[t._v("平台概览详情")])],1),a("div",{staticClass:"ViewDetails2"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("平台概览详情")]),a("el-card",[a("el-row",{attrs:{gutter:"8"}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{placeholder:"请输入内容"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)],1),a("el-table",{staticStyle:{width:"901px"},attrs:{data:t.platformlist,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"100px"}}),a("el-table-column",{attrs:{prop:"name",label:"名称",width:"400px"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"400px"}})],1)],1)],1)],1)},Ie=[],Se={name:"ViewDetails2",data:function(){return{platformlist:[{name:"数据流1",status:"running"},{name:"数据流2",status:"unrunning"},{name:"数据流3",status:"alert"}]}},methods:{}},Ee=Se,Oe=(a("da77"),Object(n["a"])(Ee,Me,Ie,!1,null,"700a3b9c",null)),je=Oe.exports,Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("个人详情")])],1),a("div",{staticClass:"PersonnalDetails"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("个人详情")]),a("div",{staticClass:"panel-body",staticStyle:{height:"90%","overflow-x":"hidden"}},["1"===t.modal?a("el-card",[a("div",{staticStyle:{"margin-left":"10px"}},[a("h4",[t._v("用户id："+t._s(t.userID))]),a("h4",[t._v("所在工厂："+t._s(t.companyID))])]),a("el-button",{staticStyle:{"margin-left":"10px","margin-bottom":"10px",float:"left","margin-right":"55px"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" 申请加入工厂 ")]),a("el-dialog",{attrs:{title:"申请加入工厂",visible:t.dialogVisible,width:"3","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"addFormRef",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"工厂id",prop:"factory_id"}},[a("el-input",{model:{value:t.addForm.factory_id,callback:function(e){t.$set(t.addForm,"factory_id",e)},expression:"addForm.factory_id"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1,t.Applying()}}},[t._v("确 定")])],1)],1)],1):t._e(),"2"===t.modal?a("el-card",[a("div",{staticStyle:{"margin-left":"10px"}},[a("h4",[t._v("用户id："+t._s(t.userID))]),a("h4",[t._v("所在工厂："+t._s(t.companyID))]),a("h4",[t._v("申请人员列表：")])]),a("el-button",{staticStyle:{width:"200px"},attrs:{stripe:"",border:"",title:"点击获取申请人员列表"},on:{click:t.fetchData1}},[t._v(" 申请列表 ")]),a("el-button",{staticStyle:{width:"200px"},attrs:{stripe:"",border:"",title:"点击获取工厂用户列表"},on:{click:t.fetchData2}},[t._v(" 用户列表 ")]),t.requestList.length>0?a("el-table",{staticStyle:{width:"981px"},attrs:{data:t.requestList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"80px"}}),a("el-table-column",{attrs:{prop:"company_id",label:"工厂id",width:"225px"}}),a("el-table-column",{attrs:{prop:"user_id",label:"用户id",width:"225px"}}),a("el-table-column",{attrs:{prop:"dismiss",label:"状态",width:"225px"}}),a("el-table-column",{attrs:{prop:"",label:"处理申请",width:"225px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"申请中的用户点此按钮同意",placement:"top-start",enterable:!1}},["申请中"===e.row.dismiss?a("el-button",{attrs:{type:"success",icon:"el-icon-check",size:"small"},on:{click:function(a){return t.Register1(e.row)}}}):t._e()],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"申请中的用户点此按钮拒绝",placement:"top-start",enterable:!1}},["申请中"===e.row.dismiss?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return t.Register2(e.row)}}}):t._e()],1)]}}],null,!1,3118057372)})],1):t._e(),t.personList.length>0?a("el-table",{staticStyle:{width:"981px"},attrs:{data:t.personList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"50px"}}),a("el-table-column",{attrs:{prop:"company",label:"工厂id",width:"75px"}}),a("el-table-column",{attrs:{prop:"user_id",label:"用户id",width:"100px"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"100px"}}),a("el-table-column",{attrs:{prop:"modal",label:"权限",width:"100px"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"100px"}}),a("el-table-column",{attrs:{prop:"phoneNumber",label:"电话号码",width:"150px"}}),a("el-table-column",{attrs:{prop:"otherplat",label:"其它平台",width:"100px"}}),a("el-table-column",{attrs:{prop:"dismiss",label:"状态",width:"75px"}}),a("el-table-column",{attrs:{prop:"",label:"操作处理",width:"130px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点此按钮删除工厂用户",placement:"top-start",enterable:!1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return t.Register4(e.row)}}})],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点此按钮升级用户权限",placement:"top-start",enterable:!1}},["工厂管理员"!==e.row.modal?a("el-button",{attrs:{type:"success",icon:"el-icon-check",size:"small"},on:{click:function(a){return t.Register3(e.row)}}}):t._e()],1)]}}],null,!1,2004853929)})],1):t._e()],1):t._e(),"3"===t.modal?a("el-card",[a("div",{staticStyle:{"margin-left":"10px"}},[a("h4",[t._v("系统管理员")])]),a("el-button",{staticStyle:{width:"200px"},attrs:{stripe:"",border:"",title:"点击获取所有用户列表"},on:{click:t.fetchData3}},[t._v(" 用户列表 ")]),t.allperList.length>0?a("el-table",{staticStyle:{width:"981px"},attrs:{data:t.allperList,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"#",width:"50px"}}),a("el-table-column",{attrs:{prop:"company",label:"工厂id",width:"70px"}}),a("el-table-column",{attrs:{prop:"user_id",label:"用户id",width:"100px"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"100px"}}),a("el-table-column",{attrs:{prop:"modal",label:"权限",width:"75px"}}),a("el-table-column",{attrs:{prop:"email",label:"邮箱",width:"100px"}}),a("el-table-column",{attrs:{prop:"phoneNumber",label:"电话号码",width:"150px"}}),a("el-table-column",{attrs:{prop:"otherplat",label:"其它平台",width:"80px"}}),a("el-table-column",{attrs:{prop:"dismiss",label:"状态",width:"75px"}}),a("el-table-column",{attrs:{prop:"",label:"操作处理",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击此按钮升级用户为系统管理员",placement:"top-start",enterable:!1}},["系统管理员"!==e.row.modal?a("el-button",{attrs:{type:"success",icon:"el-icon-check",size:"small"},on:{click:function(a){return t.Register5(e.row)}}}):t._e()],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击此按钮升级用户为工厂管理员",placement:"top-start",enterable:!1}},["0"!==e.row.company&&"普通用户"===e.row.modal?a("el-button",{attrs:{type:"warning",icon:"el-icon-check",size:"small"},on:{click:function(a){return t.Register3(e.row)}}}):t._e()],1),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击此按钮初始化用户",placement:"top-start",enterable:!1}},["0"!==e.row.company?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(a){return t.Register4(e.row)}}}):t._e()],1)]}}],null,!1,438806853)})],1):t._e()],1):t._e()],1)],1)],1)},Le=[],Pe={name:"PersonnalDetails",data:function(){return{token:"",userID:"",modal:"",companyID:"",requestList:[],personList:[],allreqList:[],allperList:[],requestID:"",companyID1:"",tuserID:"",dialogVisible:!1,addForm:{factory_id:""},addFormRules:{factory_id:[{required:!0,message:"请输入请求加入的工厂id",trigger:"blur"},{min:1,max:11,message:"工厂id的长度在1~11个字符区间",trigger:"blur"}]}}},created:function(){this.token=O.a.get("token"),this.userID=O.a.get("user_id"),this.modal=O.a.get("modal"),this.companyID=O.a.get("company_id")},methods:{fetchData1:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"014",user_id:t.userID,token:t.token,company_id:t.companyID}}).then((function(e){t.requestList=e.data.data,t.ChangeDismiss1()})).catch((function(t){}))},ChangeDismiss1:function(){for(var t=this,e=0;e<t.requestList.length;e++)"0"===t.requestList[e].dismiss?t.requestList[e].dismiss="申请失败":"1"===t.requestList[e].dismiss?t.requestList[e].dismiss="申请中":t.requestList[e].dismiss="通过"},Applying:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"013",user_id:t.userID,token:t.token,company_id:t.addForm.factory_id}}).then((function(t){})).catch((function(t){}))},Register1:function(t){var e=this;e.requestID=t.request_id,e.companyID1=t.company_id,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"015",user_id:e.userID,company_id:e.companyID1,token:e.token,type:"1",request_id:e.requestID}}).then((function(t){})).catch((function(t){})),alert("已通过申请！请刷新页面。")},Register2:function(t){var e=this;e.requestID=t.request_id,e.companyID1=t.company_id,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"015",user_id:e.userID,company_id:e.companyID1,token:e.token,type:"0",request_id:e.requestID}}).then((function(t){})).catch((function(t){})),alert("已拒绝申请！请刷新页面。")},fetchData2:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"016",user_id:t.userID,token:t.token,company_id:t.companyID}}).then((function(e){t.personList=e.data.data,t.ChangeDismiss2()})).catch((function(t){}))},ChangeDismiss2:function(){for(var t=this,e=0;e<t.personList.length;e++)t.personList[e].dismiss="通过","1"===t.personList[e].modal?t.personList[e].modal="普通用户":"2"===t.personList[e].modal&&(t.personList[e].modal="工厂管理员")},Register3:function(t){var e=this;e.tuserID=t.user_id,e.companyID1=t.company,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"017",user_id:e.userID,company_id:e.companyID1,token:e.token,type:"1",target_user_id:e.tuserID}}).then((function(t){})).catch((function(t){})),alert("已升级权限！请刷新页面。")},Register4:function(t){var e=this;e.tuserID=t.user_id,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"018",user_id:e.userID,company_id:e.companyID,token:e.token,target_user_id:e.tuserID}}).then((function(t){})).catch((function(t){})),alert("已删除该用户！请刷新页面。")},fetchData3:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"022",user_id:t.userID,token:t.token}}).then((function(e){t.allperList=e.data.data,t.ChangeDismiss3()})).catch((function(t){}))},ChangeDismiss3:function(){for(var t=this,e=0;e<t.allperList.length;e++)t.allperList[e].dismiss="通过","1"===t.allperList[e].modal?t.allperList[e].modal="普通用户":"2"===t.allperList[e].modal?t.allperList[e].modal="工厂管理员":t.allperList[e].modal="系统管理员"},Register5:function(t){var e=this;e.tuserID=t.user_id,_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"017",user_id:e.userID,company_id:e.companyID,token:e.token,type:"2",target_user_id:e.tuserID}}).then((function(t){})).catch((function(t){})),alert("已升级权限！请刷新页面。")}}},Ae=Pe,Fe=(a("dab7"),Object(n["a"])(Ae,Te,Le,!1,null,"0ac50f8e",null)),qe=Fe.exports,Re=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("设置")])],1),a("div",{staticClass:"Settings"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("设置")]),a("el-card",[a("el-button",{staticStyle:{"margin-left":"10px","margin-bottom":"10px"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" 修改StreamSets密码 ")]),a("el-dialog",{attrs:{title:"修改StreamSets密码",visible:t.dialogVisible,width:"3","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"addFormRef",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"新密码",prop:"password"}},[a("el-input",{model:{value:t.addForm.password,callback:function(e){t.$set(t.addForm,"password",e)},expression:"addForm.password"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1,t.Changepassword()}}},[t._v("确 定")])],1)],1),a("br"),a("el-button",{staticStyle:{"margin-left":"10px","margin-bottom":"10px","margin-top":"10px"},on:{click:t.gotolink8}},[t._v(" 修改用户密码 ")]),a("br"),a("el-button",{staticStyle:{"margin-left":"10px","margin-bottom":"10px","margin-top":"10px"},on:{click:function(e){t.dialogVisible1=!0}}},[t._v(" 修改用户名 ")]),a("el-dialog",{attrs:{title:"修改用户名",visible:t.dialogVisible1,width:"3","append-to-body":""},on:{"update:visible":function(e){t.dialogVisible1=e}}},[a("el-form",{ref:"addFormRef1",attrs:{model:t.addForm1,rules:t.addFormRules1,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"新用户名",prop:"username"}},[a("el-input",{model:{value:t.addForm1.username,callback:function(e){t.$set(t.addForm1,"username",e)},expression:"addForm1.username"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible1=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible1=!1,t.Changeusername()}}},[t._v("确 定")])],1)],1),a("br"),a("el-button",{staticStyle:{"margin-top":"10px","margin-bottom":"10px","margin-left":"10px"},on:{click:t.gotolink6}},[t._v(" 退出登录 ")])],1)],1)],1)},$e=[],Be={name:"Settings",data:function(){return{token:"",userID:"",modal:"",companyID:"",dialogVisible:!1,dialogVisible1:!1,addForm:{password:""},addFormRules:{password:[{required:!0,message:"请输入新的StreamSets密码",trigger:"blur"},{min:6,max:18,message:"StreamSets密码的长度在6~18个字符区间",trigger:"blur"}]},addForm1:{username:""},addFormRules1:{username:[{required:!0,message:"请输入新的用户名",trigger:"blur"},{min:1,max:40,message:"用户名的长度在1~40个字符区间",trigger:"blur"}]}}},created:function(){this.token=O.a.get("token"),this.userID=O.a.get("user_id"),this.modal=O.a.get("modal"),this.companyID=O.a.get("company_id")},methods:{Changeusername:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"033",user_id:t.userID,token:t.token,username:t.addForm1.username}}).then((function(t){})).catch((function(t){}))},Changepassword:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"023",user_id:t.userID,token:t.token,password:t.addForm.password}}).then((function(t){})).catch((function(t){}))},gotolink6:function(){O.a.remove("token"),O.a.remove("user_id"),O.a.remove("modal"),O.a.remove("company_id"),this.$router.push({name:"Loading"})},gotolink8:function(){alert("即将进行页面跳转\n请前往登陆页面进行密码修改。"),O.a.remove("token"),O.a.remove("user_id"),O.a.remove("modal"),O.a.remove("company_id"),this.$router.push({name:"Loading"})}}},Ue=Be,ze=(a("cd62"),Object(n["a"])(Ue,Re,$e,!1,null,"0110f4d1",null)),We=ze.exports,Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{staticStyle:{height:"4%"},attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("首页")]),a("el-breadcrumb-item",[t._v("设备地图")])],1),a("div",{staticClass:"DeviceMap"},[a("el-divider",{attrs:{"content-position":"left"}},[t._v("设备地图(设备总数："+t._s(t.devicenum)+", 工厂总数："+t._s(t.factorynum)+")")]),t._m(0)],1)],1)},Ne=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Show"},[a("div",{attrs:{id:"container1"}})])}],Ve=(a("a15b"),{name:"DeviceMap",data:function(){return{deviceList:[],alldevice:[],companyList:[],mycompany:{},map:"",infoWindow:"",devicenum:"",factorynum:"",marker:"",token:"",userID:"",companyID:"",modal:""}},created:function(){this.token=O.a.get("token"),this.userID=O.a.get("user_id"),this.companyID=O.a.get("company_id"),this.modal=O.a.get("modal"),"3"===this.modal?this.fetchData():this.fetchaData()},mounted:function(){this.loadmap()},methods:{changeTime:function(){for(var t=this,e=0;e<t.companyList.length;e++)t.companyList[e].create_time=t.timestampToTime(t.companyList[e].create_time)},timestampToTime:function(t){var e=new Date(parseInt(t)),a=e.getFullYear(),i=e.getMonth()+1,r=e.getDate(),s=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return a+"/"+i+"/"+r+" "+s+":"+n+":"+o},loadmap:function(){this.map=new AMap.Map("container1",{center:[118.792221,31.938254],zoom:8})},fetchData:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"011",user_id:t.userID,token:t.token}}).then((function(e){t.companyList=e.data.data,t.changeTime(),t.putCData(),t.fetchDData()})).catch((function(t){}))},fetchDData:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"019",user_id:t.userID,token:t.token}}).then((function(e){t.alldevice=e.data.data,t.devicenum=t.alldevice.length})).catch((function(t){}))},putCData:function(){var t=this;t.infoWindow=new AMap.InfoWindow({offset:new AMap.Pixel(0,-20)});for(var e=0;e<t.companyList.length;e++){var i=[];i.push("<h4>"+t.companyList[e].company_name+"</h4>"),i.push("<p>公司ID:"+t.companyList[e].company_id+"</p>"),i.push("<p>创建时间:"+t.companyList[e].create_time+"</p>"),t.marker=new AMap.Marker({position:new AMap.LngLat(t.companyList[e].longitude,t.companyList[e].latitude),offset:new AMap.Pixel(-10,-10),icon:new AMap.Icon({image:a("6346"),size:new AMap.Size(52,52),imageSize:new AMap.Size(32,32)}),title:t.companyList[e].company_name}),t.marker.content=i.join(""),t.marker.on("click",t.markerClick),t.marker.emit("click",{target:t.marker}),t.marker.setMap(t.map)}t.factorynum=t.companyList.length},markerClick:function(t){var e=this;e.infoWindow.setContent(t.target.content),e.infoWindow.open(e.map,t.target.getPosition())},fetchaData:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"021",user_id:t.userID,token:t.token,company_id:t.companyID}}).then((function(e){t.mycompany=e.data.data,t.putGData()})).catch((function(t){})),"0"===t.companyID?t.factorynum="0":t.factorynum="1"},putGData:function(){var t=this;_.a.get("https://site.maple.today/IOTplatform/ServerMain",{params:{requestCode:"007",user_id:t.userID,token:t.token,company_id:t.companyID}}).then((function(e){t.deviceList=e.data.data,t.devicenum=t.deviceList.length})).catch((function(t){})),t.marker=new AMap.Marker({position:new AMap.LngLat(t.mycompany.longitude,t.mycompany.latitude),offset:new AMap.Pixel(-10,-10),icon:new AMap.Icon({image:a("6346"),size:new AMap.Size(52,52),imageSize:new AMap.Size(32,32)}),title:t.mycompany.company_name}),t.infoWindow=new AMap.InfoWindow({offset:new AMap.Pixel(0,-20)});var e=[];e.push("<h4>"+t.mycompany.company_name+"</h4>"),e.push("<p>公司ID:"+t.mycompany.company_id+"</p>"),e.push("<p>创建时间:"+t.mycompany.create_time+"</p>"),t.marker.content=e.join(""),t.marker.on("click",t.markerClick),t.marker.emit("click",{target:t.marker}),t.marker.setMap(t.map)}}}),Ge=Ve,He=(a("a309"),Object(n["a"])(Ge,Ke,Ne,!1,null,null,null)),Je=He.exports;i["default"].use(d["a"]);var Ye=[{path:"/",name:"Loading",component:y},{path:"/register",name:"Register",component:M},{path:"/mainPage",name:"MainPage",children:[{path:"dataInformation",name:"DataInformation",component:A},{path:"dataInformation/viewDetails",name:"ViewDetails",component:Ce},{path:"dataInformation/viewDetails2",name:"ViewDetails2",component:je},{path:"personnalDetails",name:"PersonnalDetails",component:qe},{path:"settings",name:"Settings",component:We},{path:"map",name:"Map",component:B},{path:"devicemap",name:"DeviceMap",component:Je},{path:"productionManage",name:"ProductionManage",component:Ot},{path:"productionManage/addProduction",name:"AddProduction",component:vt,props:!0},{path:"productionManage/fixProduction",name:"FixProduction",component:xt,props:!0},{path:"deviceManage",name:"DeviceManage",props:!0,component:V},{path:"deviceManage/deviceInformation",name:"DeviceInformation",component:tt,props:!0},{path:"deviceManage/addCompony",name:"AddCompony",component:nt,props:!0},{path:"deviceManage/addDevice",name:"AddDevice",component:pt,props:!0},{path:"foreData",name:"ForeData",component:Ut},{path:"dataFlout",name:"DataFlout",component:At},{path:"dataCheck",name:"DataCheck",component:Gt},{path:"dashBoard",name:"DashBoard",component:Qt},{path:"dashBoard/deviceList",name:"DeviceList",component:ue},{path:"dashBoard/deviceList/dataBoard",name:"DataBoard",component:be},{path:"dataMonitor",name:"DataMonitor",component:se}],component:function(){return a.e("about").then(a.bind(null,"4385"))}}],Ze=new d["a"]({mode:"hash",base:"",routes:Ye});Ze.beforeEach((function(t,e,a){if("/"===t.path||"/register"===t.path)a();else{var i=O.a.get("token");"null"===i||""===i||void 0===i?a("/"):a()}}));var Xe=Ze,Qe=a("2f62");i["default"].use(Qe["a"]);var ta=new Qe["a"].Store({state:{},mutations:{},actions:{},modules:{}}),ea=a("5c96"),aa=a.n(ea),ia=(a("0fae"),a("f24c"),a("2106")),ra=a.n(ia),sa=a("8f9b"),na=a.n(sa);i["default"].prototype.$echarts=j,i["default"].use(na.a),i["default"].use(ra.a,_.a),i["default"].prototype.$axios=_.a,na.a.initAMapApiLoader({key:"e2df70d22396a3f82829ecc392bb0d32",plugin:["AMap.Scale","AMap.OverView","AMap.ToolBar","AMap.MapType","AMap.PlaceSearch","AMap.Geolocation","AMap.Geocoder","AMap.DistrictSearch","AMap.Maker"],v:"1.4.4",uiVersion:"1.0"}),i["default"].config.productionTip=!1,i["default"].use(aa.a),new i["default"]({router:Xe,store:ta,render:function(t){return t(c)}}).$mount("#app")},cd62:function(t,e,a){"use strict";a("1734")},da77:function(t,e,a){"use strict";a("dcc2")},da82:function(t,e,a){},dab7:function(t,e,a){"use strict";a("3d1f")},dcc2:function(t,e,a){},dcf2:function(t,e,a){"use strict";a("7878")},e314:function(t,e,a){},e5ff:function(t,e,a){"use strict";a("9baf")},e901:function(t,e,a){},ea5a:function(t,e,a){"use strict";a("bbc2")},ebbd:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("a434"),core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_splice_js__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4e82"),core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_sort_js__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("a9e3"),core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_number_constructor_js__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("b0c0"),core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_function_name_js__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("5319"),core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_string_replace_js__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("1276"),core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("841c"),core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_7__),echarts__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("313e"),axios__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_9__),qs__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("4328"),qs__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(qs__WEBPACK_IMPORTED_MODULE_10__),js_cookie__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("852e"),js_cookie__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(js_cookie__WEBPACK_IMPORTED_MODULE_11__),mqtt__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("e7fc"),mqtt__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(mqtt__WEBPACK_IMPORTED_MODULE_12__);function Fre2(t,e){var a=-1,i=0,r="",s=0,n=0;for(n=0;n<t.length;n++)if(n%e===0){if(n-a!==1&&(s=i/(n-a),t.splice(a,n-a,{name:r,value:[r,s]}),n>=t.length))break;a=n,i=parseFloat(t[n].value[1]),r=t[n].name}else i+=parseFloat(t[n].value[1]);return n-a!==1&&n<t.length&&(s=i/(n-a),t.splice(a,n-a,{name:r,value:[r,s]})),t}function SubFre(t){var e=-1,a=0,i="",r=0,s=0;for(s=0;s<t.length;s++)if(t[s].name!==i){if(s-e!==1&&(r=a/(s-e),t.splice(e,s-e,{name:i,value:[i,r]}),s>=t.length))break;e=s,a=parseFloat(t[s].value[1]),i=t[s].name}else a+=parseFloat(t[s].value[1]);return s-e!==1&&s<t.length&&(r=a/(s-e),t.splice(e,s-e,{name:i,value:[i,r]})),t}function FunctionData(t,e){var a=0,i=0,r=0,s=-1/0,n=1/0;if("求和"===t){for(i=0,a=0;a<e.length;a++)i+=parseFloat(e[a].value[1]);return i}if("求方差"===t){for(i=0,a=0;a<e.length;a++)i+=parseFloat(e[a].value[1]);for(r=i/e.length,a=0;a<e.length;a++)i+=Math.pow(r-parseFloat(e[a].value[1]),2);return Math.sqrt(i/e.length,2)}if("求平均"===t){for(i=0,a=0;a<e.length;a++)i+=parseFloat(e[a].value[1]);return r=i/e.length,r}if("求最大"===t){for(a=0;a<e.length;a++)parseFloat(e[a].value[1])>s&&(s=parseFloat(e[a].value[1]));return s}if("求最小"===t){for(a=0;a<e.length;a++)parseFloat(e[a].value[1])<n&&(n=parseFloat(e[a].value[1]));return n}return NaN}function CompareDate(t,e){return new Date(t.replace(/-/g,"/"))>new Date(e.replace(/-/g,"/"))}function compare(t,e){var a=t.name,i=e.name;return new Date(a.replace(/-/g,"/"))>new Date(i.replace(/-/g,"/"))?-1:new Date(i.replace(/-/g,"/"))>new Date(a.replace(/-/g,"/"))?1:0}function CheckDate(t,e,a){for(var i=0;i<a.length;){if(i>=a.length)break;CompareDate(t,a[i].name)||CompareDate(a[i].name,e)?a.splice(i,1):i++}return a}function TargetData(t,e){var a=0,i=0,r="",s="";t=t.replace("请输入指标eg:",""),t=t.replace(/\n/g,"");var n=t.split(";");for(a=0;a<n.length;a++)if(-1!==n[a].search("temperature>="))for(r=n[a],r=r.replace("temperature>=",""),r=parseFloat(r),i=0;i<e.temperature.length;){if(i>=e.temperature.length)break;s=e.temperature[i].value[1],s=parseFloat(s),s<r?e.temperature.splice(i,1):i++}else if(-1!==n[a].search("temperature>")&&-1===n[a].search("="))for(r=n[a].replace("temperature>",""),r=parseFloat(r),i=0;i<e.temperature.length;){if(i>=e.temperature.length)break;s=e.temperature[i].value[1],s=parseFloat(s),s<=r?e.temperature.splice(i,1):i++}else if(-1!==n[a].search("temperature<="))for(r=n[a].replace("temperature<=",""),r=parseFloat(r),i=0;i<e.temperature.length;){if(i>=e.temperature.length)break;s=e.temperature[i].value[1],s=parseFloat(s),s>r?e.temperature.splice(i,1):i++}else if(-1!==n[a].search("temperature<")&&-1===n[a].search("="))for(r=n[a].replace("temperature<",""),r=parseFloat(r),i=0;i<e.temperature.length;){if(i>=e.temperature.length)break;s=e.temperature[i].value[1],s=parseFloat(s),s>=r?e.temperature.splice(i,1):i++}else if(-1!==n[a].search("humidity>="))for(r=n[a].replace("humidity>=",""),r=parseFloat(r),i=0;i<e.humidity.length;){if(i>=e.humidity.length)break;s=e.humidity[i].value[1],s=parseFloat(s),s<r?e.humidity.splice(i,1):i++}else if(-1!==n[a].search("humidity>")&&-1===n[a].search("="))for(r=n[a].replace("humidity>",""),r=parseFloat(r),i=0;i<e.humidity.length;){if(i>=e.humidity.length)break;s=e.humidity[i].value[1],s=parseFloat(s),s<=r?e.humidity.splice(i,1):i++}else if(-1!==n[a].search("humidity<="))for(r=n[a].replace("humidity<=",""),r=parseFloat(r),i=0;i<e.humidity.length;){if(i>=e.humidity.length)break;s=e.humidity[i].value[1],s=parseFloat(s),s>r?e.humidity.splice(i,1):i++}else if(-1!==n[a].search("humidity<")&&-1===n[a].search("="))for(r=n[a].replace("humidity<",""),r=parseFloat(r),i=0;i<e.humidity.length;){if(i>=e.humidity.length)break;s=e.humidity[i].value[1],s=parseFloat(s),s>=r?e.humidity.splice(i,1):i++}else if(-1!==n[a].search("voltage>="))for(r=n[a].replace("voltage>=",""),r=parseFloat(r),i=0;i<e.voltage.length;){if(i>=e.voltage.length)break;s=e.voltage[i].value[1],s=parseFloat(s),s<r?e.voltage.splice(i,1):i++}else if(-1!==n[a].search("voltage>")&&-1===n[a].search("="))for(r=n[a].replace("voltage>",""),r=parseFloat(r),i=0;i<e.voltage.length;){if(i>=e.voltage.length)break;s=e.voltage[i].value[1],s=parseFloat(s),s<=r?e.voltage.splice(i,1):i++}else if(-1!==n[a].search("voltage<="))for(r=n[a].replace("voltage<=",""),r=parseFloat(r),i=0;i<e.voltage.length;){if(i>=e.voltage.length)break;s=e.voltage[i].value[1],s=parseFloat(s),s>r?e.voltage.splice(i,1):i++}else if(-1!==n[a].search("voltage<")&&-1===n[a].search("="))for(r=n[a].replace("voltage<",""),r=parseFloat(r),i=0;i<e.voltage.length;){if(i>=e.voltage.length)break;s=e.voltage[i].value[1],s=parseFloat(s),s>=r?e.voltage.splice(i,1):i++}else if(-1!==n[a].search("electricity>="))for(r=n[a].replace("electricity>=",""),r=parseFloat(r),i=0;i<e.electricity.length;){if(i>=e.electricity.length)break;s=e.electricity[i].value[1],s=parseFloat(s),s<r?e.electricity.splice(i,1):i++}else if(-1!==n[a].search("electricity>")&&-1===n[a].search("="))for(r=n[a].replace("electricity>",""),r=parseFloat(r),i=0;i<e.electricity.length;){if(i>=e.electricity.length)break;s=e.electricity[i].value[1],s=parseFloat(s),s<=r?e.electricity.splice(i,1):i++}else if(-1!==n[a].search("electricity<="))for(r=n[a].replace("electricity<=",""),r=parseFloat(r),i=0;i<e.electricity.length;){if(i>=e.electricity.length)break;s=e.electricity[i].value[1],s=parseFloat(s),s>r?e.electricity.splice(i,1):i++}else if(-1!==n[a].search("electricity<")&&-1===n[a].search("="))for(r=n[a].replace("electricity<",""),r=parseFloat(r),i=0;i<e.electricity.length;){if(i>=e.electricity.length)break;s=e.electricity[i].value[1],s=parseFloat(s),s>=r?e.electricity.splice(i,1):i++}return e}function TimeChangeString(t){return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+(t.getHours()>=10?t.getHours():"0"+t.getHours())+":"+(t.getMinutes()>=10?t.getMinutes():"0"+t.getMinutes())+":"+(t.getSeconds()>=10?t.getSeconds():"0"+t.getSeconds())}__webpack_exports__["a"]={data:function(){return{isType3:!1,tabName:"first",DataSource:[],SelcetDataSource:"选择数据源",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},value2:[],time:"请选择",collapseName:[0,"last"],infor:[{target:"请输入指标eg:\ntemperature>=40;\ntemperature<20",function:"请选择聚合函数",filtration:[],underclocking:!1}],options:[{value:"求和",label:"求和"},{value:"求方差",label:"求方差"},{value:"求平均",label:"求平均"},{value:"求最大",label:"求最大"},{value:"求最小",label:"求最小"}],options_filtration:[{value:"默认",label:"默认"},{value:"temperature",label:"temperature"},{value:"humidity",label:"humidity"},{value:"voltage",label:"voltage"},{value:"electricity",label:"electricity"}],ProductionsInfor:[],DeviceInfor:[],Device:[]}},mounted:function mounted(){var user_id=js_cookie__WEBPACK_IMPORTED_MODULE_11___default.a.get("user_id"),token=js_cookie__WEBPACK_IMPORTED_MODULE_11___default.a.get("token"),company_id=js_cookie__WEBPACK_IMPORTED_MODULE_11___default.a.get("company_id"),ProductionsURL="https://site.maple.today/IOTplatform/ServerMain",ProductionsData={requestCode:"005",user_id:user_id,token:token,company_id:company_id},AXIOS=axios__WEBPACK_IMPORTED_MODULE_9___default.a.create({headers:{"Content-Type":"application/x-www-form-urlencoded"}}),_this=this;AXIOS.post(ProductionsURL,qs__WEBPACK_IMPORTED_MODULE_10___default.a.stringify(ProductionsData)).then((function(res){_this.ProductionsInfor=res.data.data;for(var i=0;i<_this.ProductionsInfor.length;i++){var DeviceURL="https://site.maple.today/IOTplatform/ServerMain",DeviceData={requestCode:"025",user_id:user_id,token:token,company_id:company_id,product_id:_this.ProductionsInfor[i].product_id};AXIOS.post(DeviceURL,qs__WEBPACK_IMPORTED_MODULE_10___default.a.stringify(DeviceData)).then((function(res){_this.DeviceInfor=res.data.data;for(var j=0;j<_this.DeviceInfor.length;j++){var url="https://site.maple.today/IOTplatform/ServerMain",postdata={requestCode:"027",user_id:user_id,token:token,company_id:company_id,device_id:_this.DeviceInfor[j].sensor_id};AXIOS.post(url,qs__WEBPACK_IMPORTED_MODULE_10___default.a.stringify(postdata)).then((function(res){var temp=res.data.data,temperature_seriesData=[],humidity_seriesData=[],voltage_seriesData=[],electricity_seriesData=[],device_id=qs__WEBPACK_IMPORTED_MODULE_10___default.a.parse(res.config.data).device_id;_this.DataSource.push("device_"+device_id);for(var k=0;k<temp.length;k++)for(var time=temp[k].time,arr=eval("("+temp[k].data+")"),temperature={},humidity={},voltage={},electricity={},l=0;l<arr.length;l++)0===l?(temperature={name:time,value:[time,arr[l]]},temperature_seriesData.push(temperature)):1===l?(humidity={name:time,value:[time,arr[l]]},humidity_seriesData.push(humidity)):2===l?(voltage={name:time,value:[time,arr[l]]},voltage_seriesData.push(voltage)):(electricity={name:time,value:[time,arr[l]]},electricity_seriesData.push(electricity));_this.Device.push({device_id:device_id,value:{temperature:temperature_seriesData,humidity:humidity_seriesData,voltage:voltage_seriesData,electricity:electricity_seriesData}})})).catch((function(t){}))}})).catch((function(t){}))}})).catch((function(t){}))},created:function(){"3"===js_cookie__WEBPACK_IMPORTED_MODULE_11___default.a.get("modal")&&(this.isType3=!0)},methods:{ChangeSource:function(t){this.SelcetDataSource=t},deletecol:function(t){this.infor.splice(t,1)},AddSearch:function(){this.infor.length>=25?alert("查询点过多"):(this.infor.push({target:"请输入指标eg:\ntemperature>=40;\ntemperature<20",function:"请选择聚合函数",filtration:[],underclocking:!1}),this.collapseName.push(this.infor.length-1))},SelectData:function(){for(var t=this,e="",a=0;a<t.Device.length;a++)if("device_"+t.Device[a].device_id===t.SelcetDataSource){e=JSON.parse(JSON.stringify(t.Device[a].value));break}e.temperature.sort(compare),e.humidity.sort(compare),e.voltage.sort(compare),e.electricity.sort(compare);var i=t.value2[0],r=t.value2[1];i=TimeChangeString(i),r=TimeChangeString(r),e.temperature=CheckDate(i,r,e.temperature),e.humidity=CheckDate(i,r,e.humidity),e.voltage=CheckDate(i,r,e.voltage),e.electricity=CheckDate(i,r,e.electricity);var s=[];for(a=0;a<t.infor.length;a++){var n=TargetData(t.infor[a].target,JSON.parse(JSON.stringify(e)));s.push(n)}var o=[];for(a=0;a<t.infor.length;a++){var l=FunctionData(t.infor[a].function,s[a].temperature),c=FunctionData(t.infor[a].function,s[a].humidity),d=FunctionData(t.infor[a].function,s[a].voltage),u=FunctionData(t.infor[a].function,s[a].electricity);o.push({temperature:l,humidity:c,voltage:d,electricity:u})}for(a=0;a<t.infor.length;a++)for(var p=0;p<t.infor[a].filtration.length;p++)"temperature"===t.infor[a].filtration[p]?s[a].temperature=[]:"humidity"===t.infor[a].filtration[p]?s[a].humidity=[]:"voltage"===t.infor[a].filtration[p]?s[a].voltage=[]:"electricity"===t.infor[a].filtration[p]&&(s[a].electricity=[]);for(a=0;a<t.infor.length;a++)!0===t.infor[a].underclocking&&(s[a].temperature=SubFre(s[a].temperature),s[a].humidity=SubFre(s[a].humidity),s[a].voltage=SubFre(s[a].voltage),s[a].electricity=SubFre(s[a].electricity));for(a=0;a<t.infor.length;a++)!0===t.infor[a].underclocking&&(s[a].temperature=Fre2(s[a].temperature,5),s[a].humidity=Fre2(s[a].humidity,5),s[a].voltage=Fre2(s[a].voltage,5),s[a].electricity=Fre2(s[a].electricity,5));if("first"===t.tabName)for(a=0;a<t.infor.length;a++){var m=document.createElement("div");m.id="module_"+String.fromCharCode(Number(a)+65),m.style="width: 1200px;height: 400px;",document.getElementById("main").appendChild(m);var _=document.getElementById("module_"+String.fromCharCode(Number(a)+65)),h=echarts__WEBPACK_IMPORTED_MODULE_8__["init"](_),f={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"属性",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:s[a].temperature.length,name:"temperature"},{value:s[a].humidity.length,name:"humidity"},{value:s[a].voltage.length,name:"voltage"},{value:s[a].electricity.length,name:"electricity"}]}]};f&&h.setOption(f)}else if("second"===t.tabName)for(a=0;a<t.infor.length;a++)m=document.createElement("div"),m.id="module_"+String.fromCharCode(Number(a)+65),m.style="width: 1200px;height: 400px;",document.getElementById("main").appendChild(m),_=document.getElementById("module_"+String.fromCharCode(Number(a)+65)),h=echarts__WEBPACK_IMPORTED_MODULE_8__["init"](_),f={title:{text:"module_"+String.fromCharCode(Number(a)+65)},legend:{data:["Temperature","Humidity","Voltage","Electricity"]},tooltip:{trigger:"axis",formatter:function(t){return t=t[0],t.name+" Value: "+t.value[1]},axisPointer:{animation:!1}},xAxis:{type:"time",axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1},axisLine:{show:!0}},series:[{name:"Temperature",type:"line",showSymbol:!1,hoverAnimation:!1,data:s[a].temperature},{name:"Humidity",type:"line",showSymbol:!1,hoverAnimation:!1,data:s[a].humidity},{name:"Voltage",type:"line",showSymbol:!1,hoverAnimation:!1,data:s[a].voltage},{name:"Electricity",type:"line",showSymbol:!1,hoverAnimation:!1,data:s[a].electricity}]},f&&h.setOption(f)}}}},ec88:function(t,e,a){"use strict";a("9599")},f24c:function(t,e,a){},f4db:function(t,e,a){"use strict";a("9d98")},fac1:function(t,e,a){}});
//# sourceMappingURL=app.8b12d7f8.js.map